System.register(["./index-92d00b49.js","./director-44a98d9f.js","./pipeline-state-manager-45d8faaf.js","./node-event-c62a1caf.js"],(function(t){"use strict";var e,a,i,n,r,s,l,h,c,o,u,f;return{setters:[function(t){e=t.bF,a=t.f,i=t.d,n=t.bC,r=t.bH,s=t.bI,l=t.bE,h=t.cw,c=t.bX},function(t){o=t.a5,u=t.b4},function(){},function(t){f=t.C}],execute:function(){var m,_,d,M,g,I,p={parent:null,owner:null,subModelIdx:0},y=h,b=c;t("R",(m=l("cc.Renderer"),_=b(u),d=b([u]),m(M=y((g=function(t){function r(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this)._materials=I&&I(),e._materialInstances=[],e}e(r,t);var s=r.prototype;return s.getMaterial=function(t){return this.getSharedMaterial(t)},s.setMaterial=function(t,e){this.setSharedMaterial(t,e)},s.getSharedMaterial=function(t){return t<0||t>=this._materials.length?null:this._materials[t]},s.setSharedMaterial=function(t,e){t&&t instanceof o&&a(12012),this._materials[e]=t;var i=this._materialInstances[e];i&&(i.destroy(),this._materialInstances[e]=null),this._onMaterialModified(e,this._materials[e])},s.getMaterialInstance=function(t){if(!this._materials[t])return null;if(!this._materialInstances[t]){p.parent=this._materials[t],p.owner=this,p.subModelIdx=t;var e=new o(p);p.parent=null,p.owner=null,p.subModelIdx=0,this.setMaterialInstance(e,t)}return this._materialInstances[t]},s.setMaterialInstance=function(t,e){if("number"==typeof t){i(12007);var a=t;t=e,e=a}var n=this._materialInstances[e];t&&t.parent?t!==n&&(this._materialInstances[e]=t,this._onMaterialModified(e,t)):(t!==this._materials[e]||n)&&this.setSharedMaterial(t,e)},s.getRenderMaterial=function(t){return this._materialInstances[t]||this._materials[t]},s._onMaterialModified=function(){},s._onRebuildPSO=function(){},s._clearMaterials=function(){},n(r,[{key:"sharedMaterial",get:function(){return this.getSharedMaterial(0)}},{key:"sharedMaterials",get:function(){return this._materials},set:function(t){for(var e=0;e<t.length;e++)t[e]!==this._materials[e]&&this.setSharedMaterial(t[e],e);if(t.length<this._materials.length){for(var a=t.length;a<this._materials.length;a++)this.setSharedMaterial(null,a);this._materials.splice(t.length)}}},{key:"material",get:function(){return this.getMaterialInstance(0)},set:function(t){(1!==this._materials.length||this._materialInstances[0]||this._materials[0]!==t)&&this.setMaterialInstance(t,0)}},{key:"materials",get:function(){for(var t=0;t<this._materials.length;t++)this._materialInstances[t]=this.getMaterialInstance(t);return this._materialInstances},set:function(t){for(var e=t.length,a=this._materials.length,i=e;i<a;i++)this.setMaterialInstance(null,i);this._materials.length=e,this._materialInstances.length=e;for(var n=0;n<e;n++)this._materialInstances[n]!=t[n]&&this.setMaterialInstance(t[n],n)}}]),r}(f),r(g.prototype,"sharedMaterials",[_],Object.getOwnPropertyDescriptor(g.prototype,"sharedMaterials"),g.prototype),I=s(g.prototype,"_materials",[d],(function(){return[]})),M=g))||M)||M))}}}));
