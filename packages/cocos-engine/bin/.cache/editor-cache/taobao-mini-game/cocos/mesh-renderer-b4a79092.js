System.register(["./index-433d8403.js","./mesh-8d5cf67e.js","./director-c293a59c.js","./pipeline-state-manager-c8832894.js","./buffer-barrier-8663498b.js","./deprecated-6c3e37bc.js","./model-renderer-0476c968.js","./node-event-0336ef70.js"],(function(e){"use strict";var t,i,o,n,a,s,h,r,d,l,c,p,u,_,b,g,f,m,P,S,R,M,y,B,w,v,k,C,L,O;return{setters:[function(e){t=e.bF,i=e.ad,o=e.bC,n=e.bI,a=e.bH,s=e.b2,h=e.b1,r=e.l,d=e.bz,l=e.d,c=e.bE,p=e.bX,u=e.aw,_=e.ay,b=e.aG,g=e.q,f=e.ax,m=e.cx,P=e.bj,S=e.bi},function(e){R=e.M},function(e){M=e.h,y=e.aw,B=e.bD,w=e.aE,v=e.aD,k=e.be},function(e){C=e.m},function(){},function(){},function(e){L=e.M},function(e){O=e.N}],execute:function(){var I,E,D,N,T,U,A,G,F,j,W,H,x,z,K,Y,X,q,V,Q,J,Z,$,ee,te,ie,oe,ne,ae,se,he,re,de,le,ce,pe,ue,_e,be,ge,fe,me,Pe=e("a",function(e){function i(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this)._morphRenderingInstance=null,t._usedMaterials=new Set,t}t(i,e);var o=i.prototype;return o.getMacroPatches=function(t){var i=e.prototype.getMacroPatches.call(this,t);if(this._morphRenderingInstance){var o=this._morphRenderingInstance.requiredPatches(t);if(o)return o.concat(null!=i?i:[])}return i},o.initSubModel=function(t,i,o){return e.prototype.initSubModel.call(this,t,i,this._launderMaterial(o))},o.destroy=function(){e.prototype.destroy.call(this),this._morphRenderingInstance=null},o.setSubModelMaterial=function(t,i){return e.prototype.setSubModelMaterial.call(this,t,this._launderMaterial(i))},o.setMorphRendering=function(e){this._morphRenderingInstance=e},o._updateLocalDescriptors=function(t,i){e.prototype._updateLocalDescriptors.call(this,t,i),this._morphRenderingInstance&&this._morphRenderingInstance.adaptPipelineState(t,i)},o._launderMaterial=function(e){return e},i}(M)),Se=c,Re=m,Me=p,ye=S,Be=P,we=y("specular-pass");function ve(e){var t=e.passes,i=r.rendering;C()&&(we=i.getPhaseID(i.getPassID("specular-pass"),"default"));for(var o=0;o<t.length;o++)if((!i||!i.enableEffectImport)&&t[o].phase===we||C()&&t[o].phaseID===we)return o;return-1}var ke=i({OFF:0,ON:1}),Ce=i({OFF:0,ON:1}),Le=(I=Se("cc.ModelBakeSettings"),E=ye("_recieveShadow"),D=Me(u),N=Me(_),T=Me(_),U=Me(i(B)),A=Me(_),I(((Q=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).texture=j&&j(),t.uvParam=W&&W(),t._bakeable=H&&H(),t._castShadow=x&&x(),t._receiveShadow=z&&z(),t._lightmapSize=K&&K(),t._useLightProbe=Y&&Y(),t._bakeToLightProbe=X&&X(),t._reflectionProbeType=q&&q(),t._bakeToReflectionProbe=V&&V(),t.probeCubemap=null,t.probeBlendCubemap=null,t.probePlanarmap=null,t}return t(i,e),o(i,[{key:"bakeable",get:function(){return this._bakeable},set:function(e){this._bakeable=e}},{key:"castShadow",get:function(){return this._castShadow},set:function(e){this._castShadow=e}},{key:"receiveShadow",get:function(){return this._receiveShadow},set:function(e){this._receiveShadow=e}},{key:"lightmapSize",get:function(){return this._lightmapSize},set:function(e){this._lightmapSize=e}},{key:"useLightProbe",get:function(){return this._useLightProbe},set:function(e){this._useLightProbe=e,this.emit(i.USE_LIGHT_PROBE_CHANGED)}},{key:"bakeToLightProbe",get:function(){return this._bakeToLightProbe},set:function(e){this._bakeToLightProbe=e}},{key:"reflectionProbe",get:function(){return this._reflectionProbeType},set:function(e){this._reflectionProbeType=e,this.emit(i.REFLECTION_PROBE_CHANGED)}},{key:"bakeToReflectionProbe",get:function(){return this._bakeToReflectionProbe},set:function(e){this._bakeToReflectionProbe=e,this.emit(i.BAKE_TO_REFLECTION_PROBE_CHANGED)}}]),i}(b)).USE_LIGHT_PROBE_CHANGED="use_light_probe_changed",Q.REFLECTION_PROBE_CHANGED="reflection_probe_changed",Q.BAKE_TO_REFLECTION_PROBE_CHANGED="bake_to_reflection_probe_changed",j=n((F=Q).prototype,"texture",[Be],(function(){return null})),W=n(F.prototype,"uvParam",[Be],(function(){return new g})),H=n(F.prototype,"_bakeable",[Be],(function(){return!1})),x=n(F.prototype,"_castShadow",[Be],(function(){return!1})),z=n(F.prototype,"_receiveShadow",[E],(function(){return!1})),K=n(F.prototype,"_lightmapSize",[Be],(function(){return 64})),Y=n(F.prototype,"_useLightProbe",[Be],(function(){return!1})),X=n(F.prototype,"_bakeToLightProbe",[Be],(function(){return!0})),q=n(F.prototype,"_reflectionProbeType",[Be],(function(){return B.NONE})),V=n(F.prototype,"_bakeToReflectionProbe",[Be],(function(){return!0})),a(F.prototype,"lightmapSize",[D],Object.getOwnPropertyDescriptor(F.prototype,"lightmapSize"),F.prototype),a(F.prototype,"useLightProbe",[N],Object.getOwnPropertyDescriptor(F.prototype,"useLightProbe"),F.prototype),a(F.prototype,"bakeToLightProbe",[T],Object.getOwnPropertyDescriptor(F.prototype,"bakeToLightProbe"),F.prototype),a(F.prototype,"reflectionProbe",[U],Object.getOwnPropertyDescriptor(F.prototype,"reflectionProbe"),F.prototype),a(F.prototype,"bakeToReflectionProbe",[A],Object.getOwnPropertyDescriptor(F.prototype,"bakeToReflectionProbe"),F.prototype),G=F))||G);e("M",(J=Se("cc.MeshRenderer"),Z=Re(100),$=Me(f),ee=Me(f),te=Me(ke),ie=Me(Ce),oe=Me(R),ne=Me(_),J(ae=Z(((me=function(e){t(n,e);var i=n.prototype;function n(){var t;return(t=e.call(this)||this).bakeSettings=he&&he(),t._mesh=re&&re(),t._shadowCastingMode=de&&de(),t._shadowReceivingMode=le&&le(),t._shadowBias=ce&&ce(),t._shadowNormalBias=pe&&pe(),t._reflectionProbeId=ue&&ue(),t._reflectionProbeBlendId=_e&&_e(),t._reflectionProbeBlendWeight=be&&be(),t._enabledGlobalStandardSkinObject=ge&&ge(),t._reflectionProbeDataMap=null,t._subMeshShapesWeights=[],t._modelType=void 0,t._model=null,t._morphInstance=null,t._enableMorph=fe&&fe(),t._modelType=M,s.querySettings(h.Category.RENDERING,"highQualityMode")&&(t._shadowCastingMode=ke.ON,t.bakeSettings.castShadow=!0,t.bakeSettings.receiveShadow=!0),t}return i.onUpdateReceiveDirLight=function(e,t){void 0===t&&(t=!1),this._model&&(t?this._model.receiveDirLight=!1:this.node&&(e&this.node.layer)===this.node.layer||e&this._model.visFlags?this._model.receiveDirLight=!0:this._model.receiveDirLight=!1)},i.clearGlobalStandardSkinObjectFlag=function(){this._enabledGlobalStandardSkinObject=!1},i.onLoad=function(){this._mesh&&this._mesh.initialize(),this._validateShapeWeights()||this._initSubMeshShapesWeights(),this._watchMorphInMesh(),this._updateModels(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateUseLightProbe(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._updateStandardSkin()},i.onRestore=function(){this._updateModels(),this.enabledInHierarchy&&this._attachToScene(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateUseLightProbe(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._updateStandardSkin()},i.onEnable=function(){e.prototype.onEnable.call(this),this.node.on(O.MOBILITY_CHANGED,this.onMobilityChanged,this),this.node.on(O.LIGHT_PROBE_BAKING_CHANGED,this.onLightProbeBakingChanged,this),this.bakeSettings.on(Le.USE_LIGHT_PROBE_CHANGED,this.onUseLightProbeChanged,this),this.bakeSettings.on(Le.REFLECTION_PROBE_CHANGED,this.onReflectionProbeChanged,this),this.bakeSettings.on(Le.BAKE_TO_REFLECTION_PROBE_CHANGED,this.onBakeToReflectionProbeChanged,this),this._model||this._updateModels(),this._model.onGlobalPipelineStateChanged(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateShadowBias(),this._updateShadowNormalBias(),this._updateBakeToReflectionProbe(),this._updateUseReflectionProbe(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateUseLightProbe(),this._updateReceiveDirLight(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData(),this._updateStandardSkin(),this._attachToScene()},i.onDisable=function(){this._model&&this._detachFromScene(),this.node.off(O.MOBILITY_CHANGED,this.onMobilityChanged,this),this.node.off(O.LIGHT_PROBE_BAKING_CHANGED,this.onLightProbeBakingChanged,this),this.bakeSettings.off(Le.USE_LIGHT_PROBE_CHANGED,this.onUseLightProbeChanged,this),this.bakeSettings.off(Le.REFLECTION_PROBE_CHANGED,this.onReflectionProbeChanged,this),this.bakeSettings.off(Le.BAKE_TO_REFLECTION_PROBE_CHANGED,this.onBakeToReflectionProbeChanged,this)},i.onDestroy=function(){this._model&&(r.director.root.destroyModel(this._model),this._model=null,this._models.length=0),this._morphInstance&&this._morphInstance.destroy()},i.onGeometryChanged=function(){if(this._model&&this._mesh){var e=this._mesh.struct;this._model.createBoundingShape(e.minPosition,e.maxPosition),this._model.updateWorldBound(),this._model.onGeometryChanged()}},i.getWeight=function(e,t){var i=this._subMeshShapesWeights;d(e<i.length);var o=this._subMeshShapesWeights[e];return d(t<o.length),o[t]},i.setWeights=function(e,t){var i=this._subMeshShapesWeights;t>=i.length||i[t].length===e.length&&(i[t]=e.slice(0),this._uploadSubMeshShapesWeights(t))},i.setWeight=function(e,t,i){var o=this._subMeshShapesWeights;if(!(t>=o.length)){var n=o[t];i>=n.length||(n[i]=e,this._uploadSubMeshShapesWeights(t))}},i.setInstancedAttribute=function(e,t){if(this.model)for(var i=this.model.subModels,o=0;o<i.length;o++)for(var n=i[o].instancedAttributeBlock,a=n.attributes,s=n.views,h=0;h<a.length;h++)if(a[h].name===e){s[h].set(t);break}},i._updateLightmap=function(e,t,i,o,n){this.bakeSettings.texture=e,this.bakeSettings.uvParam.x=t,this.bakeSettings.uvParam.y=i,this.bakeSettings.uvParam.z=o,this.bakeSettings.uvParam.w=n,this._onUpdateLightingmap(),this._updateReceiveDirLight()},i.updateProbeCubemap=function(e){this.bakeSettings.probeCubemap&&this.bakeSettings.probeCubemap===e||(this.bakeSettings.probeCubemap=e,null!==this.model&&this.model.updateReflectionProbeCubemap(this.bakeSettings.probeCubemap))},i.updateProbeBlendCubemap=function(e){this.bakeSettings.probeBlendCubemap&&this.bakeSettings.probeBlendCubemap===e||(this.bakeSettings.probeBlendCubemap=e,null!==this.model&&this.model.updateReflectionProbeBlendCubemap(this.bakeSettings.probeBlendCubemap))},i.updateProbePlanarMap=function(e){this.bakeSettings.probePlanarmap!==e&&(this.bakeSettings.probePlanarmap=e,null!==this.model&&this.model.updateReflectionProbePlanarMap(this.bakeSettings.probePlanarmap))},i.updateReflectionProbeDataMap=function(e){this._reflectionProbeDataMap=e,null!==this.model&&this.model.updateReflectionProbeDataMap(e)},i.updateReflectionProbeId=function(e){this._reflectionProbeId=e,this.model&&(this.model.reflectionProbeId=e),this._onUpdateLocalShadowBiasAndProbeId()},i.updateReflectionProbeBlendId=function(e){this._reflectionProbeBlendId=e,this.model&&(this.model.reflectionProbeBlendId=e),this._onUpdateLocalShadowBiasAndProbeId()},i.updateReflectionProbeBlendWeight=function(e){this._reflectionProbeBlendWeight=e,this.model&&(this.model.reflectionProbeBlendWeight=e),this._onUpdateLocalReflectionProbeData()},i._updateReflectionProbeTexture=function(){if(this.model){var e=this.bakeSettings,t=e.reflectionProbe,i=e.probeBlendCubemap,o=e.probePlanarmap,n=e.probeCubemap;t===B.BAKED_CUBEMAP?(this.model.updateReflectionProbeCubemap(n),this.model.updateReflectionProbePlanarMap(null),this.model.updateReflectionProbeBlendCubemap(null)):t===B.BLEND_PROBES||t===B.BLEND_PROBES_AND_SKYBOX?(this.model.updateReflectionProbeCubemap(n),this.model.updateReflectionProbeBlendCubemap(i),this.model.updateReflectionProbePlanarMap(null)):t===B.PLANAR_REFLECTION?(this.model.updateReflectionProbePlanarMap(o),this.model.updateReflectionProbeCubemap(null),this.model.updateReflectionProbeBlendCubemap(null)):(this.model.updateReflectionProbeCubemap(null),this.model.updateReflectionProbePlanarMap(null),this.model.updateReflectionProbeBlendCubemap(null))}},i._updateModels=function(){if(this.enabledInHierarchy){var e=this._model;if(e?(e.destroy(),e.initialize(),e.node=e.transform=this.node):this._createModel(),this._model){if(this._mesh){var t=this._mesh.struct;this._model.createBoundingShape(t.minPosition,t.maxPosition),this._model.updateWorldBound()}this._model.initLightingmap(this.bakeSettings.texture,this.bakeSettings.uvParam),this._updateUseLightProbe(),this._updateUseReflectionProbeType(),this._updateModelParams(),this._onUpdateLightingmap(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateUseReflectionProbe(),this._updateReceiveDirLight(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData()}}},i._updateReceiveDirLight=function(){if(this._model){var e=this.node.scene;if(e&&e.renderScene){var t=e.renderScene.mainLight;if(t){var i=t.visibility;if(t.node)if(t.node.mobility===w.Static){var o=!1;this.bakeSettings.texture&&!this.node.scene.globals.disableLightmap&&(o=!0),this.node.scene.globals.lightProbeInfo.data&&this.node.scene.globals.lightProbeInfo.data.hasCoefficients()&&this._model.useLightProbe&&(o=!0),this.onUpdateReceiveDirLight(i,o)}else this.onUpdateReceiveDirLight(i)}}}},i._createModel=function(){var e=this._morphInstance&&this._modelType===M?Pe:this._modelType,t=this._model=r.director.root.createModel(e);t.visFlags=this.visibility,t.node=t.transform=this.node,this._models.length=0,this._models.push(this._model),this._morphInstance&&t instanceof Pe&&t.setMorphRendering(this._morphInstance)},i._attachToScene=function(){if(this.node.scene&&this._model){var e=this._getRenderScene();null!==this._model.scene&&this._detachFromScene(),e.addModel(this._model)}},i._detachFromScene=function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)},i._updateModelParams=function(){if(this._mesh&&this._model){this.node.hasChangedFlags|=v.POSITION,this._model.transform.hasChangedFlags|=v.POSITION,this._model.isDynamicBatching=this._isBatchingEnabled();var e=this._mesh?this._mesh.renderingSubMeshes.length:0,t=this._mesh.renderingSubMeshes;if(t)for(var i=0;i<e;++i){var o=this.getRenderMaterial(i);o&&!o.isValid&&(o=null);var n=t[i];n&&this._model.initSubModel(i,n,o||this._getBuiltinMaterial())}this._model.enabled=!0}},i._onUpdateLightingmap=function(){null!==this.model&&this.model.updateLightingmap(this.bakeSettings.texture,this.bakeSettings.uvParam),this.setInstancedAttribute("a_lightingMapUVParam",[this.bakeSettings.uvParam.x,this.bakeSettings.uvParam.y,this.bakeSettings.uvParam.z,this.bakeSettings.uvParam.w])},i._onUpdateLocalShadowBiasAndProbeId=function(){null!==this.model&&(this.model.updateLocalShadowBias(),this.model.updateReflectionProbeId()),this.setInstancedAttribute("a_localShadowBiasAndProbeId",[this._shadowBias,this._shadowNormalBias,this._reflectionProbeId,this._reflectionProbeBlendId])},i._onUpdateLocalReflectionProbeData=function(){this.bakeSettings.reflectionProbe!==B.BAKED_CUBEMAP&&this.bakeSettings.reflectionProbe!==B.BLEND_PROBES&&this.bakeSettings.reflectionProbe!==B.BLEND_PROBES_AND_SKYBOX||(null!==this.model&&this.model.updateReflectionProbeId(),this.setInstancedAttribute("a_reflectionProbeData",[this._reflectionProbeBlendWeight,0,0,0]))},i._onUpdateReflectionProbeDataMap=function(){null!==this.model&&this.model.updateReflectionProbeDataMap(this._reflectionProbeDataMap)},i._onMaterialModified=function(e,t){this._model&&this._model.inited&&(this._onRebuildPSO(e,t||this._getBuiltinMaterial()),this._updateStandardSkin())},i._onRebuildPSO=function(e,t){this._model&&this._model.inited&&(this._model.isDynamicBatching=this._isBatchingEnabled(),this._model.setSubModelMaterial(e,t),this._onUpdateLightingmap(),this._onUpdateLocalShadowBiasAndProbeId(),this._updateReflectionProbeTexture(),this._onUpdateReflectionProbeDataMap(),this._onUpdateLocalReflectionProbeData())},i._onMeshChanged=function(){},i._clearMaterials=function(){if(this._model)for(var e=this._model.subModels,t=0;t<e.length;++t)this._onMaterialModified(t,null)},i._getBuiltinMaterial=function(){return k.get("missing-material")},i._onVisibilityChange=function(e){this._model&&(this._model.visFlags=e)},i._updateShadowBias=function(){this._model&&(this._model.shadowBias=this._shadowBias)},i._updateShadowNormalBias=function(){this._model&&(this._model.shadowNormalBias=this._shadowNormalBias)},i._updateCastShadow=function(){this._model&&(this._shadowCastingMode===ke.OFF?this._model.castShadow=!1:(d(this._shadowCastingMode===ke.ON,"ShadowCastingMode "+this._shadowCastingMode+" is not supported."),this._model.castShadow=!0))},i._updateReceiveShadow=function(){this._model&&(this._shadowReceivingMode===Ce.OFF?this._model.receiveShadow=!1:this._model.receiveShadow=!0)},i.onMobilityChanged=function(){this._updateUseLightProbe(),this._updateReceiveDirLight()},i.onLightProbeBakingChanged=function(){this._updateReceiveDirLight()},i.onUseLightProbeChanged=function(){this._updateUseLightProbe()},i.onReflectionProbeChanged=function(){this._updateUseReflectionProbe(),this._onUpdateLocalShadowBiasAndProbeId(),this.bakeSettings.reflectionProbe===B.BAKED_CUBEMAP||this.bakeSettings.reflectionProbe===B.BLEND_PROBES||this.bakeSettings.reflectionProbe===B.BLEND_PROBES_AND_SKYBOX?(r.internal.reflectionProbeManager.selectReflectionProbe(this._model),r.internal.reflectionProbeManager.getUsedReflectionProbe(this._model,!1)||l(16302)):this.bakeSettings.reflectionProbe===B.PLANAR_REFLECTION&&(r.internal.reflectionProbeManager.selectPlanarReflectionProbe(this._model),r.internal.reflectionProbeManager.getUsedReflectionProbe(this._model,!0)||l(16302))},i.onBakeToReflectionProbeChanged=function(){this._updateBakeToReflectionProbe()},i._updateUseLightProbe=function(){if(this._model){var e=this.node;this._mesh&&e&&e.mobility===w.Movable&&this.bakeSettings.useLightProbe?this._model.useLightProbe=!0:this._model.useLightProbe=!1}},i._isBatchingEnabled=function(){for(var e=0;e<this._materials.length;++e){var t=this._materials[e];if(t)for(var i=0;i<t.passes.length;++i)if(t.passes[i].batchingScheme)return!0}return!1},i._updateUseReflectionProbe=function(){this._model&&(this._model.reflectionProbeType=this.bakeSettings.reflectionProbe,this._updateReflectionProbeTexture())},i._updateUseReflectionProbeType=function(){this._model&&(this._model.reflectionProbeType=this.bakeSettings.reflectionProbe)},i._updateBakeToReflectionProbe=function(){this._model&&(this._model.bakeToReflectionProbe=this.bakeSettings.bakeToReflectionProbe)},i._watchMorphInMesh=function(){if(this._morphInstance&&(this._morphInstance.destroy(),this._morphInstance=null),this._enableMorph&&this._mesh&&this._mesh.struct.morph&&this._mesh.morphRendering){this._morphInstance=this._mesh.morphRendering.createInstance();for(var e=this._mesh.struct.primitives.length,t=0;t<e;++t)this._uploadSubMeshShapesWeights(t);this._model&&this._model instanceof Pe&&this._model.setMorphRendering(this._morphInstance)}},i._initSubMeshShapesWeights=function(){var e=this._mesh;if(this._subMeshShapesWeights.length=0,e){var t=e.struct.morph;if(t){var i=t.weights;this._subMeshShapesWeights=t.subMeshMorphs.map((function(e){return e?e.weights?e.weights.slice(0):i?(d(i.length===e.targets.length),i.slice(0)):new Array(e.targets.length).fill(0):[]}))}}},i._validateShapeWeights=function(){var e=this._mesh,t=this._subMeshShapesWeights;if(!e||!e.struct.morph)return 0===t.length;var i=e.struct.morph;return i.subMeshMorphs.length===t.length&&t.every((function(e,t){var o,n,a=e.length;return(null!==(o=null===(n=i.subMeshMorphs[t])||void 0===n?void 0:n.targets.length)&&void 0!==o?o:0)===a}))},i._uploadSubMeshShapesWeights=function(e){var t;null===(t=this._morphInstance)||void 0===t||t.setWeights(e,this._subMeshShapesWeights[e])},i._updateStandardSkin=function(){var e=r.director.root.pipeline.pipelineSceneData;if(this._enabledGlobalStandardSkinObject&&(e.standardSkinMeshRenderer=this,e.standardSkinModel=this.model),!e.skinMaterialModel&&this._model)for(var t=this._model.subModels,i=0;i<t.length;i++)if(!(ve(t[i])<0))return void(e.skinMaterialModel=this._model)},o(n,[{key:"shadowBias",get:function(){return this._shadowBias},set:function(e){this._shadowBias=e,this._updateShadowBias(),this._onUpdateLocalShadowBiasAndProbeId()}},{key:"shadowNormalBias",get:function(){return this._shadowNormalBias},set:function(e){this._shadowNormalBias=e,this._updateShadowNormalBias(),this._onUpdateLocalShadowBiasAndProbeId()}},{key:"shadowCastingMode",get:function(){return this._shadowCastingMode},set:function(e){this._shadowCastingMode=e,this._updateCastShadow()}},{key:"shadowCastingModeForInspector",get:function(){return this.shadowCastingMode===ke.ON},set:function(e){this.shadowCastingMode=!0===e?ke.ON:ke.OFF}},{key:"receiveShadow",get:function(){return this._shadowReceivingMode},set:function(e){this._shadowReceivingMode=e,this._updateReceiveShadow()}},{key:"receiveShadowForInspector",get:function(){return this._shadowReceivingMode===Ce.ON},set:function(e){this._shadowReceivingMode=!0===e?Ce.ON:Ce.OFF,this._updateReceiveShadow()}},{key:"mesh",get:function(){return this._mesh},set:function(e){var t=this._mesh,i=this._mesh=e;null==i||i.initialize(),this._initSubMeshShapesWeights(),this._watchMorphInMesh(),this._onMeshChanged(t),this._updateModels(),this.enabledInHierarchy&&this._attachToScene(),this._updateCastShadow(),this._updateReceiveShadow(),this._updateUseLightProbe(),this._updateUseReflectionProbe(),this._updateReceiveDirLight()}},{key:"model",get:function(){return this._model}},{key:"enableMorph",get:function(){return this._enableMorph},set:function(e){this._enableMorph=e}},{key:"isGlobalStandardSkinObject",get:function(){return this._enabledGlobalStandardSkinObject},set:function(e){r.director.root.pipeline.pipelineSceneData.standardSkinMeshRenderer=e?this:null,this._enabledGlobalStandardSkinObject=e}}]),n}(L)).ShadowCastingMode=ke,me.ShadowReceivingMode=Ce,he=n((se=me).prototype,"bakeSettings",[Be],(function(){return new Le(this)})),re=n(se.prototype,"_mesh",[Be],(function(){return null})),de=n(se.prototype,"_shadowCastingMode",[Be],(function(){return ke.OFF})),le=n(se.prototype,"_shadowReceivingMode",[Be],(function(){return Ce.ON})),ce=n(se.prototype,"_shadowBias",[Be],(function(){return 0})),pe=n(se.prototype,"_shadowNormalBias",[Be],(function(){return 0})),ue=n(se.prototype,"_reflectionProbeId",[Be],(function(){return-1})),_e=n(se.prototype,"_reflectionProbeBlendId",[Be],(function(){return-1})),be=n(se.prototype,"_reflectionProbeBlendWeight",[Be],(function(){return 0})),ge=n(se.prototype,"_enabledGlobalStandardSkinObject",[Be],(function(){return!1})),a(se.prototype,"shadowBias",[$],Object.getOwnPropertyDescriptor(se.prototype,"shadowBias"),se.prototype),a(se.prototype,"shadowNormalBias",[ee],Object.getOwnPropertyDescriptor(se.prototype,"shadowNormalBias"),se.prototype),a(se.prototype,"shadowCastingMode",[te],Object.getOwnPropertyDescriptor(se.prototype,"shadowCastingMode"),se.prototype),a(se.prototype,"receiveShadow",[ie],Object.getOwnPropertyDescriptor(se.prototype,"receiveShadow"),se.prototype),a(se.prototype,"mesh",[oe],Object.getOwnPropertyDescriptor(se.prototype,"mesh"),se.prototype),a(se.prototype,"isGlobalStandardSkinObject",[ne],Object.getOwnPropertyDescriptor(se.prototype,"isGlobalStandardSkinObject"),se.prototype),fe=n(se.prototype,"_enableMorph",[Be],(function(){return!0})),ae=se))||ae)||ae))}}}));
