System.register([],(function(t){"use strict";return{execute:function(){function e(t,e){const n="undefined"==typeof window?global:window;return void 0===n[t]?n[t]=e:n[t]}t({$:Mr,D:$r,G:hr,I:cr,J:lr,K:fr,L:yr,N:dr,O:vr,U:pr,W:gr,X:_r,Y:xr,Z:br,_:C,a:I,a0:wr,a1:Er,a2:Ar,a3:Nr,a4:Ir,a5:zr,a6:Tr,a7:Or,a8:Lr,a9:kr,aE:function(t){return t[Bs]},aH:Cn,aJ:S,aK:J,aL:$,aM:Z,ac:_e,ad:xe,ae:function(t){"__enums__"in t||Lt(t,"__enums__",null,!0)},ai:function(t){t>0&&(Zn=t)},am:nr,an:function(t){for(var e,n=p(t);!(e=n()).done;)rr(e.value)},ao:function(t){return tr||(tr="undefined"==typeof Proxy?{}:new Proxy(t,{get:function(t,e,n){return rr(e),Reflect.get(t,e,n)}})),tr},ap:yh,aq:dh,at:pn,au:gn,b:O,b5:Jm,b6:du,bA:function(t,e){e>=0&&t.length,t.length},bC:m,bF:h,bH:function(t,e,n,r,i){var a={};return Object.keys(r).forEach((function(t){a[t]=r[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a},bI:Ms,bK:le,bM:d,bP:te,bR:de,bS:$t,bU:Ht,bV:u,bW:pt,bX:uo,bY:ke,b_:Zt,bi:Hs,bm:function(t,e,n){hn(We(t),e,n)},bn:hn,bq:En,br:An,bu:P,bv:function(t,e){return vs(t,e,0)},bw:vs,bx:function(t,e,n){for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(n(s,e)<0)i=a-1;else{if(!(n(s,e)>0))return a;r=a+1}}return~r},by:function(){},bz:function(){},c:L,c1:Dt,c2:Xt,c6:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},c8:fe,c9:Us,cA:gt,cB:function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},cC:ks,cE:xt,cH:bt,cK:Be,cL:Ue,cP:Du,cR:Bn,cT:De,cU:He,cX:y,cc:function(t){var e=Math.max(Math.max(t.x,t.y),t.z),n=128;e>1e-4&&(n=Math.log(e)/Math.log(1.1),n=lr((n=Math.ceil(n))+128,0,255));var r=1/Math.pow(1.1,n-128),i=function(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}(t.multiplyScalar(r),new Gr(0,0,0),new Gr(1,1,1));i.multiplyScalar(255);var a,s,o=ti(i).add((a=i.subtract(ti(i)))<(s=new Gr(.5,.5,.5))?s:a);return new Br(o.x/255,o.y/255,o.z/255,n/255)},ci:vt,cj:Rt,ck:qt,cm:_t,cp:Dn,ct:ue,cv:Lo,cy:function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},d:F,e:T,f:D,g:X,i:p,p:Wr,r:Dr,s:li,u:gi,v:bi,w:z,x:Ai,z:Ii}),t("cg",!1),e("CC_WECHAT",!1),t("cw",!1),e("CC_BAIDU",!1),t("bZ",!1),e("CC_XIAOMI",!1),e("CC_ALIPAY",!1),e("CC_BYTEDANCE",!1),e("CC_OPPO",!1),e("CC_VIVO",!1),e("CC_HUAWEI",!1),e("CC_COCOSPLAY",!1),e("CC_QTT",!1),e("CC_LINKSURE",!1);const n=t("c0",!1);e("CC_EDITOR",!1),t("b$",!1),t("c3",!1),e("CC_PREVIEW",!1),e("CC_BUILD",!0),e("CC_TEST",!1),e("CC_DEBUG",!1),e("CC_DEV",!1),t("cM",!0),e("CC_MINIGAME",!0),t("cO",!1),e("CC_RUNTIME_BASED",!1),e("CC_SUPPORT_JIT",!1),t("cN",!1),e("CC_JSB",!1);var r="undefined"==typeof window?global:window,i=t("l",{_global:r});i.internal={};var a=t("k","3.8.3");r.CocosEngine=i.ENGINE_VERSION=a,r.cc=i;var s=t("bG",void 0!==globalThis.jsb&&void 0!==jsb.window?jsb.window:globalThis);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"))?i:String(i)),r)}var i}function m(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(){return t("bV",u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),u.apply(this,arguments)}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y(e,n,r){return f()?t("cX",y=Reflect.construct.bind()):t("cX",y=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}),y.apply(null,arguments)}function d(e){var n="function"==typeof Map?new Map:void 0;return t("bM",d=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return y(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)}),d(e)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.ccwindow=s;var g=s.document,_="https://github.com/cocos-creator/engine/blob/develop/EngineErrorMap.md",x=null,b=console.log.bind(console),M=b,w=b,E=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("ASSERT: "+N.apply(void 0,[e].concat(r)))}},A=b;function N(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.js.formatStr.apply(null,e)}function I(){return b.apply(void 0,arguments)}function z(){return M.apply(void 0,arguments)}function T(){return w.apply(void 0,arguments)}function O(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return E.apply(void 0,[t,e].concat(r))}function S(){return A.apply(void 0,arguments)}function P(t){if(b=M=w=E=A=function(){},t!==H.NONE){if(t>H.ERROR){var e=function(t){if(i.game.canvas){if(!x){var e=g.createElement("Div");e.setAttribute("id","logInfoDiv"),e.setAttribute("width","200"),e.setAttribute("height",i.game.canvas.height);var n=e.style;n.zIndex="99999",n.position="absolute",n.top=n.left="0",(x=g.createElement("textarea")).setAttribute("rows","20"),x.setAttribute("cols","30"),x.setAttribute("disabled","true");var r=x.style;r.backgroundColor="transparent",r.borderBottom="1px solid #cccccc",r.borderTopWidth=r.borderLeftWidth=r.borderRightWidth="0px",r.borderTopStyle=r.borderLeftStyle=r.borderRightStyle="none",r.padding="0px",r.margin="0px",e.appendChild(x),i.game.canvas.parentNode.appendChild(e)}x.value=x.value+t+"\r\n",x.scrollTop=x.scrollHeight}};w=function(){e("ERROR :  "+N.apply(void 0,arguments))},E=function(t,n){if(!t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];e("ASSERT: "+N.apply(void 0,[n].concat(i)))}},t!==H.ERROR_FOR_WEB_PAGE&&(M=function(){e("WARN :  "+N.apply(void 0,arguments))}),t===H.INFO_FOR_WEB_PAGE&&(b=function(){e(N.apply(void 0,arguments))})}else console&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),w=console.error.bind?console.error.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error.apply(console,e)},E=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=N.apply(void 0,[e].concat(r));throw new Error(a)}});if(t!==H.ERROR&&(M=console.warn.bind?console.warn.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.warn.apply(console,e)}),t<=H.INFO&&(b=console.log.bind?console.log.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.log.apply(console,e)}),t<=H.VERBOSE&&"function"==typeof console.debug){var n=console.debug.bind(console);A=function(){return n.apply(void 0,arguments)}}}}function C(t){T(t.stack||t)}function R(t){return function(e){for(var n=t+" "+e+", please go to "+_+"#"+e+" to see details.",r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return 0===i.length?n:n+" Arguments: "+i.join(", ")}}var U=R("Log");function L(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];I(U.apply(void 0,[t].concat(n)))}var k=R("Warning");function F(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];z(k.apply(void 0,[t].concat(n)))}var B=R("Error");function D(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T(B.apply(void 0,[t].concat(n)))}var H,q,j,V,G,W,K,Q,Y=R("Assert");function X(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];O(!1,Y.apply(void 0,[e].concat(r)))}}function Z(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return B.apply(void 0,[t].concat(n))}function J(){return!!i.profiler&&i.profiler.isShowingStats()}function $(t){i.profiler&&(t?i.profiler.showStats():i.profiler.hideStats())}t("aN",H),function(t){t[t.NONE=0]="NONE",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.INFO_FOR_WEB_PAGE=5]="INFO_FOR_WEB_PAGE",t[t.WARN_FOR_WEB_PAGE=6]="WARN_FOR_WEB_PAGE",t[t.ERROR_FOR_WEB_PAGE=7]="ERROR_FOR_WEB_PAGE"}(H||t("aN",H={})),t("h",Object.freeze({__proto__:null,log:I,warn:z,error:T,assert:O,debug:S,_resetDebugSetting:P,_throw:C,logID:L,warnID:F,errorID:D,assertID:X,get DebugMode(){return H},getError:Z,isDisplayStats:J,setDisplayStats:$})),t("cl",q),function(t){t[t.PORTRAIT=1]="PORTRAIT",t[t.PORTRAIT_UPSIDE_DOWN=2]="PORTRAIT_UPSIDE_DOWN",t[t.LANDSCAPE_LEFT=4]="LANDSCAPE_LEFT",t[t.LANDSCAPE_RIGHT=8]="LANDSCAPE_RIGHT",t[t.LANDSCAPE=12]="LANDSCAPE",t[t.AUTO=13]="AUTO"}(q||t("cl",q={})),t("co",j),function(t){t.UNKNOWN="unknown",t.WECHAT="wechat",t.ANDROID="androidbrowser",t.IE="ie",t.EDGE="edge",t.QQ="qqbrowser",t.MOBILE_QQ="mqqbrowser",t.UC="ucbrowser",t.UCBS="ucbs",t.BROWSER_360="360browser",t.BAIDU_APP="baiduboxapp",t.BAIDU="baidubrowser",t.MAXTHON="maxthon",t.OPERA="opera",t.OUPENG="oupeng",t.MIUI="miuibrowser",t.FIREFOX="firefox",t.SAFARI="safari",t.CHROME="chrome",t.LIEBAO="liebao",t.QZONE="qzone",t.SOUGOU="sogou",t.HUAWEI="huawei"}(j||t("co",j={})),function(t){t.UNKNOWN="unknown",t.ENGLISH="en",t.CHINESE="zh",t.FRENCH="fr",t.ITALIAN="it",t.GERMAN="de",t.SPANISH="es",t.DUTCH="du",t.RUSSIAN="ru",t.KOREAN="ko",t.JAPANESE="ja",t.HUNGARIAN="hu",t.PORTUGUESE="pt",t.ARABIC="ar",t.NORWEGIAN="no",t.POLISH="pl",t.TURKISH="tr",t.UKRAINIAN="uk",t.ROMANIAN="ro",t.BULGARIAN="bg",t.HINDI="hi"}(V||(V={})),function(t){t[t.NONE=0]="NONE",t[t.LAN=1]="LAN",t[t.WWAN=2]="WWAN"}(G||(G={})),t("cb",W),function(t){t.UNKNOWN="Unknown",t.IOS="iOS",t.ANDROID="Android",t.WINDOWS="Windows",t.LINUX="Linux",t.OSX="OS X",t.OHOS="OHOS",t.OPENHARMONY="OpenHarmony"}(W||t("cb",W={})),t("bT",K),function(t){t.UNKNOWN="UNKNOWN",t.EDITOR_PAGE="EDITOR_PAGE",t.EDITOR_CORE="EDITOR_CORE",t.MOBILE_BROWSER="MOBILE_BROWSER",t.DESKTOP_BROWSER="DESKTOP_BROWSER",t.WIN32="WIN32",t.ANDROID="ANDROID",t.IOS="IOS",t.MACOS="MACOS",t.OHOS="OHOS",t.OPENHARMONY="OPENHARMONY",t.WECHAT_GAME="WECHAT_GAME",t.WECHAT_MINI_PROGRAM="WECHAT_MINI_PROGRAM",t.BAIDU_MINI_GAME="BAIDU_MINI_GAME",t.XIAOMI_QUICK_GAME="XIAOMI_QUICK_GAME",t.ALIPAY_MINI_GAME="ALIPAY_MINI_GAME",t.TAOBAO_CREATIVE_APP="TAOBAO_CREATIVE_APP",t.TAOBAO_MINI_GAME="TAOBAO_MINI_GAME",t.BYTEDANCE_MINI_GAME="BYTEDANCE_MINI_GAME",t.OPPO_MINI_GAME="OPPO_MINI_GAME",t.VIVO_MINI_GAME="VIVO_MINI_GAME",t.HUAWEI_QUICK_GAME="HUAWEI_QUICK_GAME",t.COCOSPLAY="COCOSPLAY",t.LINKSURE_MINI_GAME="LINKSURE_MINI_GAME",t.QTT_MINI_GAME="QTT_MINI_GAME"}(K||t("bT",K={})),t("ce",Q),function(t){t.WEBP="WEBP",t.IMAGE_BITMAP="IMAGE_BITMAP",t.WEB_VIEW="WEB_VIEW",t.VIDEO_PLAYER="VIDEO_PLAYER",t.SAFE_AREA="SAFE_AREA",t.HPE="HPE",t.INPUT_TOUCH="INPUT_TOUCH",t.EVENT_KEYBOARD="EVENT_KEYBOARD",t.EVENT_MOUSE="EVENT_MOUSE",t.EVENT_TOUCH="EVENT_TOUCH",t.EVENT_ACCELEROMETER="EVENT_ACCELEROMETER",t.EVENT_GAMEPAD="EVENT_GAMEPAD",t.EVENT_HANDLE="EVENT_HANDLE",t.EVENT_HMD="EVENT_HMD",t.EVENT_HANDHELD="EVENT_HANDHELD",t.WASM="WASM"}(Q||t("ce",Q={}));var tt,et,nt={Chinese:V.CHINESE,cn:V.CHINESE,zh_CN:V.CHINESE},rt=t("cd",{});tt=rt,et=my,Object.keys(et).forEach((function(t){"function"!=typeof et[t]?tt[t]=et[t]:tt[t]=et[t].bind(et)}));var it=rt.getSystemInfoSync();it.language=nt[it.language]||it.language,rt.getSystemInfoSync=function(){return it},rt.isDevTool=my.isIDE,Object.defineProperty(rt,"isLandscape",{get:function(){var t=rt.getSystemInfoSync();return"string"==typeof t.deviceOrientation?t.deviceOrientation.startsWith("landscape"):t.screenWidth>t.screenHeight}});var at,st=q.LANDSCAPE_RIGHT;Object.defineProperty(rt,"orientation",{get:function(){return rt.isLandscape?st:q.PORTRAIT}}),"string"==typeof(at=rt.getSystemInfoSync()).deviceOrientation&&at.deviceOrientation.startsWith("landscape")&&function(t,e){var n=/\d+\.\d+\.\d+/;if(!n.test(t)||!n.test(e))return console.warn("wrong format of version when compare version"),0;for(var r=t.split(".").map((function(t){return Number.parseInt(t)})),i=e.split(".").map((function(t){return Number.parseInt(t)})),a=0;a<3;++a){var s=r[a],o=i[a];if(s!==o)return s-o}return 0}(at.version,"10.15.10")<0&&console.warn("The current Taobao client version does not support Landscape, the minimum requirement is 10.15.10");var ot,mt,ut,ht,ct=(ot=my,mt={onPlay:!0,onPause:!0,onStop:!1,onSeek:!1},void 0===(ut=!0)&&(ut=!1),function(){var t=ot.createInnerAudioContext();if(mt.onPlay){var e=t.play,n=null;Object.defineProperty(t,"onPlay",{configurable:!0,value:function(t){n=t}}),Object.defineProperty(t,"play",{configurable:!0,value:function(){e.call(t),n&&(ut?setTimeout(n,0):n())}})}if(mt.onPause){var r=t.pause,i=null;Object.defineProperty(t,"onPause",{configurable:!0,value:function(t){i=t}}),Object.defineProperty(t,"pause",{configurable:!0,value:function(){r.call(t),i&&(ut?setTimeout(i,0):i())}})}if(mt.onStop){var a=t.stop,s=null;Object.defineProperty(t,"onStop",{configurable:!0,value:function(t){s=t}}),Object.defineProperty(t,"stop",{configurable:!0,value:function(){a.call(t),s&&(ut?setTimeout(s,0):s())}})}if(mt.onSeek){var o=t.seek,m=null;Object.defineProperty(t,"onSeeked",{configurable:!0,value:function(t){m=t}}),Object.defineProperty(t,"seek",{configurable:!0,value:function(e){o.call(t,e),m&&(ut?setTimeout(m,0):m())}})}return t});if(rt.createInnerAudioContext=function(){var t=ct();return t.onCanplay=t.onCanPlay.bind(t),delete t.onCanPlay,t},rt.loadFont=function(){return"Arial"},rt.onAccelerometerChange=function(t){rt.offAccelerometerChange(),ht=function(e){var n=e.x,r=e.y;if(rt.isLandscape){var i=st===q.LANDSCAPE_RIGHT?1:-1;n=-e.y*i,r=e.x*i}var a={x:n,y:r,z:e.z};t(a)}},rt.offAccelerometerChange=function(){ht&&(my.offAccelerometerChange(ht),ht=void 0)},rt.startAccelerometer=function(){ht?my.onAccelerometerChange(ht):console.error("minigame.onAccelerometerChange() should be invoked before minigame.startAccelerometer() on taobao platform")},rt.stopAccelerometer=function(){rt.offAccelerometerChange()},rt.getSafeArea=function(){var t=my.getWindowInfoSync();return void 0!==t.safeArea?t.safeArea:(console.warn("getSafeArea is not supported on this platform"),{top:0,left:0,bottom:t.windowHeight,right:t.windowWidth,width:t.windowWidth,height:t.windowHeight})},!my.isIDE){var lt=$global.screencanvas;if(lt){var ft=lt.getContext.bind(lt);lt.getContext=function(t,e){if("string"==typeof t&&"object"==typeof e&&t.startsWith("webgl")){Object.assign(e,{enable_flip_y_after_read_pixels:!1});var n=ft(t,e);return function(t){if(!yt&&(yt=!0,!my.isIDE&&(t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),"ios"===my.getSystemInfoSync().platform.toLocaleLowerCase()))){var e=t.getUniformLocation.bind(t);t.getUniformLocation=function(t,n){var r=e(t,n);if(!r||-1!==r.ID)return e(t,n)}}}(n),n}return ft(t,e)}}}var yt=!1;rt.loadSubpackage=my.loadSubPackage.bind(my);var dt=t("ch",function(){function t(t){this.i=0,this.array=t}var e=t.prototype;return e.remove=function(t){var e=this.array.indexOf(t);e>=0&&this.removeAt(e)},e.removeAt=function(t){this.array.splice(t,1),t<=this.i&&--this.i},e.fastRemove=function(t){var e=this.array.indexOf(t);e>=0&&this.fastRemoveAt(e)},e.fastRemoveAt=function(t){var e=this.array;e[t]=e[e.length-1],--e.length,t<=this.i&&--this.i},e.push=function(t){this.array.push(t)},m(t,[{key:"length",get:function(){return this.array.length},set:function(t){this.array.length=t,this.i>=t&&(this.i=t-1)}}]),t}());function vt(t,e){t.splice(e,1)}function pt(t,e){var n=t.length;e<0||e>=n||(t[e]=t[n-1],t.length=n-1)}function gt(t,e){var n=t.indexOf(e);return n>=0&&(vt(t,n),!0)}function _t(t,e){var n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],--t.length)}function xt(t,e){var n=t.findIndex(e);if(n>=0){var r=t[n];return vt(t,n),r}}function bt(t,e){return t.indexOf(e)>=0}var Mt,wt=Object.freeze({__proto__:null,removeAt:vt,fastRemoveAt:pt,remove:gt,fastRemove:_t,removeIf:xt,verifyType:function(t,e){if(t&&t.length>0)for(var n,r=p(t);!(n=r()).done;)if(!(n.value instanceof e))return L(1300),!1;return!0},removeArray:function(t,e){for(var n=0,r=e.length;n<r;n++)gt(t,e[n])},appendObjectsAt:function(t,e,n){return t.splice.apply(t,[n,0].concat(e)),t},contains:bt,copy:function(t){for(var e=t.length,n=new Array(e),r=0;r<e;r+=1)n[r]=t[r];return n},MutableForwardIterator:dt}),Et=function(){function t(){this._poolHandle=-1,Nt.addContainer(this)}return t.prototype.destroy=function(){Nt.removeContainer(this)},t}(),At=function(){function t(){this._pools=[],this._lastShrinkPassed=0,this.shrinkTimeSpan=5}var e=t.prototype;return e.addContainer=function(t){-1===t._poolHandle&&(t._poolHandle=this._pools.length,this._pools.push(t))},e.removeContainer=function(t){-1!==t._poolHandle&&(this._pools[this._pools.length-1]._poolHandle=t._poolHandle,pt(this._pools,t._poolHandle),t._poolHandle=-1)},e.tryShrink=function(){for(var t=0;t<this._pools.length;t++)this._pools[t].tryShrink()},e.update=function(t){this._lastShrinkPassed+=t,this._lastShrinkPassed>this.shrinkTimeSpan&&(this.tryShrink(),this._lastShrinkPassed-=this.shrinkTimeSpan)},t}(),Nt=t("cn",new At),It=t("P",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._ctor=void 0,i._elementsPerBatch=void 0,i._nextAvail=void 0,i._freePool=[],i._dtor=void 0,i._ctor=e,i._dtor=r||null,i._elementsPerBatch=Math.max(n,1),i._nextAvail=i._elementsPerBatch-1;for(var a=0;a<i._elementsPerBatch;++a)i._freePool.push(e());return i}h(e,t);var n=e.prototype;return n.alloc=function(){if(this._nextAvail<0){this._freePool.length=this._elementsPerBatch;for(var t=0;t<this._elementsPerBatch;t++)this._freePool[t]=this._ctor();this._nextAvail=this._elementsPerBatch-1}return this._freePool[this._nextAvail--]},n.free=function(t){this._freePool[++this._nextAvail]=t},n.freeArray=function(t){this._freePool.length=this._nextAvail+1,Array.prototype.push.apply(this._freePool,t),this._nextAvail+=t.length},n.tryShrink=function(){if(this._nextAvail>>1>this._elementsPerBatch){if(this._dtor)for(var t=this._nextAvail>>1;t<=this._nextAvail;t++)this._dtor(this._freePool[t]);this._freePool.length=this._nextAvail>>1,this._nextAvail=this._freePool.length-1}},n.destroy=function(){var e=arguments.length>0?arguments[0]:null;e&&F(14100);var n=e||this._dtor;if(n)for(var r=0;r<=this._nextAvail;r++)n(this._freePool[r]);this._freePool.length=0,this._nextAvail=-1,t.prototype.destroy.call(this)},e}(Et)),zt=(t("R",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._fn=void 0,i._dtor=null,i._count=0,i._data=void 0,i._initSize=0,i._fn=e,i._dtor=r||null,i._data=new Array(n),i._initSize=n;for(var a=0;a<n;++a)i._data[a]=e();return i}h(e,t);var n=e.prototype;return n.reset=function(){this._count=0},n.resize=function(t){if(t>this._data.length)for(var e=this._data.length;e<t;++e)this._data[e]=this._fn()},n.add=function(){return this._count>=this._data.length&&this.resize(this._data.length<<1),this._data[this._count++]},n.destroy=function(){if(this._dtor)for(var e=0;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=0,this._count=0,t.prototype.destroy.call(this)},n.tryShrink=function(){if(this._data.length>>2>this._count){var t=Math.max(this._initSize,this._data.length>>1);if(this._dtor)for(var e=t;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=t}},n.removeAt=function(t){if(!(t>=this._count)){var e=this._count-1,n=this._data[t];this._data[t]=this._data[e],this._data[e]=n,this._count-=1}},m(e,[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}]),e}(Et)),t("C",function(t){function e(e,n){var r;return(r=t.call(this)||this).array=void 0,r.length=0,r._compareFn=void 0,r._initSize=0,r.array=new Array(e),r._initSize=e,r.length=0,r._compareFn=n,r}h(e,t);var n=e.prototype;return n.push=function(t){this.array[this.length++]=t},n.pop=function(){return this.array[--this.length]},n.get=function(t){return this.array[t]},n.clear=function(){this.length=0},n.destroy=function(){this.length=0,this.array.length=0,t.prototype.destroy.call(this)},n.tryShrink=function(){this.array.length>>2>this.length&&(this.array.length=Math.max(this._initSize,this.array.length>>1))},n.sort=function(){this.array.length=this.length,this.array.sort(this._compareFn)},n.concat=function(t){for(var e=0;e<t.length;++e)this.array[this.length++]=t[e]},n.fastRemove=function(t){if(!(t>=this.length||t<0)){var e=--this.length;this.array[t]=this.array[e]}},n.indexOf=function(t){for(var e=0,n=this.length;e<n;++e)if(this.array[e]===t)return e;return-1},e}(Et)),t("bJ",function(){function t(t){this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=t?t+".":""}return t.prototype.getNewId=function(){return this.prefix+(++this.id).toString()},t}()));Mt=zt,zt.global=new Mt("global");var Tt=new zt("TmpCId."),Ot="undefined"==typeof Symbol?"__aliases__":Symbol("[[Aliases]]"),St="__cid__";function Pt(t){return"number"==typeof t||t instanceof Number}function Ct(t){return"string"==typeof t||t instanceof String}function Rt(t){for(var e in t)return!1;return!0}var Ut,Lt=t("bO",(Ut={value:void 0,enumerable:!1,writable:!1,configurable:!0},function(t,e,n,r,i){Ut.value=n,Ut.writable=r,Ut.enumerable=i,Object.defineProperty(t,e,Ut),Ut.value=void 0})),kt=t("cZ",function(){var t={get:void 0,set:void 0,enumerable:!1};return function(e,n,r,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1),"boolean"==typeof i&&(console.log("Set `setter` to boolean is deprecated. Please don not use like this again."),a=i,i=void 0),t.get=r,t.set=i,t.enumerable=a,t.configurable=s,Object.defineProperty(e,n,t),t.get=void 0,t.set=void 0}}()),Ft=t("cY",function(){var t={get:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.get=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.get=void 0}}()),Bt=function(){var t={set:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.set=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.set=void 0}}();function Dt(t){var e=Object.create(null);return t&&(e["."]=1,e["/"]=1,delete e["."],delete e["/"]),e}function Ht(t){if("function"==typeof t){var e=t.prototype;if(e&&e.hasOwnProperty("__classname__")&&e.__classname__)return e.__classname__;var n="";if(t.name&&(n=t.name),t.toString){var r,i=t.toString();(r="["===i.charAt(0)?/\[\w+\s*(\w+)\]/.exec(i):/function\s*(\w+)/.exec(i))&&2===r.length&&(n=r[1])}return"Object"!==n?n:""}return t&&t.constructor?Ht(t.constructor):""}function qt(t,e,n,r){var i=/([^.]+)$/,a=i.exec(e)[0],s=i.exec(n)[0];function o(){return this[s]}r?kt(t,a,o,(function(t){this[s]=t})):Ft(t,a,o)}function jt(t,e,n,r){for(var i in n)qt(t,e+"."+i,n[i],r)}var Vt=/(%d)|(%s)/,Gt=/%s/;function Wt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(0===arguments.length)return"";if(0===n.length)return""+t;var i="string"==typeof t&&Vt.test(t);if(i)for(var a,s=p(n);!(a=s()).done;){var o=a.value,m="number"==typeof o?Vt:Gt;if(m.test(t)){var u=""+o;t=t.replace(m,u)}else t+=" "+o}else for(var h,c=p(n);!(h=c()).done;){var l=h.value;t+=" "+l}return t}function Kt(){for(var t=arguments.length-1,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n+1];return e}function Qt(t,e){for(;t;){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}return null}function Yt(t,e,n){var r=Qt(e,t);r&&Object.defineProperty(n,t,r)}function Xt(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){D(5402,s);continue}for(var o in s)o in t||Yt(o,s,t)}}return t}function Zt(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){D(5403,s);continue}for(var o in s)Yt(o,s,t)}}return t}function Jt(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),t}function $t(t){var e=t.prototype,n=e&&Object.getPrototypeOf(e);return n&&n.constructor}function te(t,e){if(t&&e){if("function"!=typeof t)return!1;if("function"!=typeof e)return!1;if(t===e)return!0;for(;;){if(!(t=$t(t)))return!1;if(t===e)return!0}}return!1}function ee(t){for(var e=0,n=Object.keys(t);e<n.length;e++)delete t[n[e]]}function ne(t){return"string"!=typeof t||t.startsWith(Tt.prefix)}var re=Dt(!0),ie=Dt(!0);function ae(t,e,n){return function(r,i){if(i.prototype.hasOwnProperty(t)&&delete e[i.prototype[t]],Lt(i.prototype,t,r),r){var a=e[r];!n&&a&&a!==i?T("A Class already exists with the same "+t+' : "'+r+'".'):e[r]=i}}}var se=ae("__cid__",re,!1),oe=ae("__classname__",ie,!0);function me(t,e){if(oe(t,e),!e.prototype.hasOwnProperty(St)){var n=t||Tt.getNewId();n&&se(n,e)}}function ue(t,e){var n=ie[e],r=re[e],i=!0;if(n&&n!==t&&(T('"'+e+'" has already been set as name or alias of another class.'),i=!1),r&&r!==t&&(T('"'+e+'" has already been set as id or alias of another class.'),i=!1),i){var a=t[Ot];a||(a=[],t[Ot]=a),a.push(e),ie[e]=t,re[e]=t}}function he(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r],s=a.prototype,o=s.__cid__;o&&delete re[o];var m=s.__classname__;m&&delete ie[m];var u=s[Ot];if(u)for(var h=0;h<u.length;++h){var c=u[h];delete ie[c],delete re[c]}}}function ce(t){return le(t)}function le(t){return re[t]}function fe(t){return ie[t]}function ye(t,e){return de(t,e)}function de(t,e){var r;if(e=void 0===e||e,"function"==typeof t&&t.prototype.hasOwnProperty(St))return r=t.prototype.__cid__,!e&&n&&ne(r)?"":r;if(t&&t.constructor){var i=t.constructor.prototype;if(i&&i.hasOwnProperty(St))return r=t.__cid__,!e&&n&&ne(r)?"":r}return""}var ve=t("bN",function(){var t=e.prototype;function e(t,e){this.count=void 0,this._pool=void 0,this._cleanup=void 0;var n=void 0===e?t:e,r=void 0===e?null:t;this.count=0,this._pool=new Array(n),this._cleanup=r}return t.get=function(){return this._get()},t._get=function(){if(this.count>0){--this.count;var t=this._pool[this.count];return this._pool[this.count]=null,t}return null},t.put=function(t){var e=this._pool;if(this.count<e.length){if(this._cleanup&&!1===this._cleanup(t))return;e[this.count]=t,++this.count}},t.resize=function(t){t>=0&&(this._pool.length=t,this.count>t&&(this.count=t))},e}()),pe={IDGenerator:zt,Pool:ve,array:wt,isNumber:Pt,isString:Ct,isEmptyObject:Rt,getPropertyDescriptor:Qt,addon:Xt,mixin:Zt,extend:Jt,getSuper:$t,isChildClassOf:te,clear:ee,value:Lt,getset:kt,get:Ft,set:Bt,unregisterClass:he,getClassName:Ht,setClassName:me,setClassAlias:ue,getClassByName:fe,getClassById:le,get _registeredClassNames(){return u({},ie)},set _registeredClassNames(t){ee(ie),Object.assign(ie,t)},get _registeredClassIds(){return u({},re)},set _registeredClassIds(t){ee(re),Object.assign(re,t)},_getClassId:ye,getClassId:de,_setClassId:se,_getClassById:ce,obsolete:qt,obsoletes:jt,formatStr:Wt,shiftArguments:Kt,createMap:Dt};i.js=pe;var ge=Object.freeze({__proto__:null,array:wt,js:pe,IDGenerator:zt,Pool:ve,isNumber:Pt,isString:Ct,isEmptyObject:Rt,value:Lt,getset:kt,get:Ft,set:Bt,createMap:Dt,getClassName:Ht,obsolete:qt,obsoletes:jt,formatStr:Wt,shiftArguments:Kt,getPropertyDescriptor:Qt,copyAllProperties:function(t,e,n){for(var r=Object.getOwnPropertyNames(t),i=0,a=r.length;i<a;++i){var s=r[i];-1===n.indexOf(s)&&Yt(s,t,e)}},addon:Xt,mixin:Zt,extend:Jt,getSuper:$t,isChildClassOf:te,clear:ee,_idToClass:re,_nameToClass:ie,_setClassId:se,setClassName:me,setClassAlias:ue,unregisterClass:he,_getClassById:ce,getClassById:le,getClassByName:fe,_getClassId:ye,getClassId:de});function _e(t){if("__bitmask__"in t)return t;Lt(t,"__bitmask__",null,!0);for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Lt(t,s,i)}return t}function xe(t){return"__enums__"in t?t:(Lt(t,"__enums__",null,!0),xe.update(t))}function be(t){t.hasOwnProperty("__enums__")}function Me(t){be(t);var e=t.__enums__||[];for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),t.__enums__=e,e}t("ag",ge),_e.isBitMask=function(t){return t&&t.hasOwnProperty("__bitmask__")},_e.getList=function(t){return t.__bitmask__?t.__bitmask__:_e.update(t)},_e.update=function(t){Array.isArray(t.__bitmask__)||(t.__bitmask__=[]);var e=t.__bitmask__;for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),e},i.BitMask=_e,xe.update=function(t){for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Lt(t,s,i)}return Array.isArray(t.__enums__)&&Me(t),t},xe||t("ad",xe={}),xe.isEnum=function(t){return t&&t.hasOwnProperty("__enums__")},xe.getList=function(t){return be(t),t.__enums__?t.__enums__:Me(t)},xe.sortList=function(t,e){be(t),Array.isArray(t.__enums__)&&t.__enums__.sort(e)},i.Enum=xe;var we,Ee=t("af",function(){function t(){}var e=t.prototype;return e.clone=function(){return D(100,Ht(this)+".clone"),this},e.equals=function(){return!1},e.set=function(){D(100,Ht(this)+".set")},e.toString=function(){return""},t}());me("cc.ValueType",Ee),i.ValueType=Ee,function(t){t.PATH="path",t.ENGINE="engine",t.ASSETS="assets",t.SCRIPTING="scripting",t.PHYSICS="physics",t.RENDERING="rendering",t.LAUNCH="launch",t.SCREEN="screen",t.SPLASH_SCREEN="splashScreen",t.ANIMATION="animation",t.PROFILING="profiling",t.PLUGINS="plugins",t.XR="xr"}(we||(we={}));var Ae=t("b1",function(){function t(){this._settings={},this._override={}}var e=t.prototype;return e.init=function(t,e){var n=this;for(var r in void 0===t&&(t=""),void 0===e&&(e={}),e){var i=e[r];if(i)for(var a in i)this.overrideSettings(r,a,i[a])}return t?new Promise((function(e,r){if(t.startsWith("http")){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="text",i.onload=function(){n._settings=JSON.parse(i.response),e()},i.onerror=function(){r(new Error("request settings failed!"))},i.send(null)}else globalThis.fsUtils.readJson(t,(function(t,i){t?r(t):(n._settings=i,e())}))})):Promise.resolve()},e.overrideSettings=function(t,e,n){t in this._override||(this._override[t]={}),this._override[t][e]=n},e.querySettings=function(t,e){if(t in this._override){var n=this._override[t];if(n&&e in n)return n[e]}if(t in this._settings){var r=this._settings[t];if(r&&e in r)return r[e]}return null},t}());Ae.Category=we;var Ne=t("b2",new Ae);i.settings=Ne;var Ie=t("aQ",{SUPPORT_TEXTURE_FORMATS:[".astc",".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],KEY:{none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,ORIENTATION_PORTRAIT:q.PORTRAIT,ORIENTATION_PORTRAIT_UPSIDE_DOWN:q.PORTRAIT_UPSIDE_DOWN,ORIENTATION_LANDSCAPE:q.LANDSCAPE,ORIENTATION_LANDSCAPE_LEFT:q.LANDSCAPE_LEFT,ORIENTATION_LANDSCAPE_RIGHT:q.LANDSCAPE_RIGHT,ORIENTATION_AUTO:q.AUTO,ENABLE_TILEDMAP_CULLING:!0,TOUCH_TIMEOUT:5e3,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!0,ENABLE_FLOAT_OUTPUT:!1,CLEANUP_IMAGE_CACHE:!1,ENABLE_MULTI_TOUCH:!0,MAX_LABEL_CANVAS_POOL_SIZE:20,ENABLE_WEBGL_HIGHP_STRUCT_VALUES:!1,BATCHER2D_MEM_INCREMENT:144,CUSTOM_PIPELINE_NAME:"",init:function(){this.CLEANUP_IMAGE_CACHE=!0;var t=Ne.querySettings(Ae.Category.ENGINE,"macros");if(t)for(var e in t)Ie[e]=t[e]}});i.macro=Ie;for(var ze=t("bQ",/^(?:cc|dragonBones|sp|ccsg)\..+/),Te=new Array(123),Oe=0;Oe<123;++Oe)Te[Oe]=64;for(var Se=0;Se<64;++Se)Te["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(Se)]=Se;var Pe=t("cq",Te);function Ce(t,e,n){function r(t,e,n,r){var i=Object.getOwnPropertyDescriptor(t,e);if(i)i.get&&(t[n]=i.get),i.set&&r&&(t[r]=i.set);else{var a=t[n];kt(t,e,a,t[r])}}for(var i,a=t.prototype,s=0;s<e.length;s++){var o=(i=e[s])[0].toUpperCase()+i.slice(1);r(a,i,"get"+o,"set"+o)}for(i in n){var m=n[i];r(a,i,m[0],m[1])}}function Re(t,e,n,r){var i=t[e];i?Array.isArray(i)?r?(i.push(i[0]),i[0]=n):i.push(n):t[e]=r?[n,i]:[i,n]:t[e]=n}function Ue(t,e){if("function"==typeof t.contains)return t.contains(e);if("function"==typeof t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));var n=e.parentNode;if(n)do{if(n===t)return!0;n=n.parentNode}while(null!==n);return!1}function Le(t){return"object"==typeof window&&"function"==typeof Node?t instanceof Node:!!t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function ke(t,e,n){t&&function(t,e){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var s=performance.now(),o=requestAnimationFrame||window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(void 0===o||null!==(n=globalThis.__globalXR)&&void 0!==n&&n.isWebXR)return setTimeout.apply(void 0,[t,e].concat(i));var m=function n(){performance.now()-s<e?o(n):t.apply(void 0,i)};o(m)}((function(){t(e,n)}),0)}function Fe(t){return!(!t||t.constructor!==Object)&&Rt(t)}function Be(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t<n?t:n}function De(t){return t*Ie.RAD}function He(t){return t*Ie.DEG}i.misc={BUILTIN_CLASSID_RE:ze,BASE64_VALUES:Pe,propertyDefine:Ce,pushToMap:Re,contains:Ue,isDomNode:Le,callInNextTick:ke,isPlainEmptyObj_DEV:Fe,clampf:Be,degreesToRadians:De,radiansToDegrees:He},t("ah",Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:ze,BASE64_VALUES:Pe,propertyDefine:Ce,pushToMap:Re,contains:Ue,isDomNode:Le,callInNextTick:ke,tryCatchFunctor_EDITOR:function(t){return Function("target","try {\n  target."+t+"();\n}\ncatch (e) {\n  cc._throw(e);\n}")},isPlainEmptyObj_DEV:Fe,clampf:Be,degreesToRadians:De,radiansToDegrees:He}));var qe="$_$";function je(t,e){var n=e?Object.create(e):{};return Lt(t,"__attrs__",n),n}function Ve(t){if("function"!=typeof t)return je(t,We(t.constructor));for(var e,n=i.Class.getInheritanceChain(t),r=n.length-1;r>=0;r--){var a=n[r];a.hasOwnProperty("__attrs__")&&a.__attrs__||je(a,(e=n[r+1])&&e.__attrs__)}return je(t,(e=n[0])&&e.__attrs__),t.__attrs__}function Ge(t,e){var n=We(t),r=e+qe,i={};for(var a in n)a.startsWith(r)&&(i[a.slice(r.length)]=n[a]);return i}function We(t){return t.hasOwnProperty("__attrs__")&&t.__attrs__||Ve(t)}function Ke(t,e,n,r){We(t)[e+qe+n]=r}var Qe=function(){function t(t,e){this.name=void 0,this.default=void 0,this.name=t,this.default=e}return t.prototype.toString=function(){return this.name},t}(),Ye=t("aw",new Qe("Integer",0));i.Integer=Ye,i.CCInteger=Ye;var Xe=t("ax",new Qe("Float",0));i.Float=Xe,i.CCFloat=Xe;var Ze=t("ay",new Qe("Boolean",!1));i.Boolean=Ze,i.CCBoolean=Ze;var Je=t("az",new Qe("String",""));function $e(t,e){return function(n,r){var i='"'+Ht(n)+"."+r+'"',a=Ge(n,r),s=a.type;if(s===Ye||s===Xe?s="Number":s!==Je&&s!==Ze||(s=""+s),s===t){if(a.hasOwnProperty("default")){var o=a.default;if(void 0!==o&&!Array.isArray(o)&&!Fe(o)){var m=typeof o,u=t.toLowerCase();if(m===u)if("object"===u){if(!o||o instanceof a.ctor)return;F(3605,i,Ht(a.ctor))}else"Number"!==t&&F(3606,e,i,t);else{if("function"===m)return;t===Je.default&&null==o?F(3607,i):F(3611,e,i,m)}delete a.type}}}else F(3604,i)}}i.String=Je,i.CCString=Je;var tn=Object.freeze({__proto__:null,DELIMETER:qe,createAttrsSingle:je,createAttrs:Ve,attr:Ge,getClassAttrs:We,setClassAttr:Ke,PrimitiveType:Qe,CCInteger:Ye,CCFloat:Xe,CCBoolean:Ze,CCString:Je,getTypeChecker_ET:$e,getObjTypeChecker_ET:function(t){return function(e,n){$e("Object","type")(e,n);var r=We(e)[n+qe+"default"],a=i.Class.getDefault(r);if(!Array.isArray(a)&&te(t,i.ValueType)){var s=Ht(t),o=Wt('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',Ht(e),n,s);r?I(o):F(3612,o,s,Ht(e),n,s)}}}}),en={default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function nn(t,e,n,r){if(!t.get&&!t.set&&t.hasOwnProperty("default")){var i="_N$"+e;t.get=function(){return this[i]},t.set=function(t){var e=this[i];this[i]=t,n.call(this,e)};var a={};for(var s in r[i]=a,en){var o=en[s];t.hasOwnProperty(s)&&(a[s]=t[s],o.canUsedInGet||delete t[s])}}}function rn(t,e,n,r){if(Array.isArray(e)){if(!(e.length>0))return D(5508,n,r);t.type=e=e[0]}"function"==typeof e&&(e===String?t.type=i.String:e===Boolean?t.type=i.Boolean:e===Number&&(t.type=i.Float))}function an(t,e,n){var r=t||void 0===e?{_short:!0}:{_short:!0,default:e};return n&&(r.type=n),r}function sn(t,e){if(!t||t.constructor!==Object){if(Array.isArray(t)&&t.length>0)return an(e,[],t);if("function"==typeof t){var n=t;return an(e,te(n,i.ValueType)?new n:null,n)}return t instanceof Qe?an(e,void 0,t):an(e,t)}return null}var on,mn=[];function un(){return mn[mn.length-1]}function hn(t,e,n){t[e+"$_$type"]="Enum",t[e+"$_$enumList"]=xe.getList(n)}i._RF={push:function(t,e,n,r){void 0===n&&(n=e,e=""),mn.push({uuid:e,script:n,module:t,exports:t.exports,beh:null,importMeta:r})},pop:function(){var t=mn.pop(),e=t.module,n=e.exports;if(n===t.exports){for(var r in n)return;e.exports=n=t.cls}},peek:un},t("cD",on),function(t){t[t.STANDALONE=1]="STANDALONE",t[t.IMPLICIT_VISIBLE=2]="IMPLICIT_VISIBLE",t[t.IMPLICIT_SERIALIZABLE=4]="IMPLICIT_SERIALIZABLE"}(on||t("cD",on={}));var cn=qe,ln="__ctors__",fn=(t("bo","Enum"),t("bp","BitMask"));function yn(t,e,n,r){!function(t,e){!function(t,e){t.indexOf(e)<0&&t.push(e)}(t.__props__,e)}(t,n),xn(t,r,e,n)}function dn(t,e,n,r){var i=r.get;r.set,i&&(xn(t,r,e,n),Ke(t,n,"serializable",!1))}function vn(t){return"function"==typeof t?t():t}function pn(t){var e=t.name,n=t.extends,r=function(t,e,n){var r=i.Component,a=un();if(a&&te(e,r)){if(te(a.cls,r))return D(3615),null;t=t||a.script}var s=function(t,e,n){var r=n.ctor;return Lt(r,ln,!0,!0),r.prototype,e&&(r.$super=e),me(t,r),r}(t,e,n);if(a)if(te(e,r)){var o=a.uuid;o&&se(o,s),a.cls=s}else te(a.cls,r)||(a.cls=s);return s}(e,n,t);e||(e=i.js.getClassName(r)),r._sealed=!0,n&&(n._sealed=!1),function(t,e,n,r){if(t.__props__=[],r&&r.__props__&&(t.__props__=r.__props__.slice()),n)for(var i in function(t,e){for(var n in t){var r=t[n],i=sn(r,!1);if(i&&(r=t[n]=i),r){var a=r.notify;a&&nn(r,n,a,t),"type"in r&&rn(r,r.type,e,n)}}}(n,e),n){var a=n[i];a.get||a.set?dn(t,e,i,a):yn(t,e,i,a)}var s=We(t);t.__values__=t.__props__.filter((function(t){return!1!==s[t+"$_$serializable"]}))}(r,e,t.properties,n);var a=t.editor;return a&&te(n,i.Component)&&i.Component._registerEditorProps(r,a),r}function gn(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,"__values__")}pn._isCCClass=function(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,ln)},pn.fastDefine=function(t,e,n){me(t,e);for(var r=e.__props__=e.__values__=Object.keys(n),i=We(e),a=0;a<r.length;a++){var s=r[a];i[s+cn+"visible"]=!1,i[s+cn+"default"]=n[s]}},pn.Attr=tn,pn.attr=Ge,pn.isCCClassOrFastDefined=gn,pn.getInheritanceChain=function(t){for(var e=[];t=$t(t);)t!==Object&&e.push(t);return e};var _n={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function xn(t,e,n,r){var i=null,a="";function s(){return a=r+cn,i=We(t)}"type"in e&&void 0===e.type&&F(3660,r,n);var o=e.type;o&&(_n[o]?(i||s())[a+"type"]=o:"Object"===o||("object"==typeof o?xe.isEnum(o)?hn(i||s(),r,o):_e.isBitMask(o)&&((i||s())[a+"type"]=fn,i[a+"bitmaskList"]=_e.getList(o)):"function"==typeof o&&((i||s())[a+"type"]="Object",i[a+"ctor"]=o))),"default"in e&&((i||s())[a+"default"]=e.default);var m,u=function(t,n){if(t in e){var r=e[t];typeof r===n&&((i||s())[a+t]=r)}};e.editorOnly&&((i||s())[a+"editorOnly"]=!0),e.__internalFlags&on.STANDALONE?m=!0===e.serializable||0!=(e.__internalFlags&on.IMPLICIT_SERIALIZABLE):!1===e.serializable&&(m=!1),void 0!==m&&((i||s())[a+"serializable"]=m),u("formerlySerializedAs","string");var h=e.range;h&&Array.isArray(h)&&h.length>=2&&((i||s())[a+"min"]=h[0],i[a+"max"]=h[1],h.length>2&&(i[a+"step"]=h[2])),u("min","number"),u("max","number"),u("step","number")}pn.isArray=function(t){return t=vn(t),Array.isArray(t)},pn.getDefault=vn,pn.escapeForJS=function(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},pn.IDENTIFIER_RE=/^[A-Za-z_$][0-9A-Za-z_$]*$/,pn.getNewValueTypeCode=!1,i.Class=pn;var bn=t("aB","__editorExtras__"),Mn=[],wn=t("av",function(){function t(t){void 0===t&&(t=""),this._objFlags=void 0,this._name=void 0,this._name=t,this._objFlags=0}t._deferredDestroy=function(){for(var t=Mn.length,e=0;e<t;++e){var n=Mn[e];1&n._objFlags||n._destroyImmediate()}t===Mn.length?Mn.length=0:Mn.splice(0,t)};var e=t.prototype;return e.destroy=function(){return 1&this._objFlags?(F(5e3),!1):!(4&this._objFlags||(this._objFlags|=4,Mn.push(this),0))},e._destruct=function(){var t,e=this.constructor;Object.prototype.hasOwnProperty.call(e,"__destruct__")?t=e.__destruct__:(t=function(t,e){var n,r=t instanceof i.Node||t instanceof i.Component,a=r?"_id":null,s={};for(n in t)if(t.hasOwnProperty(n)){if(n===a)continue;switch(typeof t[n]){case"string":s[n]="";break;case"object":case"function":s[n]=null}}if(pn._isCCClass(e))for(var o=i.Class.Attr.getClassAttrs(e),m=e.__props__,u=0;u<m.length;u++){var h=""+(n=m[u]);if(h in o){if(r&&"_id"===n)continue;switch(typeof o[h]){case"string":s[n]="";break;case"object":case"function":s[n]=null;break;case"undefined":s[n]=void 0}}}return function(t){for(var e in s)t[e]=s[e]}}(this,e),Lt(e,"__destruct__",t,!0)),t(this)},e._destroyImmediate=function(){var t;1&this._objFlags?D(5e3):(null===(t=this._onPreDestroy)||void 0===t||t.call(this),this._destruct(),this._objFlags|=1)},m(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"hideFlags",get:function(){return this._objFlags&t.Flags.AllHideMasks},set:function(e){var n=e&t.Flags.AllHideMasks;this._objFlags=this._objFlags&~t.Flags.AllHideMasks|n}},{key:"isValid",get:function(){return!(1&this._objFlags)}}]),t}());function En(t){return t instanceof wn}function An(t,e){return"object"==typeof t?!(!t||t._objFlags&(e?5:1)):void 0!==t}wn.prototype._deserialize=null,pn.fastDefine("cc.Object",wn,{_name:"",_objFlags:0}),Lt(wn,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,AllHideMasks:1560,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),i.isValid=An,i.Object=wn;var Nn=pt;function In(){}var zn=function(){function t(){this.callback=In,this.target=void 0,this.once=!1}var e=t.prototype;return e.set=function(t,e,n){this.callback=t||In,this.target=e,this.once=!!n},e.reset=function(){this.target=void 0,this.callback=In,this.once=!1},e.check=function(){return!(En(this.target)&&!An(this.target,!0))},t}(),Tn=new It((function(){return new zn}),32),On=function(){function t(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}var e=t.prototype;return e.removeByCallback=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.callback===t&&(n.reset(),Tn.free(n),Nn(this.callbackInfos,e),--e)}},e.removeByTarget=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.target===t&&(n.reset(),Tn.free(n),Nn(this.callbackInfos,e),--e)}},e.cancel=function(t){var e=this.callbackInfos[t];e&&(e.reset(),this.isInvoking?this.callbackInfos[t]=null:Nn(this.callbackInfos,t),Tn.free(e)),this.containCanceled=!0},e.cancelAll=function(){for(var t=0;t<this.callbackInfos.length;t++){var e=this.callbackInfos[t];e&&(e.reset(),Tn.free(e),this.callbackInfos[t]=null)}this.containCanceled=!0},e.purgeCanceled=function(){for(var t=this.callbackInfos.length-1;t>=0;--t)this.callbackInfos[t]||Nn(this.callbackInfos,t);this.containCanceled=!1},e.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1},t}(),Sn=new It((function(){return new On}),16),Pn=t("bt",function(){function t(){this._callbackTable=Dt(!0),this._offCallback=void 0}var e=t.prototype;return e.on=function(t,e,n,r){if(!this.hasEventListener(t,e,n)){var i=this._callbackTable[t];i||(i=this._callbackTable[t]=Sn.alloc());var a=Tn.alloc();a.set(e,n,r),i.callbackInfos.push(a)}return e},e.hasEventListener=function(t,e,n){var r=this._callbackTable&&this._callbackTable[t];if(!r)return!1;var i=r.callbackInfos;if(!e){if(r.isInvoking){for(var a=0;a<i.length;++a)if(i[a])return!0;return!1}return i.length>0}for(var s=0;s<i.length;++s){var o=i[s];if(o&&o.check()&&o.callback===e&&o.target===n)return!0}return!1},e.removeAll=function(t){var e=typeof t;if("string"===e||"number"===e){var n=this._callbackTable&&this._callbackTable[t];n&&(n.isInvoking?n.cancelAll():(n.clear(),Sn.free(n),delete this._callbackTable[t]))}else if(t)for(var r in this._callbackTable){var i=this._callbackTable[r];if(i.isInvoking)for(var a=i.callbackInfos,s=0;s<a.length;++s){var o=a[s];o&&o.target===t&&i.cancel(s)}else i.removeByTarget(t)}},e.off=function(t,e,n){var r,i=this._callbackTable&&this._callbackTable[t];if(i){var a=i.callbackInfos;if(e)for(var s=0;s<a.length;++s){var o=a[s];if(o&&o.callback===e&&o.target===n){i.cancel(s);break}}else this.removeAll(t)}null===(r=this._offCallback)||void 0===r||r.call(this)},e.emit=function(t,e,n,r,i,a){var s=this._callbackTable&&this._callbackTable[t];if(s){var o=!s.isInvoking;s.isInvoking=!0;for(var m=s.callbackInfos,u=0,h=m.length;u<h;++u){var c=m[u];if(c){var l=c.callback,f=c.target;c.once&&this.off(t,l,f),c.check()?f?l.call(f,e,n,r,i,a):l(e,n,r,i,a):this.off(t,l,f)}}o&&(s.isInvoking=!1,s.containCanceled&&s.purgeCanceled())}},e.clear=function(){for(var t in this._callbackTable){var e=this._callbackTable[t];e&&(e.clear(),Sn.free(e),delete this._callbackTable[t])}},e._registerOffCallback=function(t){this._offCallback=t},t}());function Cn(t){for(var e=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._callbackTable=Dt(!0),e}h(e,t);var n=e.prototype;return n.once=function(t,e,n){return this.on(t,e,n,!0)},n.targetOff=function(t){this.removeAll(t)},e}(t),n=Pn.prototype,r=Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n)),i=0;i<r.length;++i){var a=r[i];if(!(a in e.prototype)){var s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e.prototype,a,s)}}return e}var Rn,Un=t("aG",Cn((function(){})));i.EventTarget=Un,t("aI",function(){function t(){this._delegates=[]}var e=t.prototype;return e.add=function(t){this._delegates.includes(t)||this._delegates.push(t)},e.hasListener=function(t){return this._delegates.includes(t)},e.remove=function(t){_t(this._delegates,t)},e.dispatch=function(){for(var t=arguments,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Promise.all(this._delegates.map((function(e){return e.apply(void 0,t)})).filter(Boolean))},t}()),Rn=K.TAOBAO_MINI_GAME;var Ln=function(t){function e(){var e,n;(n=t.call(this)||this).networkType=void 0,n.isNative=void 0,n.isBrowser=void 0,n.isMobile=void 0,n.isLittleEndian=void 0,n.platform=void 0,n.language=void 0,n.nativeLanguage=void 0,n.os=void 0,n.osVersion=void 0,n.osMainVersion=void 0,n.browserType=void 0,n.browserVersion=void 0,n.isXR=void 0,n._featureMap=void 0,n._initPromise=void 0;var r,i=rt.getSystemInfoSync();n.networkType=G.LAN,n.isNative=!1,n.isBrowser=!1,n.isLittleEndian=(r=new ArrayBuffer(2),new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0]),n.nativeLanguage=i.language,n.language=i.language.substr(0,2);var a=i.platform.toLocaleLowerCase();n.os="android"===a?W.ANDROID:"ios"===a?W.IOS:"windows"===a?W.WINDOWS:W.UNKNOWN;var s=i.system.toLowerCase();"android p"===s&&(s="android p 9.0");var o=/[\d.]+/.exec(s);n.osVersion=o?o[0]:s,n.osMainVersion=parseInt(n.osVersion),n.platform=Rn,n.isMobile=n.os!==W.WINDOWS,n.browserType=j.UNKNOWN,n.browserVersion="",n.isXR=!1;return n._featureMap=((e={})[Q.WEBP]=!1,e[Q.IMAGE_BITMAP]=!1,e[Q.WEB_VIEW]=!1,e[Q.VIDEO_PLAYER]=!1,e[Q.SAFE_AREA]=!1,e[Q.HPE]=!1,e[Q.INPUT_TOUCH]=!0,e[Q.EVENT_KEYBOARD]=false,e[Q.EVENT_MOUSE]=false,e[Q.EVENT_TOUCH]=!0,e[Q.EVENT_ACCELEROMETER]=!0,e[Q.EVENT_GAMEPAD]=!1,e[Q.EVENT_HANDLE]=n.isXR,e[Q.EVENT_HMD]=n.isXR,e[Q.EVENT_HANDHELD]=!1,e[Q.WASM]=!1,e),n._initPromise=[],n._initPromise.push(n._supportsWebpPromise()),n._registerEvent(),n}h(e,t);var n=e.prototype;return n._supportsWebpPromise=function(){var t=this;return this._supportsWebp().then((function(e){t._setFeature(Q.WEBP,e)}))},n._supportsWebp=function(){return new Promise((function(t){try{var e=document.createElement("img"),n=setTimeout((function(){t(!1)}),500);e.onload=function(){clearTimeout(n);var r=e.width>0&&e.height>0;t(r)},e.onerror=function(){clearTimeout(n),t(!1)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}catch(e){t(!1)}}))},n._registerEvent=function(){var t=this;rt.onHide((function(){t.emit("hide")})),rt.onShow((function(){t.emit("show")}))},n._setFeature=function(t,e){return this._featureMap[t]=e},n.init=function(){return Promise.all(this._initPromise)},n.hasFeature=function(t){return this._featureMap[t]},n.getBatteryLevel=function(){return rt.getBatteryInfoSync().level/100},n.triggerGC=function(){var t;null===(t=rt.triggerGC)||void 0===t||t.call(rt)},n.openURL=function(){},n.now=function(){return Date.now?Date.now():+new Date},n.restartJSVM=function(){},n.exit=function(){var t;null===(t=rt.exitMiniProgram)||void 0===t||t.call(rt)},n.close=function(){this.exit()},e}(Un),kn=t("ca",new Ln),Fn=t("cS",2147483647);function Bn(t){return(t>0)-(t<0)}function Dn(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Hn(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function qn(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}function jn(t){return--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}var Vn=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(Vn);var Gn=Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:Fn,INT_MIN:-2147483648,sign:Bn,abs:function(t){var e=t>>31;return(t^e)-e},min:function(t,e){return e^(t^e)&-(t<e)},max:function(t,e){return t^(t^e)&-(t<e)},isPow2:function(t){return!(t&t-1||!t)},log2:Dn,log10:function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},popCount:Hn,countTrailingZeros:qn,nextPow2:jn,prevPow2:function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},parity:function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1},reverse:function(t){return Vn[255&t]<<24|Vn[t>>>8&255]<<16|Vn[t>>>16&255]<<8|Vn[t>>>24&255]},interleave2:function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},deinterleave2:function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},interleave3:function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},deinterleave3:function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},nextCombination:function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>qn(t)+1}});t("n",Gn);var Wn,Kn,Qn,Yn,Xn,Zn=10;t("aj",Wn),t("ak",Kn),t("al",Qn);var Jn=0,$n=new Map;Yn=function(t,e,n,r,i,a,s){var o=$n.get(a);o&&o.logTimes>o.count&&(i("'%s' is deprecated, please use '%s' instead. "+s,t+"."+e,n+"."+r),o.count++)},t("aj",Wn=function(t,e,n){null!=t&&n.forEach((function(n){var r=Jn++;$n.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:Zn});var i=null!=n.target?n.target:t,a=null!=n.newName?n.newName:n.name,s=null!=n.targetName?n.targetName:e,o=i===t,m=n.suggest?"("+n.suggest+")":"";if(null!=n.customFunction)t[n.name]=function(){var t;return Yn(e,n.name,s,a,z,r,m),(t=n.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=n.customSetter||null!=n.customGetter){var u=null!=n.customSetter,h=null!=n.customGetter;u&&h?Object.defineProperty(t,n.name,{get:function(){return Yn(e,n.name,s,a,z,r,m),n.customGetter.call(this)},set:function(t){Yn(e,n.name,s,a,z,r,m),n.customSetter.call(this,t)},enumerable:!1}):u?Object.defineProperty(t,n.name,{set:function(t){Yn(e,n.name,s,a,z,r,m),n.customSetter.call(this,t)},enumerable:!1}):h&&Object.defineProperty(t,n.name,{get:function(){return Yn(e,n.name,s,a,z,r,m),n.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(t,n.name,{get:function(){return Yn(e,n.name,s,a,z,r,m),o?this[a]:i[a]},set:function(t){Yn(e,n.name,s,a,z,r,m),o?this[a]=t:i[a]=t},enumerable:!1})}))}),Xn=function(t,e,n,r,i){var a=$n.get(r);a&&a.logTimes>a.count&&(n("'%s' has been removed. "+i,t+"."+e),a.count++)},t("ak",Kn=function(t,e,n){null!=t&&n.forEach((function(n){var r=Jn++;$n.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:Zn});var i=n.suggest?"("+n.suggest+")":"";Object.defineProperty(t,n.name,{get:function(){return Xn(e,n.name,T,r,i)},set:function(){Xn(e,n.name,T,r,i)},enumerable:!1})}))}),t("al",Qn=function(){});var tr,er={};function nr(t){for(var e in t){var n=t[e];er[e]=n}}function rr(t){var e=er[t];if(e){var n=e.newName,r=e.since;e.removed?n?D(16003,t,r,n):D(16002,t,r):n?F(16001,t,r,n):F(16e3,t,r)}}var ir=Math.PI/180,ar=180/Math.PI,sr=Math.random,or=t("H",.5*Math.PI),mr=t("T",2*Math.PI),ur=t("F",1e-6);function hr(t,e){return Math.abs(t-e)<=ur*Math.max(1,Math.abs(t),Math.abs(e))}function cr(t,e,n){return n=n||ur,Math.abs(t-e)<=n}function lr(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}function fr(t){return t<0?0:t>1?1:t}function yr(t,e,n){return t+(e-t)*n}function dr(t){return t*ir}function vr(t){return t*ar}function pr(){return sr()}function gr(t){sr=t}function _r(t,e){return pr()*(e-t)+t}function xr(t,e){return Math.floor(_r(t,e))}function br(t){return(t=(9301*t+49297)%233280)/233280}function Mr(t,e,n){return br(t)*(n-e)+e}function wr(t,e,n){return Math.floor(Mr(t,e,n))}function Er(t){return jn(t)}function Ar(t,e){return t-Math.floor(t/e)*e}function Nr(t,e){return t=Ar(t,2*e),e-Math.abs(t-e)}function Ir(t,e,n){return(n-t)/(e-t)}function zr(t){return Math.abs(t.x)>Math.abs(t.y)?Math.abs(t.x)>Math.abs(t.z)?t.x:t.z:Math.abs(t.y)>Math.abs(t.z)?t.y:t.z}function Tr(t,e){return Math.abs(t)>Math.abs(e)?t:e}function Or(t,e){e.forEach((function(e){Object.defineProperty(t,e,{enumerable:!0})}))}var Sr,Pr,Cr,Rr=(Sr=new Float32Array(1),Pr=new Int32Array(Sr.buffer),function(t){Sr[0]=t;var e=Pr[0],n=e>>16&32768,r=2147483647&e,i=r-(112<<23)+4096>>13;return i=r<113<<23?0:i,i=r>=143<<23?31744:i,i=r>255<<23?32256:i,Pr[0]=n|i,Pr[0]}),Ur=function(){var t=new Float32Array(1),e=new Int32Array(t.buffer);return function(n){var r,i=32767&n,a=i<<13;return 31744!==a?(a+=112<<23,0===i?a=(1048575&a)>>1:32767===i&&(a=2147483647)):a=2139095040,r=(n>>15&1)<<31|a,e[0]=r,t[0]}}();function Lr(t){return Rr(t)}function kr(t){return Ur(t)}var Fr,Br=t("q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=i||0),a}h(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.fromColor=function(t,e){return t.x=e.r,t.y=e.g,t.z=e.b,t.w=e.a,t},e.angle=function(t,e){var n=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x,a=t.x*e.x+t.y*e.y+t.z*e.z;return Math.atan2(Math.sqrt(n*n+r*r+i*i),a)},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t.w=e.w*n.w,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t.w=e.w/n.w,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t.w=Math.ceil(e.w),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t.w=Math.floor(e.w),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t.w=Math.min(e.w,n.w),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t.w=Math.max(e.w,n.w),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t.w=Math.round(e.w),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return Math.sqrt(n*n+r*r+i*i+a*a)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return n*n+r*r+i*i+a*a},e.len=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return Math.sqrt(e*e+n*n+r*r+i*i)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t.w=1/e.w,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w;return Math.abs(n)<ur?t.x=0:t.x=1/n,Math.abs(r)<ur?t.y=0:t.y=1/r,Math.abs(i)<ur?t.z=0:t.z=1/i,Math.abs(a)<ur?t.w=0:t.w=1/a,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n*n+r*r+i*i+a*a;return s>0?(s=1/Math.sqrt(s),t.x=n*s,t.y=r*s,t.z=i*s,t.w=a*s):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.scale=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.random=function(t,e){e=e||1;var n=2*pr()*Math.PI,r=2*pr()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t.w=0,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=n.m03*r+n.m07*i+n.m11*a+n.m15*s,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=e.w,t},e.transformQuat=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z,u=n.w,h=u*r+o*a-m*i,c=u*i+m*r-s*a,l=u*a+s*i-o*r,f=-s*r-o*i-m*a;return t.x=h*u+f*-s+c*-m-l*-o,t.y=c*u+f*-o+l*-s-h*-m,t.z=l*u+f*-m+h*-o-c*-s,t.w=e.w,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=ur),!(Math.abs(t.x)===1/0||Math.abs(t.y)===1/0||Math.abs(t.z)===1/0||Math.abs(t.w)===1/0||Math.abs(e.x)===1/0||Math.abs(e.y)===1/0||Math.abs(e.z)===1/0||Math.abs(e.w)===1/0)&&Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},n.equals=function(t,e){return void 0===e&&(e=ur),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.equals4f=function(t,e,n,r,i){return void 0===i&&(i=ur),Math.abs(this.x-t)<=i*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=i*Math.max(1,Math.abs(this.y),Math.abs(e))&&Math.abs(this.z-n)<=i*Math.max(1,Math.abs(this.z),Math.abs(n))&&Math.abs(this.w-r)<=i*Math.max(1,Math.abs(this.w),Math.abs(r))},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.strictEquals4f=function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.z,a=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=a+e*(t.w-a),this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},n.clampf=function(t,e){return this.x=lr(this.x,t.x,e.x),this.y=lr(this.y,t.y,e.y),this.z=lr(this.z,t.z,e.z),this.w=lr(this.w,t.w,e.w),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},n.add4f=function(t,e,n,r){return this.x+=t,this.y+=e,this.z+=n,this.w+=r,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},n.subtract4f=function(t,e,n,r){return this.x-=t,this.y-=e,this.z-=n,this.w-=r,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},n.multiply4f=function(t,e,n,r){return this.x*=t,this.y*=e,this.z*=n,this.w*=r,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},n.divide4f=function(t,e,n,r){return this.x/=t,this.y/=e,this.z/=n,this.w/=r,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},n.lengthSqr=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},n.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=this.w;return this.x=t.m00*e+t.m04*n+t.m08*r+t.m12*i,this.y=t.m01*e+t.m05*n+t.m09*r+t.m13*i,this.z=t.m02*e+t.m06*n+t.m10*r+t.m14*i,this.w=t.m03*e+t.m07*n+t.m11*r+t.m15*i,this},e}(Ee));function Dr(t,e,n,r){return new Br(t,e,n,r)}Cr=Br,Br.ZERO=Object.freeze(new Cr(0,0,0,0)),Br.ONE=Object.freeze(new Cr(1,1,1,1)),Br.NEG_ONE=Object.freeze(new Cr(-1,-1,-1,-1)),Br.UNIT_X=Object.freeze(new Cr(1,0,0,0)),Br.UNIT_Y=Object.freeze(new Cr(0,1,0,0)),Br.UNIT_Z=Object.freeze(new Cr(0,0,1,0)),Br.UNIT_W=Object.freeze(new Cr(0,0,0,1)),pn.fastDefine("cc.Vec4",Br,{x:0,y:0,z:0,w:0}),i.Vec4=Br,i.v4=Dr;var Hr,qr,jr,Vr,Gr=t("o",function(t){function e(e,n,r){var i;return i=t.call(this)||this,"object"==typeof e?(i.x=e.x,i.y=e.y,i.z=e.z):(i.x=e||0,i.y=n||0,i.z=r||0),i}h(e,t),e.zero=function(t){return t.x=0,t.y=0,t.z=0,t},e.clone=function(t){return new e(t.x,t.y,t.z)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t},e.set=function(t,e,n,r){return t.x=e,t.y=n,t.z=r,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return Math.sqrt(n*n+r*r+i*i)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},e.len=function(t){var e=t.x,n=t.y,r=t.z;return Math.sqrt(e*e+n*n+r*r)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z;return e*e+n*n+r*r},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},e.invert=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t},e.invertSafe=function(t,e){var n=e.x,r=e.y,i=e.z;return Math.abs(n)<ur?t.x=0:t.x=1/n,Math.abs(r)<ur?t.y=0:t.y=1/r,Math.abs(i)<ur?t.z=0:t.z=1/i,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=n*n+r*r+i*i;return a>0?(a=1/Math.sqrt(a),t.x=n*a,t.y=r*a,t.z=i*a):(t.x=0,t.y=0,t.z=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},e.cross=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z;return t.x=i*m-a*o,t.y=a*s-r*m,t.z=r*o-i*s,t},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t},e.random=function(t,e){e=e||1;var n=2*pr()*Math.PI,r=2*pr()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a+n.m15;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a+n.m12)*s,t.y=(n.m01*r+n.m05*i+n.m09*a+n.m13)*s,t.z=(n.m02*r+n.m06*i+n.m10*a+n.m14)*s,t},e.transformMat4Normal=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a)*s,t.y=(n.m01*r+n.m05*i+n.m09*a)*s,t.z=(n.m02*r+n.m06*i+n.m10*a)*s,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=r*n.m00+i*n.m03+a*n.m06,t.y=r*n.m01+i*n.m04+a*n.m07,t.z=r*n.m02+i*n.m05+a*n.m08,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14,t},e.transformQuat=function(t,e,n){var r=n.w*e.x+n.y*e.z-n.z*e.y,i=n.w*e.y+n.z*e.x-n.x*e.z,a=n.w*e.z+n.x*e.y-n.y*e.x,s=-n.x*e.x-n.y*e.y-n.z*e.z;return t.x=r*n.w+s*-n.x+i*-n.z-a*-n.y,t.y=i*n.w+s*-n.y+a*-n.x-r*-n.z,t.z=a*n.w+s*-n.z+r*-n.y-i*-n.x,t},e.transformRTS=function(t,e,n,r,i){var a=e.x*i.x,s=e.y*i.y,o=e.z*i.z,m=n.w*a+n.y*o-n.z*s,u=n.w*s+n.z*a-n.x*o,h=n.w*o+n.x*s-n.y*a,c=-n.x*a-n.y*s-n.z*o;return t.x=m*n.w+c*-n.x+u*-n.z-h*-n.y+r.x,t.y=u*n.w+c*-n.y+h*-n.x-m*-n.z+r.y,t.z=h*n.w+c*-n.z+m*-n.y-u*-n.x+r.z,t},e.transformInverseRTS=function(t,e,n,r,i){var a=e.x-r.x,s=e.y-r.y,o=e.z-r.z,m=n.w*a-n.y*o+n.z*s,u=n.w*s-n.z*a+n.x*o,h=n.w*o-n.x*s+n.y*a,c=n.x*a+n.y*s+n.z*o;return t.x=(m*n.w+c*n.x+u*n.z-h*n.y)/i.x,t.y=(u*n.w+c*n.y+h*n.x-m*n.z)/i.y,t.z=(h*n.w+c*n.z+m*n.y-u*n.x)/i.z,t},e.rotateX=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i,h=a*o-s*m,c=a*m+s*o;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateY=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=s*m+i*o,h=a,c=s*o-i*m;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateZ=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i*o-a*m,h=i*m+a*o,c=s;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateN=function(t,e,n,r,i){var a=e.x-n.x,s=e.y-n.y,o=e.z-n.z,m=r.x,u=r.y,h=r.z,c=Math.cos(i),l=Math.sin(i),f=a*(m*m*(1-c)+c)+s*(m*u*(1-c)-h*l)+o*(m*h*(1-c)+u*l),y=a*(m*u*(1-c)+h*l)+s*(u*u*(1-c)+c)+o*(u*h*(1-c)-m*l),d=a*(m*h*(1-c)-u*l)+s*(u*h*(1-c)+m*l)+o*(h*h*(1-c)+c);return t.x=f+n.x,t.y=y+n.y,t.z=d+n.z,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},e.equals=function(t,e,n){void 0===n&&(n=ur);var r=t.x,i=t.y,a=t.z,s=e.x,o=e.y,m=e.z;return Math.abs(r-s)<=n*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=n*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-m)<=n*Math.max(1,Math.abs(a),Math.abs(m))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y+t.z*t.z,r=e.x*e.x+e.y*e.y+e.z*e.z;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y+t.z*e.z)/Math.sqrt(n*r);return i=lr(i,-1,1),Math.acos(i)},e.projectOnPlane=function(t,n,r){return e.subtract(t,n,e.project(t,n,r))},e.project=function(t,n,r){var i=e.lengthSqr(r);return i<1e-6?e.set(t,0,0,0):e.multiplyScalar(t,r,e.dot(n,r)/i)},e.moveTowards=function(t,e,n,r){var i=n.x-e.x,a=n.y-e.y,s=n.z-e.z,o=i*i+a*a+s*s;if(0===o||r>=0&&o<r*r)return t.x=n.x,t.y=n.y,t.z=n.z,t;var m=r/Math.sqrt(o);return t.x=e.x+i*m,t.y=e.y+a*m,t.z=e.z+s*m,t},e.generateOrthogonal=function(t,n){var r=n.x,i=n.y,a=n.z,s=Math.abs(r),o=Math.abs(i),m=Math.abs(a);return s<o&&s<m?e.set(t,0,a,-i):o<m?e.set(t,a,0,-r):e.set(t,i,-r,0),e.normalize(t,t)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z)},n.set=function(t,e,n){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=n||0),this},n.equals=function(t,e){return void 0===e&&(e=ur),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e},n.equals3f=function(t,e,n,r){return void 0===r&&(r=ur),Math.abs(this.x-t)<=r&&Math.abs(this.y-e)<=r&&Math.abs(this.z-n)<=r},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},n.strictEquals3f=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},n.add3f=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},n.subtract3f=function(t,e,n){return this.x-=t,this.y-=e,this.z-=n,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this},n.multiply3f=function(t,e,n){return this.x*=t,this.y*=e,this.z*=n,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},n.divide3f=function(t,e,n){return this.x/=t,this.y/=e,this.z/=n,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},n.clampf=function(t,e){return this.x=lr(this.x,t.x,e.x),this.y=lr(this.y,t.y,e.y),this.z=lr(this.z,t.z,e.z),this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=t*t+e*e+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r),this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=t.m03*e+t.m07*n+t.m11*r+t.m15;return i=i?1/i:1,this.x=(t.m00*e+t.m04*n+t.m08*r+t.m12)*i,this.y=(t.m01*e+t.m05*n+t.m09*r+t.m13)*i,this.z=(t.m02*e+t.m06*n+t.m10*r+t.m14)*i,this},e}(Ee));function Wr(t,e,n){return new Gr(t,e,n)}Fr=Gr,Gr.UNIT_X=Object.freeze(new Fr(1,0,0)),Gr.UNIT_Y=Object.freeze(new Fr(0,1,0)),Gr.UNIT_Z=Object.freeze(new Fr(0,0,1)),Gr.RIGHT=Object.freeze(new Fr(1,0,0)),Gr.UP=Object.freeze(new Fr(0,1,0)),Gr.FORWARD=Object.freeze(new Fr(0,0,-1)),Gr.ZERO=Object.freeze(new Fr(0,0,0)),Gr.ONE=Object.freeze(new Fr(1,1,1)),Gr.NEG_ONE=Object.freeze(new Fr(-1,-1,-1)),Gr.slerp=(Hr=new Fr,qr=new Fr,jr=new Fr,function(t,e,n,r){var i=1e-5,a=Fr.len(e),s=Fr.len(n);if(a<i||s<i)return Fr.lerp(t,e,n,r);var o=yr(a,s,r),m=Fr.dot(e,n)/(a*s);if(m>.99999)return Fr.lerp(t,e,n,r);if(m<-.99999){var u=Fr.multiplyScalar(Hr,e,1/a),h=Fr.generateOrthogonal(qr,u),c=Math.PI*r;return Yr(jr,u,h,c),Fr.multiplyScalar(t,jr,o),t}var l=m,f=Math.acos(l)*r,y=Fr.multiplyScalar(Hr,e,1/a),d=Fr.multiplyScalar(qr,n,1/s);return Fr.scaleAndAdd(jr,d,y,-l),Fr.normalize(jr,jr),Fr.multiplyScalar(jr,jr,Math.sin(f)),Fr.scaleAndAdd(jr,jr,y,Math.cos(f)),Fr.multiplyScalar(t,jr,o),t}),Gr.signedAngle=(Vr=new Fr,function(t,e,n){var r=Fr.angle(t,e),i=Fr.cross(Vr,t,e);return Fr.dot(i,n)<0?-r:r}),pn.fastDefine("cc.Vec3",Gr,{x:0,y:0,z:0}),i.Vec3=Gr;var Kr,Qr,Yr=(Kr={x:0,y:0,z:0,w:0},function(t,e,n,r){var i=.5*r,a=Math.sin(i);return Kr.x=a*n.x,Kr.y=a*n.y,Kr.z=a*n.z,Kr.w=Math.cos(i),Gr.transformQuat(t,e,Kr),t});i.v3=Wr;var Xr,Zr=1/255,Jr=t("B",function(t){function e(e,n,r,i){var a;return(a=t.call(this)||this)._val=0,"string"==typeof e?a.fromHEX(e):void 0!==n?a.set(e,n,r,i):a.set(e),a}h(e,t),e.clone=function(t){var n=new e;return t._val?n._val=t._val:n._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,n},e.copy=function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t},e.set=function(t,e,n,r,i){return t.r=e,t.g=n,t.b=r,t.a=i,t},e.toVec4=function(t,e){return(e=void 0!==e?e:new Br).x=t.r*Zr,e.y=t.g*Zr,e.z=t.b*Zr,e.w=t.a*Zr,e},e.fromVec4=function(t,n){return(n=void 0===n?new e:n).r=Math.floor(t.x/Zr),n.g=Math.floor(t.y/Zr),n.b=Math.floor(t.z/Zr),n.a=Math.floor(t.w/Zr),n},e.fromHEX=function(t,e){var n;return"string"==typeof e?(6===(e="#"===e[0]?e.substring(1):e).length?e+="FF":3===e.length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+"FF":4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n=Number("0x"+e)):(e<16777216&&(e=255+(e<<8)),n=e),t.r=n>>>24,t.g=(16711680&n)>>>16,t.b=(65280&n)>>>8,t.a=255&n,t._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,t},e.add=function(t,e,n){return t.r=e.r+n.r,t.g=e.g+n.g,t.b=e.b+n.b,t.a=e.a+n.a,t},e.subtract=function(t,e,n){return t.r=e.r-n.r,t.g=e.g-n.g,t.b=e.b-n.b,t.a=e.a-n.a,t},e.multiply=function(t,e,n){return t.r=e.r*n.r,t.g=e.g*n.g,t.b=e.b*n.b,t.a=e.a*n.a,t},e.divide=function(t,e,n){return t.r=e.r/n.r,t.g=e.g/n.g,t.b=e.b/n.b,t.a=e.a/n.a,t},e.scale=function(t,e,n){return t.r=e.r*n,t.g=e.g*n,t.b=e.b*n,t.a=e.a*n,t},e.lerp=function(t,e,n,r){var i=e.r,a=e.g,s=e.b,o=e.a;return i+=(n.r-i)*r,a+=(n.g-a)*r,s+=(n.b-s)*r,o+=(n.a-o)*r,t._val=Math.floor((o<<24>>>0)+(s<<16)+(a<<8)+i),t},e.toArray=function(t,n,r){void 0===r&&(r=0);var i=n instanceof e||n.a>1?1/255:1;return t[r+0]=n.r*i,t[r+1]=n.g*i,t[r+2]=n.b*i,t[r+3]=n.a*i,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),e.r=255*t[n+0],e.g=255*t[n+1],e.b=255*t[n+2],e.a=255*t[n+3],e},e.fromUint32=function(t,e){return t._val=e,t},e.toUint32=function(t){return t._val},e.strictEquals=function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a},e.equals=function(t,e,n){return void 0===n&&(n=ur),!(Math.abs(t.r)===1/0||Math.abs(t.g)===1/0||Math.abs(t.b)===1/0||Math.abs(t.a)===1/0)&&Math.abs(t.r-e.r)<=n*Math.max(1,Math.abs(t.r),Math.abs(e.r))&&Math.abs(t.g-e.g)<=n*Math.max(1,Math.abs(t.g),Math.abs(e.g))&&Math.abs(t.b-e.b)<=n*Math.max(1,Math.abs(t.b),Math.abs(e.b))&&Math.abs(t.a-e.a)<=n*Math.max(1,Math.abs(t.a),Math.abs(e.a))},e.hex=function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0};var n=e.prototype;return n.clone=function(){var t=new e;return t._val=this._val,t},n.equals=function(t){return t&&this._val===t._val},n.lerp=function(t,e){var n=this.r,r=this.g,i=this.b,a=this.a;return n+=(t.r-n)*e,r+=(t.g-r)*e,i+=(t.b-i)*e,a+=(t.a-a)*e,this._val=Math.floor((a<<24>>>0)+(i<<16)+(r<<8)+n),this},n.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},n.toCSS=function(t){return void 0===t&&(t="rgba"),"rgba"===t?"rgba("+this.r+","+this.g+","+this.b+","+(this.a*Zr).toFixed(2)+")":"rgb"===t?"rgb("+this.r+","+this.g+","+this.b+")":"#"+this.toHEX(t)},n.fromHEX=function(t){var e;"string"==typeof t?(6===(t="#"===t[0]?t.substring(1):t).length?t+="FF":3===t.length?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+"FF":4===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),e=Number("0x"+t)):(t<16777216&&(t=255+(t<<8)),e=t);var n=e>>>24,r=(16711680&e)>>>16,i=(65280&e)>>>8,a=255&e;return this._val=(a<<24>>>0)+(i<<16)+(r<<8)+n,this},n.toHEX=function(t){void 0===t&&(t="#rrggbb");var e="0",n=[(this.r<16?e:"")+this.r.toString(16),(this.g<16?e:"")+this.g.toString(16),(this.b<16?e:"")+this.b.toString(16)];return"#rgb"===t?(n[0]=n[0][0],n[1]=n[1][0],n[2]=n[2][0]):"#rrggbbaa"===t&&n.push((this.a<16?e:"")+this.a.toString(16)),n.join("")},n.toRGBValue=function(){return 16777215&this._val},n.fromHSV=function(t,e,n){var r=0,i=0,a=0;if(0===e)r=i=a=n;else if(0===n)r=i=a=0;else{1===t&&(t=0),t*=6;var s=Math.floor(t),o=t-s,m=n*(1-e),u=n*(1-e*o),h=n*(1-e*(1-o));switch(s){default:case 0:r=n,i=h,a=m;break;case 1:r=u,i=n,a=m;break;case 2:r=m,i=n,a=h;break;case 3:r=m,i=u,a=n;break;case 4:r=h,i=m,a=n;break;case 5:r=n,i=m,a=u}}return r*=255,i*=255,a*=255,this._val=(this.a<<24>>>0)+(a<<16)+(i<<8)+(0|r),this},n.toHSV=function(){var t=this.r*Zr,e=this.g*Zr,n=this.b*Zr,r={h:0,s:0,v:0},i=Math.max(t,e,n),a=Math.min(t,e,n),s=0;return r.v=i,r.s=i?(i-a)/i:0,r.s?(s=i-a,r.h=t===i?(e-n)/s:e===i?2+(n-t)/s:4+(t-e)/s,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},n.set=function(t,e,n,r){return"object"==typeof t?null!=t._val?this._val=t._val:(e=t.g||0,n=t.b||0,r="number"==typeof t.a?t.a:255,t=t.r||0,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)):(t=t||0,e=e||0,n=n||0,r="number"==typeof r?r:255,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)),this},n.multiply=function(t){var e=(255&this._val)*t.r>>8,n=(65280&this._val)*t.g>>8,r=(16711680&this._val)*t.b>>8,i=((4278190080&this._val)>>>8)*t.a;return this._val=4278190080&i|16711680&r|65280&n|255&e,this},n._set_r_unsafe=function(t){return this._val=(4294967040&this._val|t)>>>0,this},n._set_g_unsafe=function(t){return this._val=(4294902015&this._val|t<<8)>>>0,this},n._set_b_unsafe=function(t){return this._val=(4278255615&this._val|t<<16)>>>0,this},n._set_a_unsafe=function(t){return this._val=(16777215&this._val|t<<24)>>>0,this},m(e,[{key:"r",get:function(){return 255&this._val},set:function(t){t=~~lr(t,0,255),this._val=(4294967040&this._val|t)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(t){t=~~lr(t,0,255),this._val=(4294902015&this._val|t<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(t){t=~~lr(t,0,255),this._val=(4278255615&this._val|t<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(t){t=~~lr(t,0,255),this._val=(16777215&this._val|t<<24)>>>0}},{key:"x",get:function(){return this.r*Zr},set:function(t){this.r=255*t}},{key:"y",get:function(){return this.g*Zr},set:function(t){this.g=255*t}},{key:"z",get:function(){return this.b*Zr},set:function(t){this.b=255*t}},{key:"w",get:function(){return this.a*Zr},set:function(t){this.a=255*t}}]),e}(Ee));function $r(t,e,n,r){return new Jr(t,e,n,r)}function ti(t){var e=t.clone();return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}Qr=Jr,Jr.WHITE=Object.freeze(new Qr(255,255,255,255)),Jr.GRAY=Object.freeze(new Qr(127,127,127,255)),Jr.BLACK=Object.freeze(new Qr(0,0,0,255)),Jr.TRANSPARENT=Object.freeze(new Qr(0,0,0,0)),Jr.RED=Object.freeze(new Qr(255,0,0,255)),Jr.GREEN=Object.freeze(new Qr(0,255,0,255)),Jr.BLUE=Object.freeze(new Qr(0,0,255,255)),Jr.CYAN=Object.freeze(new Qr(0,255,255,255)),Jr.MAGENTA=Object.freeze(new Qr(255,0,255,255)),Jr.YELLOW=Object.freeze(new Qr(255,255,0,255)),pn.fastDefine("cc.Color",Jr,{r:0,g:0,b:0,a:255}),i.Color=Jr,i.color=$r;var ei=t("M",function(t){function e(e,n,r,i,a,s,o,m,u){var h;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),h=t.call(this)||this,"object"==typeof e?(h.m00=e.m00,h.m01=e.m01,h.m02=e.m02,h.m03=e.m03,h.m04=e.m04,h.m05=e.m05,h.m06=e.m06,h.m07=e.m07,h.m08=e.m08):(h.m00=e,h.m01=n,h.m02=r,h.m03=i,h.m04=a,h.m05=s,h.m06=o,h.m07=m,h.m08=u),h}h(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.set=function(t,e,n,r,i,a,s,o,m,u){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m05;t.m01=e.m03,t.m02=e.m06,t.m03=n,t.m05=e.m07,t.m06=r,t.m07=i}else t.m00=e.m00,t.m01=e.m03,t.m02=e.m06,t.m03=e.m01,t.m04=e.m04,t.m05=e.m07,t.m06=e.m02,t.m07=e.m05,t.m08=e.m08;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=h*s-o*u,l=-h*a+o*m,f=u*a-s*m,y=n*c+r*l+i*f;return 0===y?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t):(y=1/y,t.m00=c*y,t.m01=(-h*r+i*u)*y,t.m02=(o*r-i*s)*y,t.m03=l*y,t.m04=(h*n-i*m)*y,t.m05=(-o*n+i*a)*y,t.m06=f*y,t.m07=(-u*n+r*m)*y,t.m08=(s*n-r*a)*y,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08;return e*(u*a-s*m)+n*(-u*i+s*o)+r*(m*i-a*o)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m03,v=n.m04,p=n.m05,g=n.m06,_=n.m07,x=n.m08;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=d*r+v*s+p*u,t.m04=d*i+v*o+p*h,t.m05=d*a+v*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.multiplyMat4=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,d=n.m04,v=n.m05,p=n.m06,g=n.m08,_=n.m09,x=n.m10;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=d*r+v*s+p*u,t.m04=d*i+v*o+p*h,t.m05=d*a+v*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.transform=function(t,e,n){this.translate(t,e,n)},e.translate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.x,f=n.y;return t.m00=r,t.m01=i,t.m02=a,t.m03=s,t.m04=o,t.m05=m,t.m06=l*r+f*s+u,t.m07=l*i+f*o+h,t.m08=l*a+f*m+c,t},e.scale=function(t,e,n){var r=n.x,i=n.y;return t.m00=r*e.m00,t.m01=r*e.m01,t.m02=r*e.m02,t.m03=i*e.m03,t.m04=i*e.m04,t.m05=i*e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.rotate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=Math.sin(n),f=Math.cos(n);return t.m00=f*r+l*s,t.m01=f*i+l*o,t.m02=f*a+l*m,t.m03=f*s-l*r,t.m04=f*o-l*i,t.m05=f*m-l*a,t.m06=u,t.m07=h,t.m08=c,t},e.fromMat4=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m04,t.m04=e.m05,t.m05=e.m06,t.m06=e.m08,t.m07=e.m09,t.m08=e.m10,t},e.fromViewUp=function(t,n,r){return Gr.lengthSqr(n)<ur*ur?(e.identity(t),t):(r=r||Gr.UNIT_Y,Gr.normalize(ri,Gr.cross(ri,r,n)),Gr.lengthSqr(ri)<ur*ur?(e.identity(t),t):(Gr.cross(ii,n,ri),e.set(t,ri.x,ri.y,ri.z,ii.x,ii.y,ii.z,n.x,n.y,n.z),t))},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=e.x,t.m07=e.y,t.m08=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=e.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=-n,t.m04=r,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,d=a*s,v=a*o,p=a*m;return t.m00=1-c-y,t.m03=h-p,t.m06=l+v,t.m01=h+p,t.m04=1-u-y,t.m07=f-d,t.m02=l-v,t.m05=f+d,t.m08=1-u-c,t},e.inverseTransposeMat4=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,I=c*v-l*d,z=c*p-f*d,T=l*p-f*v,O=g*T-_*z+x*I+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*z+u*I)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*z-o*N+u*E)*O,t.m03=(i*z-r*T-a*I)*O,t.m04=(n*T-i*N+a*A)*O,t.m05=(r*N-n*z-a*E)*O,t.m06=(d*w-v*M+p*b)*O,t.m07=(v*x-y*w-p*_)*O,t.m08=(y*M-d*x+p*g)*O,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=n.m00*r+e.m00,t.m01=n.m01*r+e.m01,t.m02=n.m02*r+e.m02,t.m03=n.m03*r+e.m03,t.m04=n.m04*r+e.m04,t.m05=n.m05*r+e.m05,t.m06=n.m06*r+e.m06,t.m07=n.m07*r+e.m07,t.m08=n.m08*r+e.m08,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08},e.equals=function(t,e,n){return void 0===n&&(n=ur),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))},e.toEuler=function(t,e){var n=t.m00,r=t.m01;t.m02;var i=t.m03,a=t.m04;t.m05;var s=t.m06,o=t.m07,m=t.m08;return o<.999?o>-.999?(e.x=Math.asin(-o),e.y=Math.atan2(s,m),e.z=Math.atan2(r,a),!0):(e.x=or,e.y=Math.atan2(i,n),e.z=0,!1):(e.x=-or,e.y=Math.atan2(-i,n),e.z=0,!1)};var n=e.prototype;return n.clone=function(){var t=this;return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},n.set=function(t,e,n,r,i,a,s,o,m){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=1),"object"==typeof t?(this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08):(this.m00=t,this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m),this},n.equals=function(t,e){return void 0===e&&(e=ur),Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08},n.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+",\n"+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+",\n"+t.m08+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=t,this.m05=this.m07,this.m06=e,this.m07=n,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=m*i-a*o,h=-m*r+a*s,c=o*r-i*s,l=t*u+e*h+n*c;return 0===l?(this.set(0,0,0,0,0,0,0,0,0),this):(l=1/l,this.m00=u*l,this.m01=(-m*e+n*o)*l,this.m02=(a*e-n*i)*l,this.m03=h*l,this.m04=(m*t-n*s)*l,this.m05=(-a*t+n*r)*l,this.m06=c*l,this.m07=(-o*t+e*s)*l,this.m08=(i*t-e*r)*l,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08;return t*(m*i-a*o)+e*(-m*r+a*s)+n*(o*r-i*s)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=t.m00,c=t.m01,l=t.m02,f=t.m03,y=t.m04,d=t.m05,v=t.m06,p=t.m07,g=t.m08;return this.m00=h*e+c*i+l*o,this.m01=h*n+c*a+l*m,this.m02=h*r+c*s+l*u,this.m03=f*e+y*i+d*o,this.m04=f*n+y*a+d*m,this.m05=f*r+y*s+d*u,this.m06=v*e+p*i+g*o,this.m07=v*n+p*a+g*m,this.m08=v*r+p*s+g*u,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this},n.scale=function(t){var e=t.x,n=t.y;return this.m00=e*this.m00,this.m01=e*this.m01,this.m02=e*this.m02,this.m03=n*this.m03,this.m04=n*this.m04,this.m05=n*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this},n.rotate=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=Math.sin(t),c=Math.cos(t);return this.m00=c*e+h*i,this.m01=c*n+h*a,this.m02=c*r+h*s,this.m03=c*i-h*e,this.m04=c*a-h*n,this.m05=c*s-h*r,this.m06=o,this.m07=m,this.m08=u,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,d=i*s,v=i*o;return this.m00=1-h-f,this.m03=u-v,this.m06=c+d,this.m01=u+v,this.m04=1-m-f,this.m07=l-y,this.m02=c-d,this.m05=l+y,this.m08=1-m-h,this},e}(Ee));Xr=ei,ei.IDENTITY=Object.freeze(new Xr);var ni,ri=new Gr,ii=new Gr;pn.fastDefine("cc.Mat3",ei,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),i.Mat3=ei;var ai=t("Q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=null!=i?i:1),a}h(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.identity=function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t},e.rotationTo=function(t,n,r){var i=Gr.dot(n,r);return i<-.999999?(Gr.cross(ui,Gr.UNIT_X,n),ui.length()<1e-6&&Gr.cross(ui,Gr.UNIT_Y,n),Gr.normalize(ui,ui),e.fromAxisAngle(t,ui,Math.PI),t):i>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(Gr.cross(ui,n,r),t.x=ui.x,t.y=ui.y,t.z=ui.z,t.w=1+i,e.normalize(t,t))},e.getAxisAngle=function(t,e){var n=2*Math.acos(e.w),r=Math.sin(n/2);return 0!==r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):(t.x=1,t.y=0,t.z=0),n},e.multiply=function(t,e,n){var r=e.x*n.w+e.w*n.x+e.y*n.z-e.z*n.y,i=e.y*n.w+e.w*n.y+e.z*n.x-e.x*n.z,a=e.z*n.w+e.w*n.z+e.x*n.y-e.y*n.x,s=e.w*n.w-e.x*n.x-e.y*n.y-e.z*n.z;return t.x=r,t.y=i,t.z=a,t.w=s,t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.rotateX=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+m*r,t.y=s*i+o*r,t.z=o*i-s*r,t.w=m*i-a*r,t},e.rotateY=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i-o*r,t.y=s*i+m*r,t.z=o*i+a*r,t.w=m*i-s*r,t},e.rotateZ=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+s*r,t.y=s*i-a*r,t.z=o*i+m*r,t.w=m*i-o*r,t},e.rotateAround=function(t,n,r,i){return e.invert(oi,n),Gr.transformQuat(ui,r,oi),e.fromAxisAngle(oi,ui,i),e.multiply(t,n,oi),t},e.rotateAroundLocal=function(t,n,r,i){return e.fromAxisAngle(oi,r,i),e.multiply(t,n,oi),t},e.calculateW=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=Math.sqrt(Math.abs(1-e.x*e.x-e.y*e.y-e.z*e.z)),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.slerp=function(t,e,n,r){var i=0,a=0,s=n.x,o=n.y,m=n.z,u=n.w,h=e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w;if(h<0&&(h=-h,s=-s,o=-o,m=-m,u=-u),1-h>1e-6){var c=Math.acos(h),l=Math.sin(c);i=Math.sin((1-r)*c)/l,a=Math.sin(r*c)/l}else i=1-r,a=r;return t.x=i*e.x+a*s,t.y=i*e.y+a*o,t.z=i*e.z+a*m,t.w=i*e.w+a*u,t},e.sqlerp=function(t,n,r,i,a,s){return e.slerp(oi,n,a,s),e.slerp(mi,r,i,s),e.slerp(t,oi,mi,2*s*(1-s)),t},e.invert=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,r=n?1/n:0;return t.x=-e.x*r,t.y=-e.y*r,t.z=-e.z*r,t.w=e.w*r,t},e.conjugate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},e.lengthSqr=function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},e.normalize=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w;return n>0?(n=1/Math.sqrt(n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.fromAxes=function(t,n,r,i){return ei.set(hi,n.x,n.y,n.z,r.x,r.y,r.z,i.x,i.y,i.z),e.normalize(t,e.fromMat3(t,hi))},e.fromViewUp=function(t,n,r){return ei.fromViewUp(hi,n,r),e.normalize(t,e.fromMat3(t,hi))},e.fromAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t.x=r*e.x,t.y=r*e.y,t.z=r*e.z,t.w=Math.cos(n),t},e.fromMat3=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=n-s-h,l=s-n-h,f=h-n-s,y=0,d=n+s+h;c>d&&(d=c,y=1),l>d&&(d=l,y=2),f>d&&(d=f,y=3);var v=.5*Math.sqrt(d+1),p=.25/v;switch(y){case 0:t.w=v,t.x=(o-u)*p,t.y=(m-i)*p,t.z=(r-a)*p;break;case 1:t.w=(o-u)*p,t.x=v,t.y=(r+a)*p,t.z=(m+i)*p;break;case 2:t.w=(m-i)*p,t.x=(r+a)*p,t.y=v,t.z=(o+u)*p;break;case 3:t.w=(r-a)*p,t.x=(m+i)*p,t.y=(o+u)*p,t.z=v;break;default:t.w=1,t.x=0,t.y=0,t.z=0}return t},e.fromEuler=function(t,e,n,r){e*=ci,n*=ci,r*=ci;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),o=Math.cos(n),m=Math.sin(r),u=Math.cos(r);return t.x=i*o*u+a*s*m,t.y=a*s*u+i*o*m,t.z=a*o*m-i*s*u,t.w=a*o*u-i*s*m,t},e.fromAngleZ=function(t,e){return e*=ci,t.x=t.y=0,t.z=Math.sin(e),t.w=Math.cos(e),t},e.toAxisX=function(t,e){var n=2*e.y,r=2*e.z;return t.x=1-n*e.y-r*e.z,t.y=n*e.x+r*e.w,t.z=r*e.x-n*e.w,t},e.toAxisY=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=r*e.x-i*e.w,t.y=1-n*e.x-i*e.z,t.z=i*e.y+n*e.w,t},e.toAxisZ=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=i*e.x+r*e.w,t.y=i*e.y-n*e.w,t.z=1-n*e.x-r*e.y,t},e.toEuler=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=0,m=0,u=0,h=r*i+a*s;if(h>.499999)o=0,m=vr(2*Math.atan2(r,s)),u=90;else if(h<-.499999)o=0,m=-vr(2*Math.atan2(r,s)),u=-90;else{var c=r*r,l=i*i,f=a*a;o=vr(Math.atan2(2*r*s-2*i*a,1-2*c-2*f)),m=vr(Math.atan2(2*i*s-2*r*a,1-2*l-2*f)),u=vr(Math.asin(2*h)),n&&(o=-180*Math.sign(o+1e-6)+o,m=-180*Math.sign(m+1e-6)+m,u=180*Math.sign(u+1e-6)-u)}return t.x=o,t.y=m,t.z=u,t},e.toEulerInYXZOrder=function(t,e){ei.fromQuat(hi,e),ei.toEuler(hi,t),t.x=vr(t.x),t.y=vr(t.y),t.z=vr(t.z)},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=ur),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))},e.angle=function(t,n){var r=Math.min(Math.abs(e.dot(t,n)),1);return 2*Math.acos(r)},e.rotateTowards=function(t,n,r,i){var a=e.angle(n,r);if(0===a)return t.x=r.x,t.y=r.y,t.z=r.z,t.w=r.w,t;var s=Math.min(i/vr(a),1);return e.slerp(t,n,r,s)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=null!=r?r:1),this},n.equals=function(t,e){return void 0===e&&(e=ur),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.getEulerAngles=function(t){return e.toEuler(t,this)},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this.w+=e*(t.w-this.w),this},n.slerp=function(t,n){return e.slerp(this,this,t,n)},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e}(Ee));ni=ai,ai.IDENTITY=Object.freeze(new ni);var si,oi=new ai,mi=new ai,ui=new Gr,hi=new ei,ci=.5*Math.PI/180;function li(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),new ai(t,e,n,r)}pn.fastDefine("cc.Quat",ai,{x:0,y:0,z:0,w:1}),i.Quat=ai,i.quat=li;var fi=t("E",Object.freeze([Object.freeze([1,0,0,1]),Object.freeze([0,1,-1,0]),Object.freeze([-1,0,0,-1]),Object.freeze([0,-1,1,0])])),yi=t("t",function(t){function e(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d,v){var p;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===d&&(d=0),void 0===v&&(v=1),p=t.call(this)||this,"object"==typeof e?(p.m00=e.m00,p.m01=e.m01,p.m02=e.m02,p.m03=e.m03,p.m04=e.m04,p.m05=e.m05,p.m06=e.m06,p.m07=e.m07,p.m08=e.m08,p.m09=e.m09,p.m10=e.m10,p.m11=e.m11,p.m12=e.m12,p.m13=e.m13,p.m14=e.m14,p.m15=e.m15):(p.m00=e,p.m01=n,p.m02=r,p.m03=i,p.m04=a,p.m05=s,p.m06=o,p.m07=m,p.m08=u,p.m09=h,p.m10=c,p.m11=l,p.m12=f,p.m13=y,p.m14=d,p.m15=v),p}h(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d,v){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t.m09=h,t.m10=c,t.m11=l,t.m12=f,t.m13=y,t.m14=d,t.m15=v,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m03,a=e.m06,s=e.m07,o=e.m11;t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=n,t.m06=e.m09,t.m07=e.m13,t.m08=r,t.m09=a,t.m11=e.m14,t.m12=i,t.m13=s,t.m14=o}else t.m00=e.m00,t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=e.m01,t.m05=e.m05,t.m06=e.m09,t.m07=e.m13,t.m08=e.m02,t.m09=e.m06,t.m10=e.m10,t.m11=e.m14,t.m12=e.m03,t.m13=e.m07,t.m14=e.m11,t.m15=e.m15;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,I=c*v-l*d,z=c*p-f*d,T=l*p-f*v,O=g*T-_*z+x*I+b*N-M*A+w*E;return 0===O?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t):(O=1/O,t.m00=(o*T-m*z+u*I)*O,t.m01=(i*z-r*T-a*I)*O,t.m02=(d*w-v*M+p*b)*O,t.m03=(l*M-c*w-f*b)*O,t.m04=(m*N-s*T-u*A)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(v*x-y*w-p*_)*O,t.m07=(h*w-l*x+f*_)*O,t.m08=(s*z-o*N+u*E)*O,t.m09=(r*N-n*z-a*E)*O,t.m10=(y*M-d*x+p*g)*O,t.m11=(c*x-h*M-f*g)*O,t.m12=(o*A-s*I-m*E)*O,t.m13=(n*I-r*A+i*E)*O,t.m14=(d*_-y*b-v*g)*O,t.m15=(h*b-c*_+l*g)*O,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08,h=t.m09,c=t.m10,l=t.m11,f=t.m12,y=t.m13,d=t.m14,v=t.m15;return(e*s-n*a)*(c*v-l*d)-(e*o-r*a)*(h*v-l*y)+(e*m-i*a)*(h*d-c*y)+(n*o-r*s)*(u*v-l*f)-(n*m-i*s)*(u*d-c*f)+(r*m-i*o)*(u*y-h*f)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=e.m09,f=e.m10,y=e.m11,d=e.m12,v=e.m13,p=e.m14,g=e.m15,_=n.m00,x=n.m01,b=n.m02,M=n.m03;return t.m00=_*r+x*o+b*c+M*d,t.m01=_*i+x*m+b*l+M*v,t.m02=_*a+x*u+b*f+M*p,t.m03=_*s+x*h+b*y+M*g,_=n.m04,x=n.m05,b=n.m06,M=n.m07,t.m04=_*r+x*o+b*c+M*d,t.m05=_*i+x*m+b*l+M*v,t.m06=_*a+x*u+b*f+M*p,t.m07=_*s+x*h+b*y+M*g,_=n.m08,x=n.m09,b=n.m10,M=n.m11,t.m08=_*r+x*o+b*c+M*d,t.m09=_*i+x*m+b*l+M*v,t.m10=_*a+x*u+b*f+M*p,t.m11=_*s+x*h+b*y+M*g,_=n.m12,x=n.m13,b=n.m14,M=n.m15,t.m12=_*r+x*o+b*c+M*d,t.m13=_*i+x*m+b*l+M*v,t.m14=_*a+x*u+b*f+M*p,t.m15=_*s+x*h+b*y+M*g,t},e.transform=function(t,e,n){var r=n.x,i=n.y,a=n.z;if(e===t)t.m12=e.m00*r+e.m04*i+e.m08*a+e.m12,t.m13=e.m01*r+e.m05*i+e.m09*a+e.m13,t.m14=e.m02*r+e.m06*i+e.m10*a+e.m14,t.m15=e.m03*r+e.m07*i+e.m11*a+e.m15;else{var s=e.m00,o=e.m01,m=e.m02,u=e.m03,h=e.m04,c=e.m05,l=e.m06,f=e.m07,y=e.m08,d=e.m09,v=e.m10,p=e.m11;t.m00=s,t.m01=o,t.m02=m,t.m03=u,t.m04=h,t.m05=c,t.m06=l,t.m07=f,t.m08=y,t.m09=d,t.m10=v,t.m11=p,t.m12=s*r+h*i+y*a+e.m12,t.m13=o*r+c*i+d*a+e.m13,t.m14=m*r+l*i+v*a+e.m14,t.m15=u*r+f*i+p*a+e.m15}return t},e.translate=function(t,e,n){return e===t?(t.m12+=n.x,t.m13+=n.y,t.m14+=n.z):(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12+n.x,t.m13=e.m13+n.y,t.m14=e.m14+n.z,t.m15=e.m15),t},e.scale=function(t,e,n){var r=n.x,i=n.y,a=n.z;return t.m00=e.m00*r,t.m01=e.m01*r,t.m02=e.m02*r,t.m03=e.m03*r,t.m04=e.m04*i,t.m05=e.m05*i,t.m06=e.m06*i,t.m07=e.m07*i,t.m08=e.m08*a,t.m09=e.m09*a,t.m10=e.m10*a,t.m11=e.m11*a,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.rotate=function(t,e,n,r){var i=r.x,a=r.y,s=r.z,o=Math.sqrt(i*i+a*a+s*s);if(Math.abs(o)<ur)return null;i*=o=1/o,a*=o,s*=o;var m=Math.sin(n),u=Math.cos(n),h=1-u,c=e.m00,l=e.m01,f=e.m02,y=e.m03,d=e.m04,v=e.m05,p=e.m06,g=e.m07,_=e.m08,x=e.m09,b=e.m10,M=e.m11,w=i*i*h+u,E=a*i*h+s*m,A=s*i*h-a*m,N=i*a*h-s*m,I=a*a*h+u,z=s*a*h+i*m,T=i*s*h+a*m,O=a*s*h-i*m,S=s*s*h+u;return t.m00=c*w+d*E+_*A,t.m01=l*w+v*E+x*A,t.m02=f*w+p*E+b*A,t.m03=y*w+g*E+M*A,t.m04=c*N+d*I+_*z,t.m05=l*N+v*I+x*z,t.m06=f*N+p*I+b*z,t.m07=y*N+g*I+M*z,t.m08=c*T+d*O+_*S,t.m09=l*T+v*O+x*S,t.m10=f*T+p*O+b*S,t.m11=y*T+g*O+M*S,e!==t&&(t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t},e.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m04,s=e.m05,o=e.m06,m=e.m07,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m04=a*i+u*r,t.m05=s*i+h*r,t.m06=o*i+c*r,t.m07=m*i+l*r,t.m08=u*i-a*r,t.m09=h*i-s*r,t.m10=c*i-o*r,t.m11=l*i-m*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i-u*r,t.m01=s*i-h*r,t.m02=o*i-c*r,t.m03=m*i-l*r,t.m08=a*r+u*i,t.m09=s*r+h*i,t.m10=o*r+c*i,t.m11=m*r+l*i,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m04,h=e.m05,c=e.m06,l=e.m07;return e!==t&&(t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i+u*r,t.m01=s*i+h*r,t.m02=o*i+c*r,t.m03=m*i+l*r,t.m04=u*i-a*r,t.m05=h*i-s*r,t.m06=c*i-o*r,t.m07=l*i-m*r,t},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=e.x,t.m13=e.y,t.m14=e.z,t.m15=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=e.y,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=e.z,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRotation=function(t,e,n){var r=n.x,i=n.y,a=n.z,s=Math.sqrt(r*r+i*i+a*a);if(Math.abs(s)<ur)return null;r*=s=1/s,i*=s,a*=s;var o=Math.sin(e),m=Math.cos(e),u=1-m;return t.m00=r*r*u+m,t.m01=i*r*u+a*o,t.m02=a*r*u-i*o,t.m03=0,t.m04=r*i*u-a*o,t.m05=i*i*u+m,t.m06=a*i*u+r*o,t.m07=0,t.m08=r*a*u+i*o,t.m09=i*a*u-r*o,t.m10=a*a*u+m,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=r,t.m06=n,t.m07=0,t.m08=0,t.m09=-n,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=0,t.m02=-n,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=n,t.m09=0,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=0,t.m04=-n,t.m05=r,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRT=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u;return t.m00=1-(f+d),t.m01=c+g,t.m02=l-p,t.m03=0,t.m04=c-g,t.m05=1-(h+d),t.m06=y+v,t.m07=0,t.m08=l+p,t.m09=y-v,t.m10=1-(h+f),t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.getTranslation=function(t,e){return t.x=e.m12,t.y=e.m13,t.z=e.m14,t},e.getScaling=function(t,e){var n=pi.m00=e.m00,r=pi.m01=e.m01,i=pi.m02=e.m02,a=pi.m03=e.m04,s=pi.m04=e.m05,o=pi.m05=e.m06,m=pi.m06=e.m08,u=pi.m07=e.m09,h=pi.m08=e.m10;return t.x=Math.sqrt(n*n+r*r+i*i),t.y=Math.sqrt(a*a+s*s+o*o),t.z=Math.sqrt(m*m+u*u+h*h),ei.determinant(pi)<0&&(t.x*=-1),t},e.getRotation=function(t,e){var n=e.m00+e.m05+e.m10,r=0;return n>0?(r=2*Math.sqrt(n+1),t.w=.25*r,t.x=(e.m06-e.m09)/r,t.y=(e.m08-e.m02)/r,t.z=(e.m01-e.m04)/r):e.m00>e.m05&&e.m00>e.m10?(r=2*Math.sqrt(1+e.m00-e.m05-e.m10),t.w=(e.m06-e.m09)/r,t.x=.25*r,t.y=(e.m01+e.m04)/r,t.z=(e.m08+e.m02)/r):e.m05>e.m10?(r=2*Math.sqrt(1+e.m05-e.m00-e.m10),t.w=(e.m08-e.m02)/r,t.x=(e.m01+e.m04)/r,t.y=.25*r,t.z=(e.m06+e.m09)/r):(r=2*Math.sqrt(1+e.m10-e.m00-e.m05),t.w=(e.m01-e.m04)/r,t.x=(e.m08+e.m02)/r,t.y=(e.m06+e.m09)/r,t.z=.25*r),t},e.toRTS=function(t,e,n,r){var i=Gr.set(vi,t.m00,t.m01,t.m02).length(),a=Gr.set(vi,t.m04,t.m05,t.m06).length(),s=Gr.set(vi,t.m08,t.m09,t.m10).length();pi.m00=t.m00/i,pi.m01=t.m01/i,pi.m02=t.m02/i,pi.m03=t.m04/a,pi.m04=t.m05/a,pi.m05=t.m06/a,pi.m06=t.m08/s,pi.m07=t.m09/s,pi.m08=t.m10/s;var o=ei.determinant(pi);r&&(Gr.set(r,i,a,s),o<0&&(r.x*=-1)),n&&Gr.set(n,t.m12,t.m13,t.m14),e&&(o<0&&(pi.m00*=-1,pi.m01*=-1,pi.m02*=-1),ai.fromMat3(e,pi))},e.toSRT=function(t,e,n,r){var i=Gr.set(vi,t.m00,t.m01,t.m02).length(),a=Gr.set(vi,t.m04,t.m05,t.m06).length(),s=Gr.set(vi,t.m08,t.m09,t.m10).length();r&&(r.x=i,r.y=a,r.z=s),n&&Gr.set(n,t.m12,t.m13,t.m14),e&&(pi.m00=t.m00/i,pi.m01=t.m01/i,pi.m02=t.m02/i,pi.m03=t.m04/a,pi.m04=t.m05/a,pi.m05=t.m06/a,pi.m06=t.m08/s,pi.m07=t.m09/s,pi.m08=t.m10/s,ei.determinant(pi)<0&&(r&&(r.x*=-1),pi.m00*=-1,pi.m01*=-1,pi.m02*=-1),ai.fromMat3(e,pi))},e.toEuler=function(t,e){return ei.set(pi,t.m00,t.m01,t.m02,t.m04,t.m05,t.m06,t.m08,t.m09,t.m10),ei.toEuler(pi,e)},e.fromRTS=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,d=a*h,v=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+v))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+v))*b,t.m06=(d+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(d-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromSRT=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,d=a*h,v=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+v))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+v))*b,t.m06=(d+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(d-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromRTSOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,d=s*h,v=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(d+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(v+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(v-g)*w,t.m10=(1-(l+d))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromSRTOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,d=s*h,v=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(d+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(v+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(v-g)*w,t.m10=(1-(l+d))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,d=a*s,v=a*o,p=a*m;return t.m00=1-c-y,t.m01=h+p,t.m02=l-v,t.m03=0,t.m04=h-p,t.m05=1-u-y,t.m06=f+d,t.m07=0,t.m08=l+v,t.m09=f-d,t.m10=1-u-c,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.frustum=function(t,e,n,r,i,a,s){var o=1/(n-e),m=1/(i-r),u=1/(a-s);return t.m00=2*a*o,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*a*m,t.m06=0,t.m07=0,t.m08=(n+e)*o,t.m09=(i+r)*m,t.m10=(s+a)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=s*a*2*u,t.m15=0,t},e.perspective=function(t,e,n,r,i,a,s,o,m){void 0===a&&(a=!0),void 0===s&&(s=-1),void 0===o&&(o=1),void 0===m&&(m=0);var u=1/Math.tan(e/2),h=1/(r-i),c=a?u/n:u,l=(a?u:u*n)*o,f=fi[m];return t.m00=c*f[0],t.m01=c*f[1],t.m02=0,t.m03=0,t.m04=l*f[2],t.m05=l*f[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(i-s*r)*h,t.m11=-1,t.m12=0,t.m13=0,t.m14=i*r*h*(1-s),t.m15=0,t},e.ortho=function(t,e,n,r,i,a,s,o,m,u){void 0===o&&(o=-1),void 0===m&&(m=1),void 0===u&&(u=0);var h=1/(e-n),c=1/(r-i)*m,l=1/(a-s),f=-2*h,y=-2*c,d=(e+n)*h,v=(i+r)*c,p=fi[u];return t.m00=f*p[0],t.m01=f*p[1],t.m02=0,t.m03=0,t.m04=y*p[2],t.m05=y*p[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=l*(1-o),t.m11=0,t.m12=d*p[0]+v*p[2],t.m13=d*p[1]+v*p[3],t.m14=(a-o*s)*l,t.m15=1,t},e.lookAt=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=r.x,m=r.y,u=r.z,h=i-n.x,c=a-n.y,l=s-n.z,f=1/Math.sqrt(h*h+c*c+l*l),y=m*(l*=f)-u*(c*=f),d=u*(h*=f)-o*l,v=o*c-m*h,p=c*(v*=f=1/Math.sqrt(y*y+d*d+v*v))-l*(d*=f),g=l*(y*=f)-h*v,_=h*d-c*y;return t.m00=y,t.m01=p,t.m02=h,t.m03=0,t.m04=d,t.m05=g,t.m06=c,t.m07=0,t.m08=v,t.m09=_,t.m10=l,t.m11=0,t.m12=-(y*i+d*a+v*s),t.m13=-(p*i+g*a+_*s),t.m14=-(h*i+c*a+l*s),t.m15=1,t},e.inverseTranspose=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,d=e.m13,v=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*d-c*y,A=h*v-l*y,N=h*p-f*y,I=c*v-l*d,z=c*p-f*d,T=l*p-f*v,O=g*T-_*z+x*I+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*z+u*I)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*z-o*N+u*E)*O,t.m03=0,t.m04=(i*z-r*T-a*I)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(r*N-n*z-a*E)*O,t.m07=0,t.m08=(d*w-v*M+p*b)*O,t.m09=(v*x-y*w-p*_)*O,t.m10=(y*M-d*x+p*g)*O,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t[n+9]=e.m09,t[n+10]=e.m10,t[n+11]=e.m11,t[n+12]=e.m12,t[n+13]=e.m13,t[n+14]=e.m14,t[n+15]=e.m15,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t.m09=e[n+9],t.m10=e[n+10],t.m11=e[n+11],t.m12=e[n+12],t.m13=e[n+13],t.m14=e[n+14],t.m15=e[n+15],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t.m09=e.m09+n.m09,t.m10=e.m10+n.m10,t.m11=e.m11+n.m11,t.m12=e.m12+n.m12,t.m13=e.m13+n.m13,t.m14=e.m14+n.m14,t.m15=e.m15+n.m15,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t.m09=e.m09-n.m09,t.m10=e.m10-n.m10,t.m11=e.m11-n.m11,t.m12=e.m12-n.m12,t.m13=e.m13-n.m13,t.m14=e.m14-n.m14,t.m15=e.m15-n.m15,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t.m09=e.m09*n,t.m10=e.m10*n,t.m11=e.m11*n,t.m12=e.m12*n,t.m13=e.m13*n,t.m14=e.m14*n,t.m15=e.m15*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=e.m00+n.m00*r,t.m01=e.m01+n.m01*r,t.m02=e.m02+n.m02*r,t.m03=e.m03+n.m03*r,t.m04=e.m04+n.m04*r,t.m05=e.m05+n.m05*r,t.m06=e.m06+n.m06*r,t.m07=e.m07+n.m07*r,t.m08=e.m08+n.m08*r,t.m09=e.m09+n.m09*r,t.m10=e.m10+n.m10*r,t.m11=e.m11+n.m11*r,t.m12=e.m12+n.m12*r,t.m13=e.m13+n.m13*r,t.m14=e.m14+n.m14*r,t.m15=e.m15+n.m15*r,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08&&t.m09===e.m09&&t.m10===e.m10&&t.m11===e.m11&&t.m12===e.m12&&t.m13===e.m13&&t.m14===e.m14&&t.m15===e.m15},e.equals=function(t,e,n){return void 0===n&&(n=ur),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))&&Math.abs(t.m09-e.m09)<=n*Math.max(1,Math.abs(t.m09),Math.abs(e.m09))&&Math.abs(t.m10-e.m10)<=n*Math.max(1,Math.abs(t.m10),Math.abs(e.m10))&&Math.abs(t.m11-e.m11)<=n*Math.max(1,Math.abs(t.m11),Math.abs(e.m11))&&Math.abs(t.m12-e.m12)<=n*Math.max(1,Math.abs(t.m12),Math.abs(e.m12))&&Math.abs(t.m13-e.m13)<=n*Math.max(1,Math.abs(t.m13),Math.abs(e.m13))&&Math.abs(t.m14-e.m14)<=n*Math.max(1,Math.abs(t.m14),Math.abs(e.m14))&&Math.abs(t.m15-e.m15)<=n*Math.max(1,Math.abs(t.m15),Math.abs(e.m15))};var n=e.prototype;return n.clone=function(){return new e(this.m00,this.m01,this.m02,this.m03,this.m04,this.m05,this.m06,this.m07,this.m08,this.m09,this.m10,this.m11,this.m12,this.m13,this.m14,this.m15)},n.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===d&&(d=1),"object"==typeof t?(this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08,this.m09=t.m09,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m15=t.m15,this.m00=t.m00):(this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m,this.m09=u,this.m10=h,this.m11=c,this.m12=l,this.m13=f,this.m14=y,this.m15=d,this.m00=t),this},n.equals=function(t,e){return void 0===e&&(e=ur),!(Math.abs(this.m00)===1/0||Math.abs(this.m01)===1/0||Math.abs(this.m02)===1/0||Math.abs(this.m03)===1/0||Math.abs(this.m04)===1/0||Math.abs(this.m05)===1/0||Math.abs(this.m06)===1/0||Math.abs(this.m07)===1/0||Math.abs(this.m08)===1/0||Math.abs(this.m09)===1/0||Math.abs(this.m10)===1/0||Math.abs(this.m11)===1/0||Math.abs(this.m12)===1/0||Math.abs(this.m13)===1/0||Math.abs(this.m14)===1/0||Math.abs(this.m15)===1/0)&&Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))&&Math.abs(this.m09-t.m09)<=e*Math.max(1,Math.abs(this.m09),Math.abs(t.m09))&&Math.abs(this.m10-t.m10)<=e*Math.max(1,Math.abs(this.m10),Math.abs(t.m10))&&Math.abs(this.m11-t.m11)<=e*Math.max(1,Math.abs(this.m11),Math.abs(t.m11))&&Math.abs(this.m12-t.m12)<=e*Math.max(1,Math.abs(this.m12),Math.abs(t.m12))&&Math.abs(this.m13-t.m13)<=e*Math.max(1,Math.abs(this.m13),Math.abs(t.m13))&&Math.abs(this.m14-t.m14)<=e*Math.max(1,Math.abs(this.m14),Math.abs(t.m14))&&Math.abs(this.m15-t.m15)<=e*Math.max(1,Math.abs(this.m15),Math.abs(t.m15))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08&&this.m09===t.m09&&this.m10===t.m10&&this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m14===t.m14&&this.m15===t.m15},n.toString=function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},n.zero=function(){return this.m00=0,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=0,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=0,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=0,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m03,r=this.m06,i=this.m07,a=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=t,this.m06=this.m09,this.m07=this.m13,this.m08=e,this.m09=r,this.m11=this.m14,this.m12=n,this.m13=i,this.m14=a,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,d=this.m15,v=t*a-e*i,p=t*s-n*i,g=t*o-r*i,_=e*s-n*a,x=e*o-r*a,b=n*o-r*s,M=m*f-u*l,w=m*y-h*l,E=m*d-c*l,A=u*y-h*f,N=u*d-c*f,I=h*d-c*y,z=v*I-p*N+g*A+_*E-x*w+b*M;return 0===z?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(z=1/z,this.m00=(a*I-s*N+o*A)*z,this.m01=(n*N-e*I-r*A)*z,this.m02=(f*b-y*x+d*_)*z,this.m03=(h*x-u*b-c*_)*z,this.m04=(s*E-i*I-o*w)*z,this.m05=(t*I-n*E+r*w)*z,this.m06=(y*g-l*b-d*p)*z,this.m07=(m*b-h*g+c*p)*z,this.m08=(i*N-a*E+o*M)*z,this.m09=(e*E-t*N-r*M)*z,this.m10=(l*x-f*g+d*v)*z,this.m11=(u*g-m*x-c*v)*z,this.m12=(a*w-i*A-s*M)*z,this.m13=(t*A-e*w+n*M)*z,this.m14=(f*p-l*_-y*v)*z,this.m15=(m*_-u*p+h*v)*z,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,d=this.m15;return(t*a-e*i)*(h*d-c*y)-(t*s-n*i)*(u*d-c*f)+(t*o-r*i)*(u*y-h*f)+(e*s-n*a)*(m*d-c*l)-(e*o-r*a)*(m*y-h*l)+(n*o-r*s)*(m*f-u*l)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this.m09+=t.m09,this.m10+=t.m10,this.m11+=t.m11,this.m12+=t.m12,this.m13+=t.m13,this.m14+=t.m14,this.m15+=t.m15,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this.m09-=t.m09,this.m10-=t.m10,this.m11-=t.m11,this.m12-=t.m12,this.m13-=t.m13,this.m14-=t.m14,this.m15-=t.m15,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=this.m09,c=this.m10,l=this.m11,f=this.m12,y=this.m13,d=this.m14,v=this.m15,p=t.m00,g=t.m01,_=t.m02,x=t.m03;return this.m00=p*e+g*a+_*u+x*f,this.m01=p*n+g*s+_*h+x*y,this.m02=p*r+g*o+_*c+x*d,this.m03=p*i+g*m+_*l+x*v,p=t.m04,g=t.m05,_=t.m06,x=t.m07,this.m04=p*e+g*a+_*u+x*f,this.m05=p*n+g*s+_*h+x*y,this.m06=p*r+g*o+_*c+x*d,this.m07=p*i+g*m+_*l+x*v,p=t.m08,g=t.m09,_=t.m10,x=t.m11,this.m08=p*e+g*a+_*u+x*f,this.m09=p*n+g*s+_*h+x*y,this.m10=p*r+g*o+_*c+x*d,this.m11=p*i+g*m+_*l+x*v,p=t.m12,g=t.m13,_=t.m14,x=t.m15,this.m12=p*e+g*a+_*u+x*f,this.m13=p*n+g*s+_*h+x*y,this.m14=p*r+g*o+_*c+x*d,this.m15=p*i+g*m+_*l+x*v,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this.m09*=t,this.m10*=t,this.m11*=t,this.m12*=t,this.m13*=t,this.m14*=t,this.m15*=t,this},n.translate=function(t){return this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this},n.transform=function(t){var e=t.x,n=t.y,r=t.z,i=this.m00,a=this.m01,s=this.m02,o=this.m03,m=this.m04,u=this.m05,h=this.m06,c=this.m07,l=this.m08,f=this.m09,y=this.m10,d=this.m11;return this.m12=i*e+m*n+l*r+this.m12,this.m13=a*e+u*n+f*r+this.m13,this.m14=s*e+h*n+y*r+this.m14,this.m15=o*e+c*n+d*r+this.m15,this},n.scale=function(t){var e=t.x,n=t.y,r=t.z;return this.m00*=e,this.m01*=e,this.m02*=e,this.m03*=e,this.m04*=n,this.m05*=n,this.m06*=n,this.m07*=n,this.m08*=r,this.m09*=r,this.m10*=r,this.m11*=r,this},n.rotate=function(t,e){var n=e.x,r=e.y,i=e.z,a=Math.sqrt(n*n+r*r+i*i);if(Math.abs(a)<ur)return null;n*=a=1/a,r*=a,i*=a;var s=Math.sin(t),o=Math.cos(t),m=1-o,u=this.m00,h=this.m01,c=this.m02,l=this.m03,f=this.m04,y=this.m05,d=this.m06,v=this.m07,p=this.m08,g=this.m09,_=this.m10,x=this.m11,b=n*n*m+o,M=r*n*m+i*s,w=i*n*m-r*s,E=n*r*m-i*s,A=r*r*m+o,N=i*r*m+n*s,I=n*i*m+r*s,z=r*i*m-n*s,T=i*i*m+o;return this.m00=u*b+f*M+p*w,this.m01=h*b+y*M+g*w,this.m02=c*b+d*M+_*w,this.m03=l*b+v*M+x*w,this.m04=u*E+f*A+p*N,this.m05=h*E+y*A+g*N,this.m06=c*E+d*A+_*N,this.m07=l*E+v*A+x*N,this.m08=u*I+f*z+p*T,this.m09=h*I+y*z+g*T,this.m10=c*I+d*z+_*T,this.m11=l*I+v*z+x*T,this},n.getTranslation=function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t},n.getScale=function(t){var e=pi.m00=this.m00,n=pi.m01=this.m01,r=pi.m02=this.m02,i=pi.m03=this.m04,a=pi.m04=this.m05,s=pi.m05=this.m06,o=pi.m06=this.m08,m=pi.m07=this.m09,u=pi.m08=this.m10;return t.x=Math.sqrt(e*e+n*n+r*r),t.y=Math.sqrt(i*i+a*a+s*s),t.z=Math.sqrt(o*o+m*m+u*u),ei.determinant(pi)<0&&(t.x*=-1),t},n.getRotation=function(t){var e=Gr.set(vi,this.m00,this.m01,this.m02).length(),n=Gr.set(vi,this.m04,this.m05,this.m06).length(),r=Gr.set(vi,this.m08,this.m09,this.m10).length();return pi.m00=this.m00/e,pi.m01=this.m01/e,pi.m02=this.m02/e,pi.m03=this.m04/n,pi.m04=this.m05/n,pi.m05=this.m06/n,pi.m06=this.m08/r,pi.m07=this.m09/r,pi.m08=this.m10/r,ei.determinant(pi)<0&&(pi.m00*=-1,pi.m01*=-1,pi.m02*=-1),ai.fromMat3(t,pi)},n.fromRTS=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+d))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+d))*x,this.m06=(y+v)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-v)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromSRT=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,d=a*u,v=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+d))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+d))*x,this.m06=(y+v)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-v)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,d=i*s,v=i*o;return this.m00=1-h-f,this.m01=u+v,this.m02=c-d,this.m03=0,this.m04=u-v,this.m05=1-m-f,this.m06=l+y,this.m07=0,this.m08=c+d,this.m09=l-y,this.m10=1-m-h,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},e}(Ee));si=yi,yi.IDENTITY=Object.freeze(new si);var di,vi=new Gr,pi=new ei;function gi(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return new yi(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d)}pn.fastDefine("cc.Mat4",yi,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),i.Mat4=yi,i.mat4=gi;var _i,xi=t("V",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.x=e.x,r.y=e.y):(r.x=e||0,r.y=n||0),r}h(e,t),e.clone=function(t){return new e(t.x,t.y)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t},e.set=function(t,e,n){return t.x=e,t.y=n,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.len=function(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)},e.lengthSqr=function(t){var e=t.x,n=t.y;return e*e+n*n},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y;return Math.abs(n)<ur?t.x=0:t.x=1/n,Math.abs(r)<ur?t.y=0:t.y=1/r,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=n*n+r*r;return i>0?(i=1/Math.sqrt(i),t.x=n*i,t.y=r*i):(t.x=0,t.y=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.cross=function(t,e,n){return t instanceof Gr?(t.x=t.y=0,t.z=e.x*n.y-e.y*n.x,t):t.x*e.y-t.y*e.x},e.lerp=function(t,e,n,r){var i=e.x,a=e.y;return t.x=i+r*(n.x-i),t.y=a+r*(n.y-a),t},e.random=function(t,e){e=e||1;var n=2*pr()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m03*i+n.m06,t.y=n.m01*r+n.m04*i+n.m07,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m04*i+n.m12,t.y=n.m01*r+n.m05*i+n.m13,t},e.str=function(t){return"Vec2("+t.x+", "+t.y+")"},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y},e.equals=function(t,e,n){return void 0===n&&(n=ur),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y,r=e.x*e.x+e.y*e.y;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y)/Math.sqrt(n*r);return i=lr(i,-1,1),Math.acos(i)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y)},n.set=function(t,e){return"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=e||0),this},n.equals=function(t,e){return void 0===e&&(e=ur),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))},n.equals2f=function(t,e,n){return void 0===n&&(n=ur),Math.abs(this.x-t)<=n*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=n*Math.max(1,Math.abs(this.y),Math.abs(e))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y},n.strictEquals2f=function(t,e){return this.x===t&&this.y===e},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},n.lerp=function(t,e){var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},n.clampf=function(t,e){return this.x=lr(this.x,t.x,e.x),this.y=lr(this.y,t.y,e.y),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.add2f=function(t,e){return this.x+=t,this.y+=e,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.subtract2f=function(t,e){return this.x-=t,this.y-=e,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x*=t,this.y*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this},n.multiply2f=function(t,e){return this.x*=t,this.y*=e,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this},n.divide2f=function(t,e){return this.x/=t,this.y/=e,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y},n.normalize=function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x*=n,this.y*=n),this},n.angle=function(t){var e=this.lengthSqr(),n=t.lengthSqr();if(0===e||0===n)return 0;var r=this.dot(t)/Math.sqrt(e*n);return r=lr(r,-1,1),Math.acos(r)},n.signAngle=function(t){var e=this.cross(t),n=this.dot(t);return Math.atan2(e,n)},n.rotate=function(t){var e=this.x,n=this.y,r=Math.sin(t),i=Math.cos(t);return this.x=i*e-r*n,this.y=r*e+i*n,this},n.project=function(t){var e=this.dot(t)/t.dot(t);return this.x=t.x*e,this.y=t.y*e,this},n.transformMat4=function(t){var e=this.x,n=this.y;return this.x=t.m00*e+t.m04*n+t.m12,this.y=t.m01*e+t.m05*n+t.m13,this},e}(Ee));function bi(t,e){return new xi(t,e)}di=xi,xi.ZERO=Object.freeze(new di(0,0)),xi.ONE=Object.freeze(new di(1,1)),xi.NEG_ONE=Object.freeze(new di(-1,-1)),xi.UNIT_X=Object.freeze(new di(1,0)),xi.UNIT_Y=Object.freeze(new di(0,1)),pn.fastDefine("cc.Vec2",xi,{x:0,y:0}),i.Vec2=xi,i.v2=bi,Wn(xi,"Vec2",[{name:"sub",newName:"subtract",target:xi,targetName:"Vec2"},{name:"mul",newName:"multiply",target:xi,targetName:"Vec2"},{name:"div",newName:"divide",target:xi,targetName:"Vec2"},{name:"dist",newName:"distance",target:xi,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:xi,targetName:"Vec2"},{name:"mag",newName:"len",target:xi,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:xi,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:xi,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:xi,targetName:"Vec2"}]),Wn(xi.prototype,"Vec2",[{name:"mag",newName:"length",target:xi.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:xi.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:xi.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:xi.prototype,targetName:"Vec2"}]),Wn(Gr,"Vec3",[{name:"sub",newName:"subtract",target:Gr,targetName:"Vec3"},{name:"mul",newName:"multiply",target:Gr,targetName:"Vec3"},{name:"div",newName:"divide",target:Gr,targetName:"Vec3"},{name:"dist",newName:"distance",target:Gr,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:Gr,targetName:"Vec3"},{name:"mag",newName:"len",target:Gr,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:Gr,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Gr,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Gr,targetName:"Vec3"}]),Wn(Gr.prototype,"Vec3",[{name:"mag",newName:"length",target:Gr.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:Gr.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Gr.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Gr.prototype,targetName:"Vec3"}]),Wn(Br,"Vec4",[{name:"sub",newName:"subtract",target:Br,targetName:"Vec4"},{name:"mul",newName:"multiply",target:Br,targetName:"Vec4"},{name:"div",newName:"divide",target:Br,targetName:"Vec4"},{name:"dist",newName:"distance",target:Br,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:Br,targetName:"Vec4"},{name:"mag",newName:"len",target:Br,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:Br,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Br,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Br,targetName:"Vec4"}]),Wn(Br.prototype,"Vec4",[{name:"mag",newName:"length",target:Br.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:Br.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Br.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Br.prototype,targetName:"Vec4"}]),Wn(ai,"Quat",[{name:"mag",newName:"len",target:ai,targetName:"Quat"},{name:"mul",newName:"multiply",target:ai,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:ai,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:ai,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:ai,targetName:"Quat"}]),Wn(ai.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:ai.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:ai.prototype,targetName:"Quat"}]),Wn(Jr,"Color",[{name:"sub",newName:"subtract",target:Jr,targetName:"Color"},{name:"mul",newName:"multiply",target:Jr,targetName:"Color"},{name:"div",newName:"divide",target:Jr,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:Jr,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1].toString(16);return i.Color.fromHEX(e[0],r)}}]),Wn(ei,"Mat3",[{name:"sub",newName:"subtract",target:ei,targetName:"Mat3"},{name:"mul",newName:"multiply",target:ei,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:ei,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:ei,targetName:"Mat3"}]),Wn(ei.prototype,"Mat3",[{name:"sub",newName:"subtract",target:ei.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:ei.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:ei.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:ei.prototype,targetName:"Mat3"}]),Wn(yi,"Mat4",[{name:"sub",newName:"subtract",target:yi,targetName:"Mat4"},{name:"mul",newName:"multiply",target:yi,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:yi,targetName:"Mat4"}]),Wn(yi.prototype,"Mat4",[{name:"sub",newName:"subtract",target:yi.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:yi.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:yi.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:yi.prototype,targetName:"Mat4"}]),function(t){t[t.VEC2=0]="VEC2",t[t.VEC3=1]="VEC3",t[t.VEC4=2]="VEC4",t[t.QUATERNION=3]="QUATERNION",t[t.MAT3=4]="MAT3",t[t.MAT4=5]="MAT4",t[t.SIZE=6]="SIZE",t[t.RECT=7]="RECT",t[t.COLOR=8]="COLOR"}(_i||(_i={}));var Mi,wi=t("A",function(){function t(t,e,n,r,i,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=a}return t.identity=function(){return new t},t.clone=function(e){return new t(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.concat=function(t,e,n){var r=e.a,i=e.b,a=e.c,s=e.d,o=e.tx,m=e.ty;t.a=r*n.a+i*n.c,t.b=r*n.b+i*n.d,t.c=a*n.a+s*n.c,t.d=a*n.b+s*n.d,t.tx=o*n.a+m*n.c+n.tx,t.ty=o*n.b+m*n.d+n.ty},t.invert=function(t,e){var n=1/(e.a*e.d-e.b*e.c);t.a=n*e.d,t.b=-n*e.b,t.c=-n*e.c,t.d=n*e.a,t.tx=n*(e.c*e.ty-e.d*e.tx),t.ty=n*(e.b*e.tx-e.a*e.ty)},t.fromMat4=function(t,e){t.a=e.m00,t.b=e.m01,t.c=e.m04,t.d=e.m05,t.tx=e.m12,t.ty=e.m13},t.transformVec2=function(t,e,n,r){var i,a;r?(i=e,a=n):(r=n,i=e.x,a=e.y),t.x=r.a*i+r.c*a+r.tx,t.y=r.b*i+r.d*a+r.ty},t.transformSize=function(t,e,n){t.width=n.a*e.width+n.c*e.height,t.height=n.b*e.width+n.d*e.height},t.transformRect=function(t,e,n){var r=e.x+e.width,i=e.y+e.height,a=n.a*e.x+n.c*e.y+n.tx,s=n.b*e.x+n.d*e.y+n.ty,o=n.a*r+n.c*e.y+n.tx,m=n.b*r+n.d*e.y+n.ty,u=n.a*e.x+n.c*i+n.tx,h=n.b*e.x+n.d*i+n.ty,c=n.a*r+n.c*i+n.tx,l=n.b*r+n.d*i+n.ty,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),d=Math.min(s,m,h,l),v=Math.max(s,m,h,l);t.x=f,t.y=d,t.width=y-f,t.height=v-d},t.transformObb=function(t,e,n,r,i,a,s){void 0===s&&(s=!0);var o=a.a*i.x+a.c*i.y+a.tx,m=a.b*i.x+a.d*i.y+a.ty,u=a.a*i.width,h=a.b*i.width,c=a.c*i.height,l=a.d*i.height;s?(e.x=o,e.y=m,n.x=u+o,n.y=h+m,t.x=c+o,t.y=l+m,r.x=u+c+o,r.y=h+l+m):(t.x=o,t.y=m,r.x=u+o,r.y=h+m,e.x=c+o,e.y=l+m,n.x=u+c+o,n.y=h+l+m)},t}());i.AffineTransform=wi;var Ei=t("S",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.width=e.width,r.height=e.height):(r.width=e||0,r.height=n||0),r}h(e,t),e.lerp=function(t,e,n,r){return t.width=e.width+(n.width-e.width)*r,t.height=e.height+(n.height-e.height)*r,t},e.equals=function(t,e){return t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.width,this.height)},n.set=function(t,e){return"object"==typeof t?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=e||0),this},n.equals=function(t){return this.width===t.width&&this.height===t.height},n.lerp=function(t,e){return this.width+=(t.width-this.width)*e,this.height+=(t.height-this.height)*e,this},n.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},m(e,[{key:"x",get:function(){return this.width},set:function(t){this.width=t}},{key:"y",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ee));function Ai(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new Ei(t,e)}Mi=Ei,Ei.ZERO=Object.freeze(new Mi(0,0)),Ei.ONE=Object.freeze(new Mi(1,1)),pn.fastDefine("cc.Size",Ei,{width:0,height:0}),i.size=Ai,i.Size=Ei;var Ni=t("y",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.width=e.width,a.height=e.height):(a.x=e||0,a.y=n||0,a.width=r||0,a.height=i||0),a}h(e,t),e.fromMinMax=function(t,e,n){var r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),a=Math.max(e.x,n.x),s=Math.max(e.y,n.y);return t.x=r,t.y=i,t.width=a-r,t.height=s-i,t},e.lerp=function(t,e,n,r){var i=e.x,a=e.y,s=e.width,o=e.height;return t.x=i+(n.x-i)*r,t.y=a+(n.y-a)*r,t.width=s+(n.width-s)*r,t.height=o+(n.height-o)*r,t},e.intersection=function(t,e,n){var r=e.x,i=e.y,a=e.x+e.width,s=e.y+e.height,o=n.x,m=n.y,u=n.x+n.width,h=n.y+n.height;return t.x=Math.max(r,o),t.y=Math.max(i,m),t.width=Math.min(a,u)-t.x,t.height=Math.min(s,h)-t.y,t},e.union=function(t,e,n){var r=e.x,i=e.y,a=e.width,s=e.height,o=n.x,m=n.y,u=n.width,h=n.height;return t.x=Math.min(r,o),t.y=Math.min(i,m),t.width=Math.max(r+a,o+u)-t.x,t.height=Math.max(i+s,m+h)-t.y,t},e.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0),this},n.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.width,a=this.height;return this.x=n+(t.x-n)*e,this.y=r+(t.y-r)*e,this.width=i+(t.width-i)*e,this.height=a+(t.height-a)*e,this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},n.intersects=function(t){var e=this.x+this.width,n=this.y+this.height,r=t.x+t.width,i=t.y+t.height;return!(e<t.x||r<this.x||n<t.y||i<this.y)},n.contains=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},n.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},n.transformMat4=function(t){var e=this.x,n=this.y,r=e+this.width,i=n+this.height,a=t.m00*e+t.m04*n+t.m12,s=t.m01*e+t.m05*n+t.m13,o=t.m00*r+t.m04*n+t.m12,m=t.m01*r+t.m05*n+t.m13,u=t.m00*e+t.m04*i+t.m12,h=t.m01*e+t.m05*i+t.m13,c=t.m00*r+t.m04*i+t.m12,l=t.m01*r+t.m05*i+t.m13,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),d=Math.min(s,m,h,l),v=Math.max(s,m,h,l);return this.x=f,this.y=d,this.width=y-f,this.height=v-d,this},n.transformMat4ToPoints=function(t,e,n,r,i){var a=this.x,s=this.y,o=a+this.width,m=s+this.height;e.x=t.m00*a+t.m04*s+t.m12,e.y=t.m01*a+t.m05*s+t.m13,i.x=t.m00*o+t.m04*s+t.m12,i.y=t.m01*o+t.m05*s+t.m13,n.x=t.m00*a+t.m04*m+t.m12,n.y=t.m01*a+t.m05*m+t.m13,r.x=t.m00*o+t.m04*m+t.m12,r.y=t.m01*o+t.m05*m+t.m13},m(e,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new xi(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new xi(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new Ei(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",get:function(){return this.width},set:function(t){this.width=t}},{key:"w",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ee));function Ii(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),new Ni(t,e,n,r)}pn.fastDefine("cc.Rect",Ni,{x:0,y:0,width:0,height:0}),i.Rect=Ni,i.rect=Ii;var zi=t("aa",Float64Array),Ti=t("ab",function(t){function e(){return t.apply(this,arguments)||this}return h(e,t),e.createFloatArray=function(t){return new zi(t)},m(e,[{key:"array",get:function(){return this._array}}]),e}(Ee)),Oi=Object.freeze({__proto__:null,bits:Gn,Vec2:xi,v2:bi,Vec3:Gr,v3:Wr,Vec4:Br,v4:Dr,Quat:ai,quat:li,Mat3:ei,Mat4:yi,mat4:gi,AffineTransform:wi,Size:Ei,size:Ai,Rect:Ni,rect:Ii,Color:Jr,color:$r,preTransforms:fi,HALF_PI:or,TWO_PI:mr,EPSILON:ur,equals:hr,approx:cr,clamp:lr,clamp01:fr,lerp:yr,toRadian:dr,toDegree:vr,random:pr,setRandGenerator:gr,randomRange:_r,randomRangeInt:xr,pseudoRandom:br,pseudoRandomRange:Mr,pseudoRandomRangeInt:wr,nextPow2:Er,repeat:Ar,pingPong:Nr,inverseLerp:Ir,absMaxComponent:zr,absMax:Tr,enumerableProps:Or,floatToHalf:Lr,halfToFloat:kr,MATH_FLOAT_ARRAY:zi,MathBase:Ti});t("m",Oi);var Si=new Gr,Pi=new Gr,Ci=new Gr,Ri=new Gr,Ui=new Gr,Li=new Gr,ki=new Array(3),Fi=new Array(3);function Bi(t,e){return Gr.dot(e.n,t)-e.d}function Di(t,e,n){return Gr.copy(t,e),Gr.subtract(Ui,n.center,n.halfExtents),Gr.add(Li,n.center,n.halfExtents),t.x=t.x<Ui.x?Ui.x:t.x,t.y=t.y<Ui.y?Ui.y:t.y,t.z=t.z<Ui.z?Ui.z:t.z,t.x=t.x>Li.x?Li.x:t.x,t.y=t.y>Li.y?Li.y:t.y,t.z=t.z>Li.z?Li.z:t.z,t}function Hi(t,e,n){Gr.set(Si,n.orientation.m00,n.orientation.m01,n.orientation.m02),Gr.set(Pi,n.orientation.m03,n.orientation.m04,n.orientation.m05),Gr.set(Ci,n.orientation.m06,n.orientation.m07,n.orientation.m08),ki[0]=Si,ki[1]=Pi,ki[2]=Ci,Fi[0]=n.halfExtents.x,Fi[1]=n.halfExtents.y,Fi[2]=n.halfExtents.z,Gr.subtract(Ri,e,n.center),Gr.set(t,n.center.x,n.center.y,n.center.z);for(var r=0;r<3;r++){var i=Gr.dot(Ri,ki[r]);i>Fi[r]&&(i=Fi[r]),i<-Fi[r]&&(i=-Fi[r]),t.x+=i*ki[r].x,t.y+=i*ki[r].y,t.z+=i*ki[r].z}return t}var qi=Object.freeze({__proto__:null,point_plane:Bi,pt_point_plane:function(t,e,n){var r=Bi(e,n);return Gr.subtract(t,e,Gr.multiplyScalar(t,n.n,r))},pt_point_aabb:Di,pt_point_obb:Hi,pt_point_line:function(t,e,n,r){Gr.subtract(Si,n,r);var i=Si.clone(),a=Gr.lengthSqr(i);if(0===a)Gr.copy(t,n);else{Gr.subtract(Si,e,n);var s=Gr.dot(Si,i)/a;s<0?Gr.copy(t,n):s>1?Gr.copy(t,r):Gr.scaleAndAdd(t,n,i,s)}}}),ji={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256,SHAPE_CAPSULE:512,SHAPE_SPLINE:1024},Vi=function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=ji.SHAPE_LINE,this.s=new Gr(t,e,n),this.e=new Gr(r,i,a)}return t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.s.x,e.s.y,e.s.z,e.e.x,e.e.y,e.e.z)},t.copy=function(t,e){return Gr.copy(t.s,e.s),Gr.copy(t.e,e.e),t},t.fromPoints=function(t,e,n){return Gr.copy(t.s,e),Gr.copy(t.e,n),t},t.set=function(t,e,n,r,i,a,s){return t.s.x=e,t.s.y=n,t.s.z=r,t.e.x=i,t.e.y=a,t.e.z=s,t},t.len=function(t){return Gr.distance(t.s,t.e)},t.prototype.length=function(){return Gr.distance(this.s,this.e)},m(t,[{key:"type",get:function(){return this._type}}]),t}(),Gi=t("bB",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=ji.SHAPE_RAY,this.o=new Gr(t,e,n),this.d=new Gr(r,i,a)}return t.create=function(e,n,r,i,a,s){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.o.x,e.o.y,e.o.z,e.d.x,e.d.y,e.d.z)},t.copy=function(t,e){return Gr.copy(t.o,e.o),Gr.copy(t.d,e.d),t},t.fromPoints=function(t,e,n){return Gr.copy(t.o,e),Gr.normalize(t.d,Gr.subtract(t.d,n,e)),t},t.set=function(t,e,n,r,i,a,s){return t.o.x=e,t.o.y=n,t.o.z=r,t.d.x=i,t.d.y=a,t.d.z=s,t},t.prototype.computeHit=function(t,e){Gr.normalize(t,this.d),Gr.scaleAndAdd(t,this.o,t,e)},m(t,[{key:"type",get:function(){return this._type}}]),t}()),Wi=new Gr,Ki=new Gr,Qi=new Gr,Yi=new Gr;function Xi(t){return Math.max(Math.max(t.x,t.y),t.z)}var Zi,Ji,$i,ta,ea,na=t("c4",function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this._center=new Gr(0,0,0),this._radius=0,this._type=void 0,this._type=ji.SHAPE_SPHERE,this._center=new Gr(t,e,n),this._radius=r}t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.radius)},t.copy=function(t,e){return Gr.copy(t.center,e.center),t.radius=e.radius,t},t.fromPoints=function(t,e,n){return Gr.multiplyScalar(t.center,Gr.add(Wi,e,n),.5),t.radius=.5*Gr.subtract(Wi,n,e).length(),t},t.set=function(t,e,n,r,i){return t.center.x=e,t.center.y=n,t.center.z=r,t.radius=i,t};var e=t.prototype;return e.destroy=function(){},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.getBoundary=function(t,e){Gr.set(t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),Gr.set(e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},e.transform=function(t,e,n,r,i){Gr.transformMat4(i.center,this.center,t),i.radius=this.radius*Xi(r)},e.translateAndRotate=function(t,e,n){Gr.transformMat4(n.center,this.center,t)},e.setScale=function(t,e){e.radius=this.radius*Xi(t)},e.mergePoint=function(t){this.radius<0&&(this.center.set(t),this.radius=0),Gr.subtract(Ki,t,this.center);var e=Ki.length();if(e>this.radius){var n=.5*(e-this.radius);this.radius+=n,Gr.multiplyScalar(Ki,Ki,n/e),Gr.add(this.center,this.center,Ki)}},e.mergePoints=function(t){var e=t.length;if(!(e<1)){this.radius=-1;for(var n=0;n<e;n++)this.mergePoint(t[n])}},e.mergeAABB=function(t){t.getBoundary(Qi,Yi),this.mergePoint(Qi),this.mergePoint(Yi)},m(t,[{key:"center",get:function(){return this._center},set:function(t){this._center=t}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t}},{key:"type",get:function(){return this._type}}]),t}()),ra=function(t,e){var n=Gr.dot(t.d,e.n);if(Math.abs(n)<Number.EPSILON)return 0;var r=-Bi(t.o,e)/n;return r<0?0:r},ia=(Zi=new Gr(0,0,0),Ji=new Gr(0,0,0),$i=new Gr(0,0,0),ta=new Gr(0,0,0),ea=new Gr(0,0,0),function(t,e,n){Gr.subtract(Zi,e.b,e.a),Gr.subtract(Ji,e.c,e.a),Gr.cross($i,t.d,Ji);var r=Gr.dot(Zi,$i);if(r<Number.EPSILON&&(!n||r>-Number.EPSILON))return 0;var i=1/r;Gr.subtract(ta,t.o,e.a);var a=Gr.dot(ta,$i)*i;if(a<0||a>1)return 0;Gr.cross(ea,ta,Zi);var s=Gr.dot(t.d,ea)*i;if(s<0||a+s>1)return 0;var o=Gr.dot(Ji,ea)*i;return o<0?0:o}),aa=function(){var t=new Gr(0,0,0);return function(e,n){var r=n.radius,i=n.center,a=e.o,s=e.d,o=r*r;Gr.subtract(t,i,a);var m=t.lengthSqr(),u=Gr.dot(t,s),h=o-(m-u*u);if(h<0)return 0;var c=Math.sqrt(h),l=m<o?u+c:u-c;return l<0?0:l}}(),sa=function(){var t=new Gr,e=new Gr;return function(n,r){return Gr.subtract(t,r.center,r.halfExtents),Gr.add(e,r.center,r.halfExtents),function(t,e,n){var r=t.o,i=t.d,a=1/i.x,s=1/i.y,o=1/i.z,m=(e.x-r.x)*a,u=(n.x-r.x)*a,h=(e.y-r.y)*s,c=(n.y-r.y)*s,l=(e.z-r.z)*o,f=(n.z-r.z)*o,y=Math.max(Math.max(Math.min(m,u),Math.min(h,c)),Math.min(l,f)),d=Math.min(Math.min(Math.max(m,u),Math.max(h,c)),Math.max(l,f));return d<0||y>d?0:y>0?y:d}(n,t,e)}}(),oa=function(){var t=new Gr,e=new Gr,n=new Gr,r=new Gr,i=new Gr,a=new Gr,s=new Gr,o=new Array(3),m=new Array(3),u=new Array(3),h=new Array(6);return function(c,l){o[0]=l.halfExtents.x,o[1]=l.halfExtents.y,o[2]=l.halfExtents.z,t=l.center,e=c.o,n=c.d,Gr.set(r,l.orientation.m00,l.orientation.m01,l.orientation.m02),Gr.set(i,l.orientation.m03,l.orientation.m04,l.orientation.m05),Gr.set(a,l.orientation.m06,l.orientation.m07,l.orientation.m08),Gr.subtract(s,t,e),m[0]=Gr.dot(r,n),m[1]=Gr.dot(i,n),m[2]=Gr.dot(a,n),u[0]=Gr.dot(r,s),u[1]=Gr.dot(i,s),u[2]=Gr.dot(a,s);for(var f=0;f<3;++f){if(0===m[f]){if(-u[f]-o[f]>0||-u[f]+o[f]<0)return 0;m[f]=1e-7}h[2*f+0]=(u[f]+o[f])/m[f],h[2*f+1]=(u[f]-o[f])/m[f]}var y=Math.max(Math.max(Math.min(h[0],h[1]),Math.min(h[2],h[3])),Math.min(h[4],h[5])),d=Math.min(Math.min(Math.max(h[0],h[1]),Math.max(h[2],h[3])),Math.max(h[4],h[5]));return d<0||y>d?0:y>0?y:d}}(),ma=function(){var t=new Gr,e=new Gr,n=new Gr,r=new Gr,i=new Gr,a=new Gr,s=new Gr,o=new na;return function(m,u){var h=u.ellipseCenter0,c=u.ellipseCenter1,l=Gr.subtract(e,c,h);if(l.length()<ur)return o.radius=u.radius,o.center.set(u.ellipseCenter0),Ga.raySphere(m,o);var f=m.o,y=Gr.subtract(n,f,h),d=Gr.normalize(t,m.d),v=Gr.cross(r,d,l),p=v.lengthSqr();if(0===p){o.radius=u.radius;var g=Gr.subtract(i,c,f);return y.lengthSqr()<g.lengthSqr()?o.center.set(h):o.center.set(c),Ga.raySphere(m,o)}var _=Gr.cross(i,y,l),x=l.lengthSqr(),b=2*Gr.dot(v,_),M=u.radius*u.radius,w=b*b-4*p*(_.lengthSqr()-M*x);if(w<0)return 0;var E=(-b-Math.sqrt(w))/(2*p);if(E<0){o.radius=u.radius;var A=Gr.subtract(a,c,f);return y.lengthSqr()<A.lengthSqr()?o.center.set(u.ellipseCenter0):o.center.set(u.ellipseCenter1),Ga.raySphere(m,o)}var N=Gr.scaleAndAdd(a,m.o,d,E),I=Gr.subtract(s,N,h),z=Gr.dot(I,l)/x;return z>=0&&z<=1?E:z<0?(o.radius=u.radius,o.center.set(u.ellipseCenter0),Ga.raySphere(m,o)):z>1?(o.radius=u.radius,o.center.set(u.ellipseCenter1),Ga.raySphere(m,o)):0}}(),ua=function(){var t=new Gr(0,0,0);return function(e,n){Gr.subtract(t,e.e,e.s);var r=-Bi(e.s,n)/Gr.dot(t,n.n);return r<0||r>1?0:r}}(),ha=function(){var t=new Gr(0,0,0),e=new Gr(0,0,0),n=new Gr(0,0,0),r=new Gr(0,0,0),i=new Gr(0,0,0),a=new Gr(0,0,0);return function(s,o,m){Gr.subtract(t,o.b,o.a),Gr.subtract(e,o.c,o.a),Gr.subtract(n,s.s,s.e),Gr.cross(i,t,e);var u=Gr.dot(n,i);if(u<=0)return 0;Gr.subtract(r,s.s,o.a);var h=Gr.dot(r,i);if(h<0||h>u)return 0;Gr.cross(a,n,r);var c=Gr.dot(e,a);if(c<0||c>u)return 0;var l=-Gr.dot(t,a);if(l<0||c+l>u)return 0;if(m){var f=1/u,y=1-(c*=f)-(l*=f);Gr.set(m,o.a.x*y+o.b.x*c+o.c.x*l,o.a.y*y+o.b.y*c+o.c.y*l,o.a.z*y+o.b.z*c+o.c.z*l)}return 1}}(),ca=new Gi;function la(t,e){ca.o.set(t.s),Gr.subtract(ca.d,t.e,t.s),ca.d.normalize();var n=sa(ca,e);return n<=t.length()?n:0}function fa(t,e){ca.o.set(t.s),Gr.subtract(ca.d,t.e,t.s),ca.d.normalize();var n=oa(ca,e);return n<=t.length()?n:0}function ya(t,e){ca.o.set(t.s),Gr.subtract(ca.d,t.e,t.s),ca.d.normalize();var n=aa(ca,e);return n<=t.length()?n:0}var da,va,pa,ga,_a=(da=new Gr,va=new Gr,pa=new Gr,ga=new Gr,function(t,e){return Gr.subtract(da,t.center,t.halfExtents),Gr.add(va,t.center,t.halfExtents),Gr.subtract(pa,e.center,e.halfExtents),Gr.add(ga,e.center,e.halfExtents),da.x<=ga.x&&va.x>=pa.x&&da.y<=ga.y&&va.y>=pa.y&&da.z<=ga.z&&va.z>=pa.z});function xa(t,e,n,r,i,a){Gr.set(a[0],t.x+n.x*e.x+r.x*e.y+i.x*e.z,t.y+n.y*e.x+r.y*e.y+i.y*e.z,t.z+n.z*e.x+r.z*e.y+i.z*e.z),Gr.set(a[1],t.x-n.x*e.x+r.x*e.y+i.x*e.z,t.y-n.y*e.x+r.y*e.y+i.y*e.z,t.z-n.z*e.x+r.z*e.y+i.z*e.z),Gr.set(a[2],t.x+n.x*e.x-r.x*e.y+i.x*e.z,t.y+n.y*e.x-r.y*e.y+i.y*e.z,t.z+n.z*e.x-r.z*e.y+i.z*e.z),Gr.set(a[3],t.x+n.x*e.x+r.x*e.y-i.x*e.z,t.y+n.y*e.x+r.y*e.y-i.y*e.z,t.z+n.z*e.x+r.z*e.y-i.z*e.z),Gr.set(a[4],t.x-n.x*e.x-r.x*e.y-i.x*e.z,t.y-n.y*e.x-r.y*e.y-i.y*e.z,t.z-n.z*e.x-r.z*e.y-i.z*e.z),Gr.set(a[5],t.x+n.x*e.x-r.x*e.y-i.x*e.z,t.y+n.y*e.x-r.y*e.y-i.y*e.z,t.z+n.z*e.x-r.z*e.y-i.z*e.z),Gr.set(a[6],t.x-n.x*e.x+r.x*e.y-i.x*e.z,t.y-n.y*e.x+r.y*e.y-i.y*e.z,t.z-n.z*e.x+r.z*e.y-i.z*e.z),Gr.set(a[7],t.x-n.x*e.x-r.x*e.y+i.x*e.z,t.y-n.y*e.x-r.y*e.y+i.y*e.z,t.z-n.z*e.x-r.z*e.y+i.z*e.z)}function ba(t,e){for(var n=Gr.dot(e,t[0]),r=n,i=1;i<8;++i){var a=Gr.dot(e,t[i]);n=a<n?a:n,r=a>r?a:r}return[n,r]}var Ma,wa,Ea,Aa,Na,Ia=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new Gr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new Gr(0,0,0),r[i]=new Gr(0,0,0);var a=new Gr,s=new Gr;return function(e,i){Gr.set(t[0],1,0,0),Gr.set(t[1],0,1,0),Gr.set(t[2],0,0,1),Gr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),Gr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),Gr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var o=0;o<3;++o)Gr.cross(t[6+3*o],t[o],t[3]),Gr.cross(t[7+3*o],t[o],t[4]),Gr.cross(t[7+3*o],t[o],t[5]);Gr.subtract(a,e.center,e.halfExtents),Gr.add(s,e.center,e.halfExtents),function(t,e,n){Gr.set(n[0],t.x,e.y,e.z),Gr.set(n[1],t.x,e.y,t.z),Gr.set(n[2],t.x,t.y,e.z),Gr.set(n[3],t.x,t.y,t.z),Gr.set(n[4],e.x,e.y,e.z),Gr.set(n[5],e.x,e.y,t.z),Gr.set(n[6],e.x,t.y,e.z),Gr.set(n[7],e.x,t.y,t.z)}(a,s,n),xa(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var m=0;m<15;++m){var u=ba(n,t[m]),h=ba(r,t[m]);if(h[0]>u[1]||u[0]>h[1])return 0}return 1}}(),za=function(t,e){var n=t.halfExtents.x*Math.abs(e.n.x)+t.halfExtents.y*Math.abs(e.n.y)+t.halfExtents.z*Math.abs(e.n.z),r=Gr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1},Ta=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===za(t,e.planes[n]))return 0;return 1},Oa=function(){for(var t=new Array(8),e=0,n=0,r=0;r<t.length;r++)t[r]=new Gr(0,0,0);return function(r,i){for(var a=0,s=!1,o=0;o<i.planes.length;o++){if(-1===(a=za(r,i.planes[o])))return 0;1===a&&(s=!0)}if(!s)return 1;for(var m=0;m<i.vertices.length;m++)Gr.subtract(t[m],i.vertices[m],r.center);e=0,n=0;for(var u=0;u<i.vertices.length;u++)t[u].x>r.halfExtents.x?e++:t[u].x<-r.halfExtents.x&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var h=0;h<i.vertices.length;h++)t[h].y>r.halfExtents.y?e++:t[h].y<-r.halfExtents.y&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var c=0;c<i.vertices.length;c++)t[c].z>r.halfExtents.z?e++:t[c].z<-r.halfExtents.z&&n++;return e===i.vertices.length||n===i.vertices.length?0:1}}(),Sa=(Ma=new Gr(0,0,0),wa=new ei,function(t,e){return Gr.subtract(Ma,e,t.center),Gr.transformMat3(Ma,Ma,ei.transpose(wa,t.orientation)),n=Ma,r=t.halfExtents,Math.abs(n.x)<r.x&&Math.abs(n.y)<r.y&&Math.abs(n.z)<r.z;var n,r}),Pa=(Ea=function(t,e,n,r){return Math.abs(t.x*e+t.y*n+t.z*r)},function(t,e){var n=t.halfExtents.x*Ea(e.n,t.orientation.m00,t.orientation.m01,t.orientation.m02)+t.halfExtents.y*Ea(e.n,t.orientation.m03,t.orientation.m04,t.orientation.m05)+t.halfExtents.z*Ea(e.n,t.orientation.m06,t.orientation.m07,t.orientation.m08),r=Gr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1}),Ca=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===Pa(t,e.planes[n]))return 0;return 1},Ra=function(){for(var t=new Array(8),e=0,n=0,r=0,i=0;i<t.length;i++)t[i]=new Gr(0,0,0);var a=function(t,e,n,r){return t.x*e+t.y*n+t.z*r};return function(i,s){for(var o=0,m=!1,u=0;u<s.planes.length;u++){if(-1===(o=Pa(i,s.planes[u])))return 0;1===o&&(m=!0)}if(!m)return 1;for(var h=0;h<s.vertices.length;h++)Gr.subtract(t[h],s.vertices[h],i.center);n=0,r=0;for(var c=0;c<s.vertices.length;c++)(e=a(t[c],i.orientation.m00,i.orientation.m01,i.orientation.m02))>i.halfExtents.x?n++:e<-i.halfExtents.x&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var l=0;l<s.vertices.length;l++)(e=a(t[l],i.orientation.m03,i.orientation.m04,i.orientation.m05))>i.halfExtents.y?n++:e<-i.halfExtents.y&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var f=0;f<s.vertices.length;f++)(e=a(t[f],i.orientation.m06,i.orientation.m07,i.orientation.m08))>i.halfExtents.z?n++:e<-i.halfExtents.z&&r++;return n===s.vertices.length||r===s.vertices.length?0:1}}(),Ua=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new Gr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new Gr(0,0,0),r[i]=new Gr(0,0,0);return function(e,i){Gr.set(t[0],e.orientation.m00,e.orientation.m01,e.orientation.m02),Gr.set(t[1],e.orientation.m03,e.orientation.m04,e.orientation.m05),Gr.set(t[2],e.orientation.m06,e.orientation.m07,e.orientation.m08),Gr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),Gr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),Gr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var a=0;a<3;++a)Gr.cross(t[6+3*a],t[a],t[3]),Gr.cross(t[7+3*a],t[a],t[4]),Gr.cross(t[8+3*a],t[a],t[5]);xa(e.center,e.halfExtents,t[0],t[1],t[2],n),xa(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var s=0;s<15;++s){var o=ba(n,t[s]),m=ba(r,t[s]);if(m[0]>o[1]||o[0]>m[1])return 0}return 1}}(),La=function(){for(var t=new na,e=new Gr,n=new Gr,r=new Gr,i=new Array(8),a=0;a<8;a++)i[a]=new Gr;for(var s=new Array(8),o=0;o<8;o++)s[o]=new Gr;return function(a,o){if(0===Gr.squaredDistance(o.ellipseCenter0,o.ellipseCenter1))return t.radius=o.radius,t.center.set(o.ellipseCenter0),Ga.sphereOBB(t,a);e.x=a.orientation.m00,e.y=a.orientation.m01,e.z=a.orientation.m02,n.x=a.orientation.m03,n.y=a.orientation.m04,n.z=a.orientation.m05,r.x=a.orientation.m06,r.y=a.orientation.m07,r.z=a.orientation.m08,xa(a.center,a.halfExtents,e,n,r,i);var m=s,u=Gr.copy(m[0],e),h=Gr.copy(m[1],n),c=Gr.copy(m[2],r);Gr.subtract(m[3],o.center,a.center).normalize();var l=Gr.subtract(m[4],o.ellipseCenter0,o.ellipseCenter1);l.normalize(),Gr.cross(m[5],u,l),Gr.cross(m[6],h,l),Gr.cross(m[7],c,l);for(var f=0;f<8;++f){var y=ba(i,m[f]),d=Gr.dot(m[f],o.ellipseCenter0),v=Gr.dot(m[f],o.ellipseCenter1),p=Math.max(d,v),g=Math.min(d,v)-o.radius,_=p+o.radius;if(g>y[1]||y[0]>_)return 0}return 1}}(),ka=function(t,e){var n=Gr.dot(e.n,t.center),r=t.radius*e.n.length();return n+r<e.d?-1:n-r>e.d?0:1},Fa=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===ka(t,e.planes[n]))return 0;return 1},Ba=(Aa=new Gr(0,0,0),Na=[1,-1,1,-1,1,-1],function(t,e){for(var n=0;n<6;n++){var r=e.planes[n],i=t.radius,a=t.center,s=r.n,o=r.d,m=Gr.dot(s,a);if(m+i<o)return 0;if(!(m-i>o)){Gr.add(Aa,a,Gr.multiplyScalar(Aa,s,i));for(var u=0;u<6;u++)if(u!==n&&u!==n+Na[n]){var h=e.planes[u];if(Gr.dot(h.n,Aa)<h.d)return 0}}}return 1}),Da=function(t,e){var n=t.radius+e.radius;return Gr.squaredDistance(t.center,e.center)<n*n},Ha=function(){var t=new Gr;return function(e,n){return Di(t,e.center,n),Gr.squaredDistance(e.center,t)<e.radius*e.radius}}(),qa=function(){var t=new Gr;return function(e,n){return Hi(t,e.center,n),Gr.squaredDistance(e.center,t)<e.radius*e.radius}}(),ja=function(){var t=new Gr,e=new Gr;return function(n,r){var i=n.radius+r.radius,a=i*i,s=Gr.squaredDistance(r.ellipseCenter0,r.ellipseCenter1);if(0===s)return Gr.squaredDistance(n.center,r.center)<a;Gr.subtract(t,n.center,r.ellipseCenter0),Gr.subtract(e,r.ellipseCenter1,r.ellipseCenter0);var o=Gr.dot(t,e)/s;return o<0?Gr.squaredDistance(n.center,r.ellipseCenter0)<a:o>1?Gr.squaredDistance(n.center,r.ellipseCenter1)<a:(Gr.scaleAndAdd(t,r.ellipseCenter0,e,o),Gr.squaredDistance(n.center,t)<a)}}(),Va=function(){var t=new Gr,e=new Gr,n=new Gr,r=new Gr,i=new Gr,a=new Gr;return function(s,o){var m,u,h=Gr.subtract(t,s.ellipseCenter1,s.ellipseCenter0),c=Gr.subtract(e,o.ellipseCenter1,o.ellipseCenter0),l=Gr.subtract(n,s.ellipseCenter0,o.ellipseCenter0),f=Gr.dot(h,h),y=Gr.dot(h,c),d=Gr.dot(c,c),v=Gr.dot(h,l),p=Gr.dot(c,l),g=f*d-y*y,_=g,x=g;g<ur?(m=0,_=1,u=p,x=d):(u=f*p-y*v,(m=y*p-d*v)<0?(m=0,u=p,x=d):m>_&&(m=_,u=p+y,x=d)),u<0?(u=0,-v<0?m=0:-v>f?m=_:(m=-v,_=f)):u>x&&(u=x,-v+y<0?m=0:-v+y>f?m=_:(m=-v+y,_=f));var b=Math.abs(m)<ur?0:m/_,M=Math.abs(u)<ur?0:u/x,w=r;w.set(l),w.add(Gr.multiplyScalar(i,h,b)),w.subtract(Gr.multiplyScalar(a,c,M));var E=s.radius+o.radius;return w.lengthSqr()<E*E}}(),Ga=t("c7",{raySphere:aa,rayAABB:sa,rayOBB:oa,rayPlane:ra,rayTriangle:ia,rayCapsule:ma,raySubMesh:null,rayMesh:null,rayModel:null,lineSphere:ya,lineAABB:la,lineOBB:fa,linePlane:ua,lineTriangle:ha,sphereWithSphere:Da,sphereAABB:Ha,sphereOBB:qa,spherePlane:ka,sphereFrustum:Fa,sphereFrustumAccurate:Ba,sphereCapsule:ja,aabbWithAABB:_a,aabbWithOBB:Ia,aabbPlane:za,aabbFrustum:Ta,aabbFrustumAccurate:Oa,obbWithOBB:Ua,obbPlane:Pa,obbFrustum:Ca,obbFrustumAccurate:Ra,obbPoint:Sa,obbCapsule:La,aabbFrustumCompletelyInside:function(t,e){for(var n=0;n<e.planes.length;n++)if(0!==za(t,e.planes[n]))return 0;return 1},capsuleWithCapsule:Va,resolve:function(t,e,n){void 0===n&&(n=null);var r=t._type,i=e._type,a=this[r|i];return r<i?a(t,e,n):a(e,t,n)}});Ga[ji.SHAPE_RAY|ji.SHAPE_SPHERE]=aa,Ga[ji.SHAPE_RAY|ji.SHAPE_AABB]=sa,Ga[ji.SHAPE_RAY|ji.SHAPE_OBB]=oa,Ga[ji.SHAPE_RAY|ji.SHAPE_PLANE]=ra,Ga[ji.SHAPE_RAY|ji.SHAPE_TRIANGLE]=ia,Ga[ji.SHAPE_RAY|ji.SHAPE_CAPSULE]=ma,Ga[ji.SHAPE_LINE|ji.SHAPE_SPHERE]=ya,Ga[ji.SHAPE_LINE|ji.SHAPE_AABB]=la,Ga[ji.SHAPE_LINE|ji.SHAPE_OBB]=fa,Ga[ji.SHAPE_LINE|ji.SHAPE_PLANE]=ua,Ga[ji.SHAPE_LINE|ji.SHAPE_TRIANGLE]=ha,Ga[ji.SHAPE_SPHERE]=Da,Ga[ji.SHAPE_SPHERE|ji.SHAPE_AABB]=Ha,Ga[ji.SHAPE_SPHERE|ji.SHAPE_OBB]=qa,Ga[ji.SHAPE_SPHERE|ji.SHAPE_PLANE]=ka,Ga[ji.SHAPE_SPHERE|ji.SHAPE_FRUSTUM]=Fa,Ga[ji.SHAPE_SPHERE|ji.SHAPE_FRUSTUM_ACCURATE]=Ba,Ga[ji.SHAPE_SPHERE|ji.SHAPE_CAPSULE]=ja,Ga[ji.SHAPE_AABB]=_a,Ga[ji.SHAPE_AABB|ji.SHAPE_OBB]=Ia,Ga[ji.SHAPE_AABB|ji.SHAPE_PLANE]=za,Ga[ji.SHAPE_AABB|ji.SHAPE_FRUSTUM]=Ta,Ga[ji.SHAPE_AABB|ji.SHAPE_FRUSTUM_ACCURATE]=Oa,Ga[ji.SHAPE_OBB]=Ua,Ga[ji.SHAPE_OBB|ji.SHAPE_PLANE]=Pa,Ga[ji.SHAPE_OBB|ji.SHAPE_FRUSTUM]=Ca,Ga[ji.SHAPE_OBB|ji.SHAPE_FRUSTUM_ACCURATE]=Ra,Ga[ji.SHAPE_OBB|ji.SHAPE_CAPSULE]=La,Ga[ji.SHAPE_CAPSULE]=Va,Wn(Vi.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),Kn(Ga,"intersect",[{name:"line_quad"}]);var Wa=new Gr(0,0,0),Ka=new Gr(0,0,0),Qa=i.mat4(),Ya=i.v4(),Xa=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),this.n=void 0,this._type=ji.SHAPE_PLANE,this.n=new Gr(t,e,n),this.d=r}return t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.n.x,e.n.y,e.n.z,e.d)},t.copy=function(t,e){return Gr.copy(t.n,e.n),t.d=e.d,t},t.fromPoints=function(t,e,n,r){return Gr.subtract(Wa,n,e),Gr.subtract(Ka,r,e),Gr.normalize(t.n,Gr.cross(t.n,Wa,Ka)),t.d=Gr.dot(t.n,e),t},t.set=function(t,e,n,r,i){return t.n.x=e,t.n.y=n,t.n.z=r,t.d=i,t},t.fromNormalAndPoint=function(t,e,n){return Gr.copy(t.n,e),t.d=Gr.dot(e,n),t},t.normalize=function(t,e){var n=e.n.length();return Gr.normalize(t.n,e.n),n>0&&(t.d=e.d/n),t},t.prototype.transform=function(t){yi.invert(Qa,t),yi.transpose(Qa,Qa),Br.set(Ya,this.n.x,this.n.y,this.n.z,-this.d),Br.transformMat4(Ya,Ya,Qa),Gr.set(this.n,Ya.x,Ya.y,Ya.z),this.d=-Ya.w},m(t,[{key:"type",get:function(){return this._type}},{key:"x",get:function(){return this.n.x},set:function(t){this.n.x=t}},{key:"y",get:function(){return this.n.y},set:function(t){this.n.y=t}},{key:"z",get:function(){return this.n.z},set:function(t){this.n.z=t}},{key:"w",get:function(){return this.d},set:function(t){this.d=t}}]),t}(),Za=t("cr",function(){function t(t,e,n,r,i,a,s,o,m){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=1),void 0===m&&(m=0),this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this._type=ji.SHAPE_TRIANGLE,this.a=new Gr(t,e,n),this.b=new Gr(r,i,a),this.c=new Gr(s,o,m)}return t.create=function(e,n,r,i,a,s,o,m,u){return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),new t(e,n,r,i,a,s,o,m,u)},t.clone=function(e){return new t(e.a.x,e.a.y,e.a.z,e.b.x,e.b.y,e.b.z,e.c.x,e.c.y,e.c.z)},t.copy=function(t,e){return Gr.copy(t.a,e.a),Gr.copy(t.b,e.b),Gr.copy(t.c,e.c),t},t.fromPoints=function(t,e,n,r){return Gr.copy(t.a,e),Gr.copy(t.b,n),Gr.copy(t.c,r),t},t.set=function(t,e,n,r,i,a,s,o,m,u){return t.a.x=e,t.a.y=n,t.a.z=r,t.b.x=i,t.b.y=a,t.b.z=s,t.c.x=o,t.c.y=m,t.c.z=u,t},m(t,[{key:"type",get:function(){return this._type}}]),t}()),Ja=new Gr,$a=new Gr,ts=new Gr,es=new Gr,ns=new ei,rs=function(t,e,n){ns.m00=Math.abs(n.m00),ns.m01=Math.abs(n.m01),ns.m02=Math.abs(n.m02),ns.m03=Math.abs(n.m04),ns.m04=Math.abs(n.m05),ns.m05=Math.abs(n.m06),ns.m06=Math.abs(n.m08),ns.m07=Math.abs(n.m09),ns.m08=Math.abs(n.m10),Gr.transformMat3(t,e,ns)},is=t("c5",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=ji.SHAPE_AABB,this.center=new Gr(t,e,n),this.halfExtents=new Gr(r,i,a)}t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z)},t.copy=function(t,e){return Gr.copy(t.center,e.center),Gr.copy(t.halfExtents,e.halfExtents),t},t.fromPoints=function(t,e,n){return Gr.add(Ja,n,e),Gr.subtract($a,n,e),Gr.multiplyScalar(t.center,Ja,.5),Gr.multiplyScalar(t.halfExtents,$a,.5),t},t.set=function(t,e,n,r,i,a,s){return t.center.set(e,n,r),t.halfExtents.set(i,a,s),t},t.merge=function(e,n,r){return Gr.subtract(Ja,n.center,n.halfExtents),Gr.subtract($a,r.center,r.halfExtents),Gr.add(ts,n.center,n.halfExtents),Gr.add(es,r.center,r.halfExtents),Gr.max(es,ts,es),Gr.min(ts,Ja,$a),t.fromPoints(e,ts,es)},t.toBoundingSphere=function(t,e){return t.center.set(e.center),t.radius=e.halfExtents.length(),t},t.transform=function(t,e,n){return Gr.transformMat4(t.center,e.center,n),rs(t.halfExtents,e.halfExtents,n),t};var e=t.prototype;return e.getBoundary=function(t,e){Gr.subtract(t,this.center,this.halfExtents),Gr.add(e,this.center,this.halfExtents)},e.transform=function(t,e,n,r,i){Gr.transformMat4(i.center,this.center,t),rs(i.halfExtents,this.halfExtents,t)},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.mergePoint=function(t){this.getBoundary(Ja,$a),t.x<Ja.x&&(Ja.x=t.x),t.y<Ja.y&&(Ja.y=t.y),t.z<Ja.z&&(Ja.z=t.z),t.x>$a.x&&($a.x=t.x),t.y>$a.y&&($a.y=t.y),t.z>$a.z&&($a.z=t.z),Gr.add(ts,Ja,$a),this.center.set(Gr.multiplyScalar(ts,ts,.5)),this.halfExtents.set($a.x-ts.x,$a.y-ts.y,$a.z-ts.z)},e.mergePoints=function(t){if(!(t.length<1))for(var e=0;e<t.length;e++)this.mergePoint(t[e])},e.mergeFrustum=function(t){this.mergePoints(t.vertices)},m(t,[{key:"type",get:function(){return this._type}}]),t}()),as=t("cW",function(){function t(t,e,n){void 0===t&&(t=.5),void 0===e&&(e=.5),void 0===n&&(n=1),this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=ji.SHAPE_CAPSULE,this.radius=t,this.halfHeight=e,this.axis=n,this.center=new Gr,this.rotation=new ai,this.ellipseCenter0=new Gr(0,e,0),this.ellipseCenter1=new Gr(0,-e,0),this.updateCache()}var e=t.prototype;return e.transform=function(t,e,n,r,i){var a=r,s=zr(a);i.radius=this.radius*Math.abs(s);var o=(this.halfHeight+this.radius)*Math.abs(a.y)-i.radius;o<0&&(o=0),i.halfHeight=o,Gr.transformMat4(i.center,this.center,t),ai.multiply(i.rotation,this.rotation,n),i.updateCache()},e.updateCache=function(){this.updateLocalCenter(),Gr.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),Gr.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)},e.updateLocalCenter=function(){var t=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(t,0,0),this.ellipseCenter1.set(-t,0,0);break;case 1:this.ellipseCenter0.set(0,t,0),this.ellipseCenter1.set(0,-t,0);break;case 2:this.ellipseCenter0.set(0,0,t),this.ellipseCenter1.set(0,0,-t)}},m(t,[{key:"type",get:function(){return this._type}}]),t}()),ss=new Array(8);ss[0]=new Gr(1,1,1),ss[1]=new Gr(-1,1,1),ss[2]=new Gr(-1,-1,1),ss[3]=new Gr(1,-1,1),ss[4]=new Gr(1,1,-1),ss[5]=new Gr(-1,1,-1),ss[6]=new Gr(-1,-1,-1),ss[7]=new Gr(1,-1,-1);var os,ms=new Gr,us=new Gr,hs=new Gr,cs=t("bD",function(){e.createOrthographic=function(t,e,n,r,i,a){var s=e/2,o=n/2;Gr.set(hs,s,o,-r),Gr.transformMat4(t.vertices[0],hs,a),Gr.set(hs,-s,o,-r),Gr.transformMat4(t.vertices[1],hs,a),Gr.set(hs,-s,-o,-r),Gr.transformMat4(t.vertices[2],hs,a),Gr.set(hs,s,-o,-r),Gr.transformMat4(t.vertices[3],hs,a),Gr.set(hs,s,o,-i),Gr.transformMat4(t.vertices[4],hs,a),Gr.set(hs,-s,o,-i),Gr.transformMat4(t.vertices[5],hs,a),Gr.set(hs,-s,-o,-i),Gr.transformMat4(t.vertices[6],hs,a),Gr.set(hs,s,-o,-i),Gr.transformMat4(t.vertices[7],hs,a),t.updatePlanes()},e.createOrtho=function(t,n,r,i,a,s){return e.createOrthographic(t,n,r,i,a,s)},e.createPerspective=function(t,e,n,r,i,a){var s=Math.tan(.5*n),o=s*e;ms.set(r*o,r*s,r),us.set(i*o,i*s,i);var m=t.vertices;hs.set(ms.x,ms.y,-ms.z),Gr.transformMat4(m[0],hs,a),hs.set(-ms.x,ms.y,-ms.z),Gr.transformMat4(m[1],hs,a),hs.set(-ms.x,-ms.y,-ms.z),Gr.transformMat4(m[2],hs,a),hs.set(ms.x,-ms.y,-ms.z),Gr.transformMat4(m[3],hs,a),hs.set(us.x,us.y,-us.z),Gr.transformMat4(m[4],hs,a),hs.set(-us.x,us.y,-us.z),Gr.transformMat4(m[5],hs,a),hs.set(-us.x,-us.y,-us.z),Gr.transformMat4(m[6],hs,a),hs.set(us.x,-us.y,-us.z),Gr.transformMat4(m[7],hs,a),t.updatePlanes()},e.createFromAABB=function(t,e){var n=new Gr,r=new Gr;return Gr.subtract(n,e.center,e.halfExtents),Gr.add(r,e.center,e.halfExtents),t.vertices[0].set(r.x,r.y,-n.z),t.vertices[1].set(n.x,r.y,-n.z),t.vertices[2].set(n.x,n.y,-n.z),t.vertices[3].set(r.x,n.y,-n.z),t.vertices[4].set(r.x,r.y,-r.z),t.vertices[5].set(n.x,r.y,-r.z),t.vertices[6].set(n.x,n.y,-r.z),t.vertices[7].set(r.x,n.y,-r.z),t.updatePlanes(),t};var t=e.prototype;function e(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=ji.SHAPE_FRUSTUM,this.planes=new Array(6);for(var t=0;t<6;++t)this.planes[t]=Xa.create(0,0,0,0);this.vertices=new Array(8);for(var e=0;e<8;++e)this.vertices[e]=new Gr}return t.split=function(t,n,r,i,a){return e.createPerspective(this,r,i,t,n,a)},e.create=function(){return new e},e.clone=function(t){return e.copy(new e,t)},e.copy=function(t,e){t._type=e.type;for(var n=0;n<6;++n)Xa.copy(t.planes[n],e.planes[n]);for(var r=0;r<8;++r)Gr.copy(t.vertices[r],e.vertices[r]);return t},t.update=function(t,e){Gr.set(this.planes[0].n,t.m03+t.m00,t.m07+t.m04,t.m11+t.m08),this.planes[0].d=-(t.m15+t.m12),Gr.set(this.planes[1].n,t.m03-t.m00,t.m07-t.m04,t.m11-t.m08),this.planes[1].d=-(t.m15-t.m12),Gr.set(this.planes[2].n,t.m03+t.m01,t.m07+t.m05,t.m11+t.m09),this.planes[2].d=-(t.m15+t.m13),Gr.set(this.planes[3].n,t.m03-t.m01,t.m07-t.m05,t.m11-t.m09),this.planes[3].d=-(t.m15-t.m13),Gr.set(this.planes[4].n,t.m03+t.m02,t.m07+t.m06,t.m11+t.m10),this.planes[4].d=-(t.m15+t.m14),Gr.set(this.planes[5].n,t.m03-t.m02,t.m07-t.m06,t.m11-t.m10),this.planes[5].d=-(t.m15-t.m14);for(var n=0;n<6;n++){var r=this.planes[n],i=1/r.n.length();Gr.multiplyScalar(r.n,r.n,i),r.d*=i}for(var a=0;a<8;a++)Gr.transformMat4(this.vertices[a],ss[a],e)},t.transform=function(t){for(var e=0;e<8;e++)Gr.transformMat4(this.vertices[e],this.vertices[e],t);this.updatePlanes()},t.zero=function(){for(var t=0;t<8;t++)this.vertices[t].set(0,0,0);for(var e=0;e<6;e++)Xa.set(this.planes[e],0,0,0,0)},t.updatePlanes=function(){Xa.fromPoints(this.planes[0],this.vertices[1],this.vertices[6],this.vertices[5]),Xa.fromPoints(this.planes[1],this.vertices[3],this.vertices[4],this.vertices[7]),Xa.fromPoints(this.planes[2],this.vertices[6],this.vertices[3],this.vertices[7]),Xa.fromPoints(this.planes[3],this.vertices[0],this.vertices[5],this.vertices[4]),Xa.fromPoints(this.planes[4],this.vertices[2],this.vertices[0],this.vertices[3]),Xa.fromPoints(this.planes[5],this.vertices[7],this.vertices[5],this.vertices[6])},m(e,[{key:"accurate",set:function(t){this._type=t?ji.SHAPE_FRUSTUM_ACCURATE:ji.SHAPE_FRUSTUM}},{key:"type",get:function(){return this._type}}]),e}()),ls=new Gr,fs=new Gr,ys=new ei,ds=t("cV",function(){function t(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=ji.SHAPE_OBB,this.center=new Gr(t,e,n),this.halfExtents=new Gr(r,i,a),this.orientation=new ei(s,o,m,u,h,c,l,f,y)}t.create=function(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return new t(e,n,r,i,a,s,o,m,u,h,c,l,f,y,d)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z,e.orientation.m00,e.orientation.m01,e.orientation.m02,e.orientation.m03,e.orientation.m04,e.orientation.m05,e.orientation.m06,e.orientation.m07,e.orientation.m08)},t.copy=function(t,e){return Gr.copy(t.center,e.center),Gr.copy(t.halfExtents,e.halfExtents),ei.copy(t.orientation,e.orientation),t},t.fromPoints=function(t,e,n){return Gr.multiplyScalar(t.center,Gr.add(ls,e,n),.5),Gr.multiplyScalar(t.halfExtents,Gr.subtract(fs,n,e),.5),ei.identity(t.orientation),t},t.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,d){return Gr.set(t.center,e,n,r),Gr.set(t.halfExtents,i,a,s),ei.set(t.orientation,o,m,u,h,c,l,f,y,d),t};var e=t.prototype;return e.getBoundary=function(t,e){!function(t,e,n){ys.m00=Math.abs(n.m00),ys.m01=Math.abs(n.m01),ys.m02=Math.abs(n.m02),ys.m03=Math.abs(n.m03),ys.m04=Math.abs(n.m04),ys.m05=Math.abs(n.m05),ys.m06=Math.abs(n.m06),ys.m07=Math.abs(n.m07),ys.m08=Math.abs(n.m08),Gr.transformMat3(t,e,ys)}(ls,this.halfExtents,this.orientation),Gr.subtract(t,this.center,ls),Gr.add(e,this.center,ls)},e.transform=function(t,e,n,r,i){Gr.transformMat4(i.center,this.center,t),ei.fromQuat(i.orientation,n),Gr.multiply(i.halfExtents,this.halfExtents,r)},e.translateAndRotate=function(t,e,n){Gr.transformMat4(n.center,this.center,t),ei.fromQuat(n.orientation,e)},e.setScale=function(t,e){Gr.multiply(e.halfExtents,this.halfExtents,t)},m(t,[{key:"type",get:function(){return this._type}}]),t}());function vs(t,e,n){void 0===n&&(n=1e-6);for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(s>e+n)i=a-1;else{if(!(s<e-n))return a;r=a+1}}return~r}os=Symbol.iterator;var ps,gs,_s,xs=function(){function t(){this._times=[],this._values=[]}var e=t.prototype;return e[os]=function(){var t=this,e=0;return{next:function(){if(e>=t._times.length)return{done:!0,value:void 0};var n=[t._times[e],t._values[e]];return++e,{done:!1,value:n}}}},e.keyframes=function(){return this},e.times=function(){return this._times},e.values=function(){return this._values},e.getKeyframeTime=function(t){return this._times[t]},e.getKeyframeValue=function(t){return this._values[t]},e.addKeyFrame=function(t,e){return this._insertNewKeyframe(t,e)},e.removeKeyframe=function(t){this._times.splice(t,1),this._values.splice(t,1)},e.indexOfKeyframe=function(t){return vs(this._times,t)},e.updateTime=function(t,e){var n=this._values[t];this.removeKeyframe(t),this._insertNewKeyframe(e,n)},e.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.slice());else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return t[1]})))}},e.clear=function(){this._times.length=0,this._values.length=0},e.searchKeyframe=function(t){return vs(this._times,t)},e.setKeyframes=function(t,e){t.length,e.length,function(t){t.every((function(t,e,n){return 0===e||t>n[e-1]||cr(t,n[e-1],1e-6)}))}(t),this._times=t,this._values=e},e._insertNewKeyframe=function(t,e){var n=this._times,r=this._values,i=n.length,a=vs(n,t);if(a>=0)return a;var s=~a;return 0===s?(n.unshift(t),r.unshift(e)):s===i?(n.push(t),r.push(e)):(n.splice(s-1,0,t),r.splice(s-1,0,e)),s},m(t,[{key:"keyFramesCount",get:function(){return this._times.length}},{key:"rangeMin",get:function(){return this._times[0]}},{key:"rangeMax",get:function(){return this._times[this._values.length-1]}}]),t}();function bs(t){return t>-1e-9&&t<1e-9}function Ms(t,e,n,r){return n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),r)}pn.fastDefine("cc.KeyframeCurve",xs,{_times:[],_values:[]}),t("aU",ps),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.CUBIC=2]="CUBIC"}(ps||t("aU",ps={})),t("aV",gs),function(t){t[t.LINEAR=0]="LINEAR",t[t.CLAMP=1]="CLAMP",t[t.LOOP=2]="LOOP",t[t.PING_PONG=3]="PING_PONG"}(gs||t("aV",gs={})),t("aW",_s),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTH=3]="BOTH"}(_s||t("aW",_s={}));var ws=function(){},Es=function(){return ws},As=Ns((function(){}));function Ns(t){return function(e){return"function"==typeof e?t(e):function(n){return t(n,e)}}}function Is(t){return function(e){return function(n){!function(t,e,n){var r=Ts(t);if(r){var i=Os(r,"proto");Os(i,"editor")[e]=n}}(n,t,e)}}}var zs="__ccclassCache__";function Ts(t){return Os(t,zs)}function Os(t,e){return t[e]||(t[e]={})}var Ss=t("bE",Ns((function(t,e){var n=$t(t);n===Object&&(n=null);var r={name:e,extends:n,ctor:t},i=t[zs];if(i){var a=i.proto;a&&Zt(r,a),t[zs]=void 0}return pn(r)}))),Ps=t("cJ",Is("requireComponent")),Cs=t("cx",Is("executionOrder")),Rs=t("cu",As);function Us(t,e,n){var r=null;function i(t,e,n){!function(t,e,n,r,i,a){var s,o=a&&"function"!=typeof a&&(a.get||a.set);i&&(s=sn(i,o));var m=Zt(e,s||i||{});o?(a.get&&(m.get=a.get),a.set&&(m.set=a.set)):Fs(t,m,n,r,a)}(function(t){return Ts(t.constructor)}(t),function(t,e){var n,r,i=Os(Ts(t.constructor),"proto"),a=Os(i,"properties");return null!==(r=a[n=e])&&void 0!==r?r:a[n]={}}(t,e),t.constructor,e,r,n)}return void 0===t?Us({type:void 0}):void 0===e?(r=t,i):void i(t,e,n)}function Ls(t){var e;try{e=t()}catch(e){return t}return"object"!=typeof e||null===e?e:t}function ks(t,e,n){var r,i,a=Ts(t.constructor),s=Os(a,"proto"),o=Os(s,"properties"),m=null!==(i=o[r=e])&&void 0!==i?i:o[r]={};return m.__internalFlags|=on.STANDALONE,n&&"function"!=typeof n&&(n.get||n.set)?(n.get&&(m.get=n.get),n.set&&(m.set=n.set)):Fs(a,m,t.constructor,e,n),m}function Fs(t,e,n,r,i){if(void 0!==i)"function"==typeof i?e.default=Ls(i):null===i||i.initializer&&(e.default=Ls(i.initializer));else{var a=t.default||(t.default=function(t){var e;try{e=new t}catch(t){return{}}return e}(n));a.hasOwnProperty(r)&&(e.default=a[r])}}var Bs=Symbol("cc:SerializationMetadata"),Ds=t("bj",(function(t,e,n){qs(ks(t,e,n))}));function Hs(t){return function(e,n,r){var i=ks(e,n,r);i.formerlySerializedAs=t,qs(i)}}function qs(t){t.__internalFlags|=on.IMPLICIT_SERIALIZABLE}t("bL",(function(t,e,n){var r=ks(t,e,n);r.editorOnly=!0,qs(r)}));var js=t("cG",ws),Vs=As,Gs=Es,Ws=As,Ks=Es,Qs=Es,Ys=Es,Xs=t("b8",ws),Zs=t("ba",Es),Js=t("bb",Es),$s=t("b9",Es),to=t("bd",Es),eo=t("be",Es),no=t("bf",ws),ro=t("bc",Es),io=t("bg",ws),ao=uo(Ye),so=t("cz",uo(Xe)),oo=uo(Ze),mo=t("cI",uo(Je));function uo(t){return Us({type:t})}var ho,co,lo,fo,yo,vo,po,go,_o,xo,bo=t("bh",(function(t,e,n){ks(t,e,n).override=!0})),Mo=t("aF",(function(){})),wo=Object.freeze({__proto__:null,uniquelyReferenced:js,ccclass:Ss,property:Us,requireComponent:Ps,executionOrder:Cs,disallowMultiple:Rs,executeInEditMode:Vs,menu:Gs,playOnFocus:Ws,inspector:Ks,icon:Qs,help:Ys,type:uo,integer:ao,float:so,boolean:oo,string:mo,editable:Xs,tooltip:$s,visible:Zs,displayName:Js,displayOrder:ro,range:to,rangeStep:eo,slide:no,disallowAnimation:io,override:bo,formerlySerializedAs:Hs,serializable:Ds});function Eo(t,e){return(e<<3)+t}function Ao(t){return Io[t]}function No(t){switch(t){case _o.Uint8:return Uint8Array;case _o.Uint16:return Uint16Array;case _o.Uint32:return Uint32Array;case _o.Int8:return Int8Array;case _o.Int16:return Int16Array;case _o.Int32:return Int32Array;case _o.Float32:return Float32Array;case _o.Float64:return Float64Array}}t("as",wo),function(t){t[t.Uint8=0]="Uint8",t[t.Uint16=1]="Uint16",t[t.Uint32=2]="Uint32",t[t.Int8=3]="Int8",t[t.Int16=4]="Int16",t[t.Int32=5]="Int32",t[t.Float32=6]="Float32",t[t.Float64=7]="Float64"}(_o||(_o={})),function(t){t[t.Scalar=0]="Scalar",t[t.Vec2=1]="Vec2",t[t.Vec3=2]="Vec3",t[t.Vec4=3]="Vec4",t[t.Quat=4]="Quat",t[t.Mat4=5]="Mat4"}(xo||(xo={})),t("aA",Ss("cc.CompactValueTypeArray")(((po=function(){function t(){this._byteOffset=lo&&lo(),this._unitCount=fo&&fo(),this._unitElement=yo&&yo(),this._length=vo&&vo()}return t.lengthFor=function(t,e,n){return Ao(e).requiredUnits*t.length*No(n).BYTES_PER_ELEMENT},t.compress=function(e,n,r,i,a,s){for(var o=Ao(n),m=No(r),u=o.requiredUnits*e.length,h=new m(i,a,u),c=0;c<e.length;++c)o.compress(h,c,e[c]);var l=new t;return l._unitElement=Eo(r,n),l._byteOffset=s,l._unitCount=u,l._length=e.length,l},t.prototype.decompress=function(t){for(var e,n={storageUnit:7&(e=this._unitElement),elementType:e>>3},r=n.storageUnit,i=Ao(n.elementType),a=new(No(r))(t,this._byteOffset,this._unitCount),s=new Array(this._length),o=0;o<this._length;++o)s[o]=i.decompress(a,o);return s},t}()).StorageUnit=_o,po.ElementType=xo,lo=Ms((co=po).prototype,"_byteOffset",[Ds],(function(){return 0})),fo=Ms(co.prototype,"_unitCount",[Ds],(function(){return 0})),yo=Ms(co.prototype,"_unitElement",[Ds],(function(){return Eo(_o.Uint8,xo.Scalar)})),vo=Ms(co.prototype,"_length",[Ds],(function(){return 0})),ho=co))||ho);var Io=((go={})[xo.Scalar]={requiredUnits:1,compress:function(t,e,n){t[e]=n},decompress:function(t,e){return t[e]}},go[xo.Vec2]={requiredUnits:2,compress:function(t,e,n){t[2*e]=n.x,t[2*e+1]=n.y},decompress:function(t,e){return new Gr(t[2*e],t[2*e+1])}},go[xo.Vec3]={requiredUnits:3,compress:function(t,e,n){t[3*e]=n.x,t[3*e+1]=n.y,t[3*e+2]=n.z},decompress:function(t,e){return new Gr(t[3*e],t[3*e+1],t[3*e+2])}},go[xo.Vec4]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new Br(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},go[xo.Quat]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new ai(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},go[xo.Mat4]={requiredUnits:16,compress:function(t,e,n){yi.toArray(t,n,16*e)},decompress:function(t,e){return yi.fromArray(new yi,t,16*e)}},go),zo=t("aD",Symbol("[[Serialize]]")),To=t("aC",Symbol("[[Deserialize]]"));function Oo(){return 0}function So(t){return t}function Po(t){return t*t}function Co(t){return t*(2-t)}function Ro(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function Uo(t){return t*t*t}function Lo(t){return--t*t*t+1}function ko(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}function Fo(t){return t*t*t*t}function Bo(t){return 1- --t*t*t*t}function Do(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function Ho(t){return t*t*t*t*t}function qo(t){return--t*t*t*t*t+1}function jo(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Vo(t){return 1===t?1:1-Math.cos(t*Math.PI/2)}function Go(t){return Math.sin(t*Math.PI/2)}function Wo(t){return.5*(1-Math.cos(Math.PI*t))}function Ko(t){return 0===t?0:Math.pow(1024,t-1)}function Qo(t){return 1===t?1:1-Math.pow(2,-10*t)}function Yo(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function Xo(t){return 1-Math.sqrt(1-t*t)}function Zo(t){return Math.sqrt(1- --t*t)}function Jo(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function $o(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}function tm(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}function em(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)}function nm(t){if(1===t)return 1;var e=1.70158;return t*t*((e+1)*t-e)}function rm(t){if(0===t)return 0;var e=1.70158;return--t*t*((e+1)*t+e)+1}function im(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function am(t){return 1-sm(1-t)}function sm(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function om(t){return t<.5?.5*am(2*t):.5*sm(2*t-1)+.5}function mm(t){return t<=0?0:t>=1?1:t*t*(3-2*t)}function um(t){return t<=0?0:t>=1?1:t*t*t*(t*(6*t-15)+10)}i._decorator=wo;var hm=xm(Po,Co),cm=xm(Uo,Lo),lm=xm(Fo,Bo),fm=xm(Ho,qo),ym=xm(Vo,Go),dm=xm(Ko,Qo),vm=xm(Xo,Zo),pm=xm($o,tm),gm=xm(nm,rm),_m=xm(am,sm);function xm(t,e){return function(n){return n<.5?e(2*n)/2:t(2*n-1)/2+.5}}var bm,Mm,wm=Object.freeze({__proto__:null,constant:Oo,linear:So,quadIn:Po,quadOut:Co,quadInOut:Ro,cubicIn:Uo,cubicOut:Lo,cubicInOut:ko,quartIn:Fo,quartOut:Bo,quartInOut:Do,quintIn:Ho,quintOut:qo,quintInOut:jo,sineIn:Vo,sineOut:Go,sineInOut:Wo,expoIn:Ko,expoOut:Qo,expoInOut:Yo,circIn:Xo,circOut:Zo,circInOut:Jo,elasticIn:$o,elasticOut:tm,elasticInOut:em,backIn:nm,backOut:rm,backInOut:im,bounceIn:am,bounceOut:sm,bounceInOut:om,smooth:mm,fade:um,quadOutIn:hm,cubicOutIn:cm,quartOutIn:lm,quintOutIn:fm,sineOutIn:ym,expoOutIn:dm,circOutIn:vm,elasticOutIn:pm,backOutIn:gm,bounceOutIn:_m});t("b4",wm),t("bs",Mm),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.QUAD_IN=2]="QUAD_IN",t[t.QUAD_OUT=3]="QUAD_OUT",t[t.QUAD_IN_OUT=4]="QUAD_IN_OUT",t[t.QUAD_OUT_IN=5]="QUAD_OUT_IN",t[t.CUBIC_IN=6]="CUBIC_IN",t[t.CUBIC_OUT=7]="CUBIC_OUT",t[t.CUBIC_IN_OUT=8]="CUBIC_IN_OUT",t[t.CUBIC_OUT_IN=9]="CUBIC_OUT_IN",t[t.QUART_IN=10]="QUART_IN",t[t.QUART_OUT=11]="QUART_OUT",t[t.QUART_IN_OUT=12]="QUART_IN_OUT",t[t.QUART_OUT_IN=13]="QUART_OUT_IN",t[t.QUINT_IN=14]="QUINT_IN",t[t.QUINT_OUT=15]="QUINT_OUT",t[t.QUINT_IN_OUT=16]="QUINT_IN_OUT",t[t.QUINT_OUT_IN=17]="QUINT_OUT_IN",t[t.SINE_IN=18]="SINE_IN",t[t.SINE_OUT=19]="SINE_OUT",t[t.SINE_IN_OUT=20]="SINE_IN_OUT",t[t.SINE_OUT_IN=21]="SINE_OUT_IN",t[t.EXPO_IN=22]="EXPO_IN",t[t.EXPO_OUT=23]="EXPO_OUT",t[t.EXPO_IN_OUT=24]="EXPO_IN_OUT",t[t.EXPO_OUT_IN=25]="EXPO_OUT_IN",t[t.CIRC_IN=26]="CIRC_IN",t[t.CIRC_OUT=27]="CIRC_OUT",t[t.CIRC_IN_OUT=28]="CIRC_IN_OUT",t[t.CIRC_OUT_IN=29]="CIRC_OUT_IN",t[t.ELASTIC_IN=30]="ELASTIC_IN",t[t.ELASTIC_OUT=31]="ELASTIC_OUT",t[t.ELASTIC_IN_OUT=32]="ELASTIC_IN_OUT",t[t.ELASTIC_OUT_IN=33]="ELASTIC_OUT_IN",t[t.BACK_IN=34]="BACK_IN",t[t.BACK_OUT=35]="BACK_OUT",t[t.BACK_IN_OUT=36]="BACK_IN_OUT",t[t.BACK_OUT_IN=37]="BACK_OUT_IN",t[t.BOUNCE_IN=38]="BOUNCE_IN",t[t.BOUNCE_OUT=39]="BOUNCE_OUT",t[t.BOUNCE_IN_OUT=40]="BOUNCE_IN_OUT",t[t.BOUNCE_OUT_IN=41]="BOUNCE_OUT_IN",t[t.SMOOTH=42]="SMOOTH",t[t.FADE=43]="FADE"}(Mm||t("bs",Mm={}));var Em,Am=((bm={})[Mm.CONSTANT]=Oo,bm[Mm.LINEAR]=So,bm[Mm.QUAD_IN]=Po,bm[Mm.QUAD_OUT]=Co,bm[Mm.QUAD_IN_OUT]=Ro,bm[Mm.QUAD_OUT_IN]=hm,bm[Mm.CUBIC_IN]=Uo,bm[Mm.CUBIC_OUT]=Lo,bm[Mm.CUBIC_IN_OUT]=ko,bm[Mm.CUBIC_OUT_IN]=cm,bm[Mm.QUART_IN]=Fo,bm[Mm.QUART_OUT]=Bo,bm[Mm.QUART_IN_OUT]=Do,bm[Mm.QUART_OUT_IN]=lm,bm[Mm.QUINT_IN]=Ho,bm[Mm.QUINT_OUT]=qo,bm[Mm.QUINT_IN_OUT]=jo,bm[Mm.QUINT_OUT_IN]=fm,bm[Mm.SINE_IN]=Vo,bm[Mm.SINE_OUT]=Go,bm[Mm.SINE_IN_OUT]=Wo,bm[Mm.SINE_OUT_IN]=ym,bm[Mm.EXPO_IN]=Ko,bm[Mm.EXPO_OUT]=Qo,bm[Mm.EXPO_IN_OUT]=Yo,bm[Mm.EXPO_OUT_IN]=dm,bm[Mm.CIRC_IN]=Xo,bm[Mm.CIRC_OUT]=Zo,bm[Mm.CIRC_IN_OUT]=Jo,bm[Mm.CIRC_OUT_IN]=vm,bm[Mm.ELASTIC_IN]=$o,bm[Mm.ELASTIC_OUT]=tm,bm[Mm.ELASTIC_IN_OUT]=em,bm[Mm.ELASTIC_OUT_IN]=pm,bm[Mm.BACK_IN]=nm,bm[Mm.BACK_OUT]=rm,bm[Mm.BACK_IN_OUT]=im,bm[Mm.BACK_OUT_IN]=gm,bm[Mm.BOUNCE_IN]=am,bm[Mm.BOUNCE_OUT]=sm,bm[Mm.BOUNCE_IN_OUT]=om,bm[Mm.BOUNCE_OUT_IN]=_m,bm[Mm.SMOOTH]=mm,bm[Mm.FADE]=um,bm);function Nm(t){return Am[t]}Hn(255),Hn(65280);var Im,zm,Tm,Om=ps.LINEAR<<0|_s.NONE<<8|Mm.LINEAR<<16,Sm=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).value=0,e.rightTangent=0,e.rightTangentWeight=0,e.leftTangent=0,e.leftTangentWeight=0,e._flags=Om,e}return h(e,t),m(e,[{key:"interpolationMode",get:function(){return(255&this._flags)>>0},set:function(t){this._flags&=-256,this._flags|=t<<0}},{key:"tangentWeightMode",get:function(){return(65280&this._flags)>>8},set:function(t){this._flags&=-65281,this._flags|=t<<8}},{key:"easingMethod",get:function(){return(16711680&this._flags)>>16},set:function(t){this._flags&=-16711681,this._flags|=t<<16}}]),e}(Mo);function Pm(t){var e=new Sm;if("number"==typeof t)e.value=t;else{var n=t.interpolationMode,r=t.tangentWeightMode,i=t.value,a=t.rightTangent,s=t.rightTangentWeight,o=t.leftTangent,m=t.leftTangentWeight,u=t.easingMethod,h=t[bn];e.value=null!=i?i:e.value,e.rightTangent=null!=a?a:e.rightTangent,e.rightTangentWeight=null!=s?s:e.rightTangentWeight,e.leftTangent=null!=o?o:e.leftTangent,e.leftTangentWeight=null!=m?m:e.leftTangentWeight,e.interpolationMode=null!=n?n:e.interpolationMode,e.tangentWeightMode=null!=r?r:e.tangentWeightMode,e.easingMethod=null!=u?u:e.easingMethod,h&&(e[bn]=h)}return e}pn.fastDefine("cc.RealKeyframeValue",Sm,((Em={interpolationMode:ps.LINEAR,tangentWeightMode:_s.NONE,value:0,rightTangent:0,rightTangentWeight:0,leftTangent:0,leftTangentWeight:0,easingMethod:Mm.LINEAR})[bn]=void 0,Em)),pn.Attr.setClassAttr(Sm,bn,"editorOnly",!0),(Im=Sm,null!==(Tm=(zm=Im)[Bs])&&void 0!==Tm?Tm:zm[Bs]={}).uniquelyReferenced=!0;var Cm,Rm=t("aT",function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=gs.CLAMP,e.postExtrapolation=gs.CLAMP,e}h(e,t);var n=e.prototype;return n.evaluate=function(t){var e=this._times,n=this._values,r=e.length;if(0===r)return 0;var i=e[0],a=e[r-1];if(t<i){var s=this.preExtrapolation,o=n[0];if(s===gs.CLAMP||r<2)return o.value;switch(s){case gs.LINEAR:return Xm(i,n[0].value,e[1],n[1].value,t);case gs.LOOP:t=Qm(t,i,a);break;case gs.PING_PONG:t=Ym(t,i,a);break;default:return o.value}}else if(t>a){var m=this.postExtrapolation,u=n[r-1];if(m===gs.CLAMP||r<2)return u.value;switch(m){case gs.LINEAR:return Xm(a,u.value,e[r-2],n[r-2].value,t);case gs.LOOP:t=Qm(t,i,a);break;case gs.PING_PONG:t=Ym(t,i,a);break;default:return u.value}}var h=vs(e,t);if(h>=0)return n[h].value;var c=~h,l=c-1,f=e[l],y=n[l],d=e[c];return function(t,e,n,r,i){var a=n-t;switch(e.interpolationMode){default:case ps.CONSTANT:return e.value;case ps.LINEAR:var s=e.easingMethod===Mm.LINEAR?i:Nm(e.easingMethod)(i);return yr(e.value,r.value,s);case ps.CUBIC:var o=1/3,m=e.rightTangent,u=e.rightTangentWeight,h=0!=(e.tangentWeightMode&_s.RIGHT),c=r.leftTangent,l=r.leftTangentWeight,f=0!=(r.tangentWeightMode&_s.LEFT);if(h||f){var y=0;if(h)y=u;else{var d=a,v=a*m;y=Math.sqrt(d*d+v*v)*o}var p=Math.atan(m),g=Math.cos(p)*y+t,_=Math.sin(p)*y+e.value,x=0;if(f)x=l;else{var b=a,M=a*c;x=Math.sqrt(b*b+M*M)*o}var w=Math.atan(c),E=(g-t)/a,A=(-Math.cos(w)*x+n-t)/a,N=_,I=-Math.sin(w)*x+r.value,z=[0,0,0],T=function(t,e,n,r,i){var a=n/r,s=e/r,o=a*a,m=1/3*(-1/3*o+s),u=.5*(2/27*a*o-1/3*a*s+t/r),h=m*m*m,c=u*u+h,l=0;if(bs(c)){if(bs(u))return i[0]=0,1;var f=Math.cbrt(-u);return i[0]=2*f,i[1]=-f,2}if(c<0){var y=1/3*Math.acos(-u/Math.sqrt(-h)),d=2*Math.sqrt(-m);i[0]=d*Math.cos(y),i[1]=-d*Math.cos(y+Math.PI/3),i[2]=-d*Math.cos(y-Math.PI/3),l=3}else{var v=Math.sqrt(c),p=Math.cbrt(v-u),g=-Math.cbrt(v+u);i[0]=p+g,l=1}for(var _=1/3*a,x=0;x<l;++x)i[x]-=_;return l}(0-i,3*E,3*A-6*E,3*(E-A)+1,z),O=function(t,e,n){var r=n;if(1===e)r=t[0];else{r=-1/0;for(var i=0;i<e;++i){var a=t[i];a>=0&&a<=1&&a>r&&(r=a)}r===-1/0&&(r=0)}return r}(z,T,i);return Zm(e.value,N,I,r.value,O)}var S=e.value+o*m*a,P=r.value-o*c*a;return Zm(e.value,S,P,r.value,i)}}(f,y,d,n[c],(t-f)/(d-f))},n.addKeyFrame=function(e,n){return t.prototype.addKeyFrame.call(this,e,Pm(n))},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return Pm(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return Pm(t[1])})))}},n.isConstant=function(t){if(this._values.length<=1)return!0;var e=this._values[0].value;return this._values.every((function(n){return cr(n.value,e,t)}))},n[zo]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=n.length,a=new DataView(new ArrayBuffer(0+Um+Um+Lm+km*i+Gm*i)),s=0;a.setUint8(s,this.preExtrapolation),s+=Um,a.setUint8(s,this.postExtrapolation),s+=Um,a.setUint32(s,i,!0),s+=Lm,n.forEach((function(t,e){return a.setFloat32(s+km*e,t,!0)})),s+=km*i;for(var o,m=p(r);!(o=m()).done;){var u=o.value;s=Wm(a,u,s)}var h=new Uint8Array(a.buffer,0,s);t.writeProperty("bytes",h);var c=r.map((function(t){return t[bn]}));c.some((function(t){return void 0!==t}))&&t.writeProperty("keyframeValueEditorExtras",c)}else t.writeThis()},n[To]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;this.preExtrapolation=r.getUint8(i),i+=Um,this.postExtrapolation=r.getUint8(i),i+=Um;var a=r.getUint32(i,!0);i+=Lm;var s=Array.from({length:a},(function(t,e){return r.getFloat32(i+km*e,!0)}));i+=km*a;for(var o=new Array(a),m=0;m<a;++m){var u=Pm({});i=Km(r,u,i),o[m]=u}n.byteLength;var h=t.readProperty("keyframeValueEditorExtras");h&&(h.length,h.forEach((function(t,e){return o[e][bn]=t}))),this._times=s,this._values=o}else t.readThis()},e}(xs));pn.fastDefine("cc.RealCurve",Rm,{_times:[],_values:[],preExtrapolation:gs.CLAMP,postExtrapolation:gs.CLAMP}),function(t){t[t.VALUE=1]="VALUE",t[t.INTERPOLATION_MODE=2]="INTERPOLATION_MODE",t[t.TANGENT_WEIGHT_MODE=4]="TANGENT_WEIGHT_MODE",t[t.LEFT_TANGENT=8]="LEFT_TANGENT",t[t.LEFT_TANGENT_WEIGHT=16]="LEFT_TANGENT_WEIGHT",t[t.RIGHT_TANGENT=32]="RIGHT_TANGENT",t[t.RIGHT_TANGENT_WEIGHT=64]="RIGHT_TANGENT_WEIGHT"}(Cm||(Cm={}));var Um=1,Lm=4,km=4,Fm=Pm({}),Bm=Fm.interpolationMode,Dm=Fm.tangentWeightMode,Hm=Fm.leftTangent,qm=Fm.leftTangentWeight,jm=Fm.rightTangent,Vm=Fm.rightTangentWeight,Gm=26;function Wm(t,e,n){var r=0,i=n,a=i;i+=4;var s=e.value,o=e.interpolationMode,m=e.tangentWeightMode,u=e.rightTangent,h=e.rightTangentWeight,c=e.leftTangent,l=e.leftTangentWeight,f=e.easingMethod;return t.setFloat32(i,s,!0),i+=4,o!==Bm&&(r|=Cm.INTERPOLATION_MODE,t.setUint8(i,o),i+=1),m!==Dm&&(r|=Cm.TANGENT_WEIGHT_MODE,t.setUint8(i,m),i+=1),c!==Hm&&(r|=Cm.LEFT_TANGENT,t.setFloat32(i,c,!0),i+=4),l!==qm&&(r|=Cm.LEFT_TANGENT_WEIGHT,t.setFloat32(i,l,!0),i+=4),u!==jm&&(r|=Cm.RIGHT_TANGENT,t.setFloat32(i,u,!0),i+=4),h!==Vm&&(r|=Cm.RIGHT_TANGENT_WEIGHT,t.setFloat32(i,h,!0),i+=4),r|=f<<8,t.setUint32(a,r,!0),i}function Km(t,e,n){var r=n,i=t.getUint32(r,!0);r+=4,e.value=t.getFloat32(r,!0),r+=4,i&Cm.INTERPOLATION_MODE&&(e.interpolationMode=t.getUint8(r),r+=1),i&Cm.TANGENT_WEIGHT_MODE&&(e.tangentWeightMode=t.getUint8(r),r+=1),i&Cm.LEFT_TANGENT&&(e.leftTangent=t.getFloat32(r,!0),r+=4),i&Cm.LEFT_TANGENT_WEIGHT&&(e.leftTangentWeight=t.getFloat32(r,!0),r+=4),i&Cm.RIGHT_TANGENT&&(e.rightTangent=t.getFloat32(r,!0),r+=4),i&Cm.RIGHT_TANGENT_WEIGHT&&(e.rightTangentWeight=t.getFloat32(r,!0),r+=4);var a=(65280&i)>>8;return e.easingMethod=a,r}function Qm(t,e,n){return e+Ar(t-e,n-e)}function Ym(t,e,n){return e+Nr(t-e,n-e)}function Xm(t,e,n,r,i){return e+(r-e)/(n-t)*(i-t)}function Zm(t,e,n,r,i){var a=1-i;return a*a*a*t+3*a*a*i*e+3*a*i*i*n+i*i*i*r}function Jm(t,e,n,r,i){var a=1-i;return a*(a*(t+(3*e-t)*i)+3*n*i*i)+r*i*i*i}i.bezier=Jm;var $m,tu,eu,nu,ru,iu,au,su,ou,mu,uu=Math.cos,hu=Math.acos,cu=Math.max,lu=2*Math.PI,fu=Math.sqrt;function yu(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function du(t,e){var n=function(t,e){var n,r,i,a,s=e-0,o=e-t[0],m=3*s,u=3*o,h=3*(e-t[2]),c=1/(-s+u-h+(e-1)),l=1/3,f=(m-6*o+h)*c,y=f*l,d=(-m+u)*c,v=(3*d-f*f)*l,p=v*l,g=(2*f*f*f-9*f*d+s*c*27)/27,_=g/2,x=_*_+p*p*p;if(x<0){var b=-v*l,M=fu(b*b*b),w=-g/(2*M),E=hu(w<-1?-1:w>1?1:w),A=2*yu(M);return r=A*uu(E*l)-y,i=A*uu((E+lu)*l)-y,a=A*uu((E+2*lu)*l)-y,r>=0&&r<=1?i>=0&&i<=1?a>=0&&a<=1?cu(r,i,a):cu(r,i):a>=0&&a<=1?cu(r,a):r:i>=0&&i<=1?a>=0&&a<=1?cu(i,a):i:a}if(0===x)return i=-(n=_<0?yu(-_):-yu(_))-y,(r=2*n-y)>=0&&r<=1?i>=0&&i<=1?cu(r,i):r:i;var N=fu(x);return(n=yu(-_+N))-yu(_+N)-y}(t,e),r=t[1];return((1-n)*(r+(t[3]-r)*n)*3+n*n)*n}i.bezierByTime=du,t("aY",mu),function(t){t[t.SLERP=0]="SLERP",t[t.CONSTANT=1]="CONSTANT"}(mu||t("aY",mu={}));var vu,pu=Ss("cc.QuatKeyframeValue")($m=js((tu=function(t){var e=void 0===t?{}:t,n=e.value,r=e.interpolationMode,i=e.easingMethod;this.interpolationMode=eu&&eu(),this.value=nu&&nu(),this.easingMethod=ru&&ru(),this.value=n?ai.clone(n):this.value,this.interpolationMode=null!=r?r:this.interpolationMode,this.easingMethod=null!=i?i:this.easingMethod},eu=Ms(tu.prototype,"interpolationMode",[Ds],(function(){return mu.SLERP})),nu=Ms(tu.prototype,"value",[Ds],(function(){return ai.clone(ai.IDENTITY)})),ru=Ms(tu.prototype,"easingMethod",[Ds],(function(){return Mm.LINEAR})),$m=tu))||$m)||$m;function gu(t){return new pu(t)}t("aX",Ss("cc.QuatCurve")((au=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=su&&su(),e.postExtrapolation=ou&&ou(),e}h(e,t);var n=e.prototype;return n.evaluate=function(t,e){var n;null!==(n=e)&&void 0!==n||(e=new ai);var r=this._times,i=this._values,a=this.postExtrapolation,s=this.preExtrapolation,o=r.length;if(0===o)return e;var m=r[0],u=r[o-1];if(t<m){var h=i[0];switch(s){case gs.LOOP:t=m+Ar(t-m,u-m);break;case gs.PING_PONG:t=m+Nr(t-m,u-m);break;case gs.CLAMP:default:return ai.copy(e,h.value)}}else if(t>u){var c=i[o-1];switch(a){case gs.LOOP:t=m+Ar(t-m,u-m);break;case gs.PING_PONG:t=m+Nr(t-m,u-m);break;case gs.CLAMP:default:return ai.copy(e,c.value)}}var l=vs(r,t);if(l>=0)return ai.copy(e,i[l].value);var f=~l,y=f-1,d=r[y],v=i[y],p=r[f],g=i[f],_=(t-d)/(p-d);switch(v.interpolationMode){default:case mu.CONSTANT:return ai.copy(e,v.value);case mu.SLERP:var x=v.easingMethod,b=x===Mm.LINEAR?_:Array.isArray(x)?du(x,_):Nm(x)(_);return ai.slerp(e,v.value,g.value,b)}},n.addKeyFrame=function(e,n){var r=new pu(n);return t.prototype.addKeyFrame.call(this,e,r)},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return gu(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return gu(t[1])})))}},n[zo]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=!0;r.forEach((function(t,e,n){var r=n[0];i&&t.interpolationMode!==r.interpolationMode&&(i=!1)}));var a=n.length,s=Eu*(i?1:a),o=r.reduce((function(t,e){var n=e.easingMethod;return t+(Array.isArray(n)?Au+4*Iu:Au)}),0),m=0,u=new DataView(new ArrayBuffer(m+=xu+bu+Mu*a+4*wu*a+o+s+0)),h=0,c=0;i&&(c|=vu.INTERPOLATION_MODE),u.setUint32(h,c,!0),h+=xu,u.setUint32(h,a,!0),h+=bu,n.forEach((function(t,e){return u.setFloat32(h+Mu*e,t,!0)})),h+=Mu*a,r.forEach((function(t,e){var n=t.value,r=n.x,i=n.y,a=n.z,s=n.w,o=h+4*wu*e;u.setFloat32(o+0*wu,r,!0),u.setFloat32(o+1*wu,i,!0),u.setFloat32(o+2*wu,a,!0),u.setFloat32(o+3*wu,s,!0)})),h+=4*wu*a,r.forEach((function(t){var e=t.easingMethod;Array.isArray(e)?(u.setUint8(h,Nu),++h,u.setFloat32(h+0*Iu,e[0],!0),u.setFloat32(h+1*Iu,e[1],!0),u.setFloat32(h+2*Iu,e[2],!0),u.setFloat32(h+3*Iu,e[3],!0),h+=4*Iu):(u.setUint8(h,e),++h)}));var l=h;h+=s;var f=l;r.forEach((function(t){var e=t.interpolationMode;u.setUint8(f,e),i||(f+=Eu)}));var y=new Uint8Array(u.buffer);t.writeProperty("bytes",y)}else t.writeThis()},n[To]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0,a=r.getUint32(i,!0);i+=xu;var s=a&vu.INTERPOLATION_MODE,o=r.getUint32(i,!0);i+=bu;var m=Array.from({length:o},(function(t,e){return r.getFloat32(i+Mu*e,!0)})),u=i+=Mu*o;i+=4*wu*o;var h=Array.from({length:o},(function(t,e){var n=u+4*wu*e,a=r.getFloat32(n+0*wu,!0),s=r.getFloat32(n+1*wu,!0),o=r.getFloat32(n+2*wu,!0),m=r.getFloat32(n+3*wu,!0),h=r.getUint8(i);++i;var c=gu({value:{x:a,y:s,z:o,w:m}});return h!==Nu?c.easingMethod=h:(c.easingMethod=[r.getFloat32(i+0*Iu,!0),r.getFloat32(i+1*Iu,!0),r.getFloat32(i+2*Iu,!0),r.getFloat32(i+3*Iu,!0)],i+=4*Iu),c}));if(s){var c=r.getUint8(i);++i;for(var l=0;l<o;++l)h[l].interpolationMode=c}else{for(var f=0;f<o;++f){var y=r.getUint8(i+f);h[f].interpolationMode=y}i+=o}this._times=m,this._values=h}else t.readThis()},e}(xs),su=Ms(au.prototype,"preExtrapolation",[Ds],(function(){return gs.CLAMP})),ou=Ms(au.prototype,"postExtrapolation",[Ds],(function(){return gs.CLAMP})),iu=au))||iu),function(t){t[t.INTERPOLATION_MODE=1]="INTERPOLATION_MODE"}(vu||(vu={}));var _u,xu=1,bu=4,Mu=4,wu=4,Eu=1,Au=1,Nu=255,Iu=4,zu=(t("aZ",Ss("cc.ObjectCurve")(_u=function(t){function e(){return t.apply(this,arguments)||this}return h(e,t),e.prototype.evaluate=function(t){var e=this.searchKeyframe(t);if(e>=0)return this._values[e];var n=lr(~e-1,0,this._values.length-1);return this._values[n]},e}(xs))||_u),xe({Blend:0,Fixed:1})),Tu=t("a_",(function(){this.color=Jr.WHITE.clone(),this.time=0}));pn.fastDefine("cc.ColorKey",Tu,{color:Jr.WHITE.clone(),time:0}),pn.Attr.setClassAttr(Tu,"color","visible",!0),pn.Attr.setClassAttr(Tu,"time","visible",!0);var Ou=t("a$",(function(){this.alpha=1,this.time=0}));pn.fastDefine("cc.AlphaKey",Ou,{alpha:1,time:0}),pn.Attr.setClassAttr(Ou,"alpha","visible",!0),pn.Attr.setClassAttr(Ou,"time","visible",!0);var Su=t("b0",function(){function t(){this.colorKeys=[],this.alphaKeys=[],this.mode=zu.Blend}var e=t.prototype;return e.setKeys=function(t,e){this.colorKeys=t,this.alphaKeys=e},e.sortKeys=function(){this.colorKeys.length>1&&this.colorKeys.sort((function(t,e){return t.time-e.time})),this.alphaKeys.length>1&&this.alphaKeys.sort((function(t,e){return t.time-e.time}))},e.evaluate=function(t){return this.evaluateFast(new Jr,t)},e.evaluateFast=function(t,e){return this.getRGB(t,e),t._set_a_unsafe(this.getAlpha(e)),t},e.randomColor=function(){return this.getRandomColor(new Jr)},e.getRandomColor=function(t){var e=this.colorKeys[Math.trunc(pr()*this.colorKeys.length)],n=this.alphaKeys[Math.trunc(pr()*this.alphaKeys.length)];return t.set(e.color),t._set_a_unsafe(n.alpha),t},e.getRGB=function(t,e){var n=this.colorKeys,r=n.length;if(r>1){e=Ar(e,1+ur);for(var i=1;i<r;++i){var a=n[i-1].time,s=n[i].time;if(e>=a&&e<s){if(this.mode===zu.Fixed)return Jr.copy(t,n[i].color),t;var o=(e-a)/(s-a);return Jr.lerp(t,n[i-1].color,n[i].color,o),t}}var m=r-1;cr(e,n[m].time,ur)?Jr.copy(t,n[m].color):e<n[0].time?Jr.lerp(t,Jr.BLACK,n[0].color,e/n[0].time):e>n[m].time&&Jr.lerp(t,n[m].color,Jr.BLACK,(e-n[m].time)/(1-n[m].time))}else 1===r?Jr.copy(t,n[0].color):Jr.copy(t,Jr.WHITE);return t},e.getAlpha=function(t){var e=this.alphaKeys,n=e.length;if(n>1){t=Ar(t,1+ur);for(var r=1;r<n;++r){var i=e[r-1].time,a=e[r].time;if(t>=i&&t<a){if(this.mode===zu.Fixed)return e[r].alpha;var s=(t-i)/(a-i);return yr(e[r-1].alpha,e[r].alpha,s)}}var o=n-1;return cr(t,e[o].time,ur)?e[o].alpha:t<e[0].time?yr(0,e[0].alpha,t/e[0].time):t>e[o].time?yr(e[o].alpha,0,(t-e[o].time)/(1-e[o].time)):255}return 1===n?e[0].alpha:255},t}());Su.Mode=zu,pn.fastDefine("cc.Gradient",Su,{colorKeys:[],alphaKeys:[],mode:zu.Blend}),pn.Attr.setClassAttr(Su,"colorKeys","visible",!0),pn.Attr.setClassAttr(Su,"alphaKeys","visible",!0),pn.Attr.setClassAttr(Su,"mode","visible",!0);var Pu=function(){this.time=0,this.value=0,this.inTangent=0,this.outTangent=0};pn.fastDefine("cc.Keyframe",Pu,{time:0,value:0,inTangent:0,outTangent:0});var Cu=function(){function t(){this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}return t.prototype.evaluate=function(t){return Ru(t-this.time,this.coefficient)},t}();function Ru(t,e){return t*(t*(t*e[0]+e[1])+e[2])+e[3]}var Uu,Lu,ku=t("cQ",function(){function t(t){if(void 0===t&&(t=null),this._curve=void 0,this.cachedKey=void 0,t instanceof Rm)this._curve=t;else{var e=new Rm;this._curve=e,e.preExtrapolation=gs.LOOP,e.postExtrapolation=gs.CLAMP,t?e.assignSorted(t.map((function(t){return[t.time,{interpolationMode:ps.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]}))):e.assignSorted([[0,{interpolationMode:ps.CUBIC,value:1}],[1,{interpolationMode:ps.CUBIC,value:1}]])}this.cachedKey=new Cu}var e=t.prototype;return e.addKey=function(t){t?this._curve.addKeyFrame(t.time,{interpolationMode:ps.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}):this._curve.clear()},e.evaluate_slow=function(t){return this._curve.evaluate(t)},e.evaluate=function(t){var e=this.cachedKey,n=this._curve,r=n.keyFramesCount-1,i=t,a=t<0?n.preExtrapolation:n.postExtrapolation,s=n.getKeyframeTime(0),o=n.getKeyframeTime(r);switch(a){case gs.LOOP:i=Ar(t-s,o-s)+s;break;case gs.PING_PONG:i=Nr(t-s,o-s)+s;break;case gs.CLAMP:default:i=lr(t,s,o)}if(i>=e.time&&i<e.endTime)return e.evaluate(i);var m=this.findIndex(e,i),u=Math.min(m+1,r);return this.calcOptimizedKey(e,m,u),e.evaluate(i)},e.calcOptimizedKey=function(t,e,n){var r=this._curve.getKeyframeTime(e),i=this._curve.getKeyframeTime(n),a=this._curve.getKeyframeValue(e),s=a.value,o=a.leftTangent,m=this._curve.getKeyframeValue(n),u=m.value,h=m.rightTangent;t.index=e,t.time=r,t.endTime=i;var c=i-r,l=u-s,f=1/(c*c),y=o*c,d=h*c;t.coefficient[0]=(y+d-l-l)*f/c,t.coefficient[1]=(l+l+l-y-y-d)*f,t.coefficient[2]=o,t.coefficient[3]=s},e.findIndex=function(t,e){var n=this._curve,r=n.keyFramesCount,i=t.index;if(-1!==i)if(e>n.getKeyframeTime(i))for(var a=0;a<3;a++){var s=i+a;if(s+1<r&&n.getKeyframeTime(s+1)>e)return s}else for(var o=0;o<3;o++){var m=i-o;if(m>=0&&n.getKeyframeTime(m-1)<=e)return m-1}for(var u,h=0,c=r;c-h>1;)u=Math.floor((h+c)/2),n.getKeyframeTime(u)>=e?c=u:h=u;return h},m(t,[{key:"_internalCurve",get:function(){return this._curve}},{key:"keyFrames",get:function(){return Array.from(this._curve.keyframes()).map((function(t){var e=t[0],n=t[1],r=new Pu;return r.time=e,r.value=n.value,r.inTangent=n.leftTangent,r.outTangent=n.rightTangent,r}))},set:function(t){this._curve.assignSorted(t.map((function(t){return[t.time,{interpolationMode:ps.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]})))}},{key:"preWrapMode",get:function(){return Bu(this._curve.preExtrapolation)},set:function(t){this._curve.preExtrapolation=Fu(t)}},{key:"postWrapMode",get:function(){return Bu(this._curve.postExtrapolation)},set:function(t){this._curve.postExtrapolation=Fu(t)}}]),t}());function Fu(t){switch(t){default:case Uu.Default:case Uu.Normal:case Uu.Clamp:return gs.CLAMP;case Uu.PingPong:return gs.PING_PONG;case Uu.Loop:return gs.LOOP}}function Bu(t){switch(t){default:case gs.LINEAR:case gs.CLAMP:return Uu.Clamp;case gs.PING_PONG:return Uu.PingPong;case gs.LOOP:return Uu.Loop}}function Du(){var t=new Rm;return t.assignSorted([[0,{interpolationMode:ps.CUBIC,value:1}],[1,{interpolationMode:ps.CUBIC,value:1}]]),t}ku.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],pn.fastDefine("cc.AnimationCurve",ku,{_curve:null}),t("cF",Uu),function(t){t[t.Default=0]="Default",t[t.Normal=1]="Normal",t[t.Loop=2]="Loop",t[t.ShouldWrap=4]="ShouldWrap",t[t.Clamp=8]="Clamp",t[t.PingPong=22]="PingPong",t[t.Reverse=36]="Reverse"}(Uu||t("cF",Uu={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.BEZIER=1]="BEZIER",t[t.CATMULL_ROM=2]="CATMULL_ROM"}(Lu||(Lu={}));var Hu,qu=4294967295,ju=new Gr,Vu=new Gr,Gu=new Gr,Wu=new Gr,Ku=function(){function t(t,e){void 0===t&&(t=Lu.CATMULL_ROM),void 0===e&&(e=[]),this._type=void 0,this._mode=Lu.CATMULL_ROM,this._knots=[],this._type=ji.SHAPE_SPLINE,this._mode=t;for(var n=0;n<e.length;n++)this._knots[n]=new Gr(e[n])}t.create=function(e,n){return void 0===n&&(n=[]),new t(e,n)},t.clone=function(e){return new t(e.mode,e.knots)},t.copy=function(t,e){t._mode=e.mode,t._knots.length=0;for(var n=e.knots,r=n.length,i=0;i<r;i++)t._knots[i]=new Gr(n[i]);return t};var e=t.prototype;return e.setModeAndKnots=function(t,e){this._mode=t,this._knots.length=0;for(var n=0;n<e.length;n++)this._knots[n]=new Gr(e[n])},e.clearKnots=function(){this._knots.length=0},e.getKnotCount=function(){return this._knots.length},e.addKnot=function(t){this._knots.push(new Gr(t))},e.insertKnot=function(t,e){var n=new Gr(e);t>=this._knots.length?this._knots.push(n):this._knots.splice(t,0,n)},e.removeKnot=function(t){t>=0&&this._knots.length,this._knots.splice(t,1)},e.setKnot=function(t,e){t>=0&&this._knots.length,this._knots[t].set(e)},e.getKnot=function(t){return t>=0&&this._knots.length,this._knots[t]},e.getPoint=function(e,n){void 0===n&&(n=qu),e=lr(e,0,1);var r=this.getSegments();if(0===r)return new Gr(0,0,0);if(n===qu){var i=1/r;n=Math.floor(e/i),e=e%i/i}if(n>=r)return new Gr(this._knots[this._knots.length-1]);switch(this._mode){case Lu.LINEAR:return t.calcLinear(this._knots[n],this._knots[n+1],e);case Lu.BEZIER:return t.calcBezier(this._knots[4*n],this._knots[4*n+1],this._knots[4*n+2],this._knots[4*n+3],e);case Lu.CATMULL_ROM:var a=n>0?this._knots[n-1]:this._knots[n],s=n+2<this._knots.length?this._knots[n+2]:this._knots[n+1];return t.calcCatmullRom(a,this._knots[n],this._knots[n+1],s,e);default:return new Gr(0,0,0)}},e.getPoints=function(t,e){if(void 0===e&&(e=qu),0===t)return[];if(1===t)return[this.getPoint(0,e)];for(var n=[],r=1/(t-1),i=0;i<t;i++){var a=i*r,s=this.getPoint(a,e);n.push(s)}return n},e.getSegments=function(){var t=this._knots.length;switch(this._mode){case Lu.LINEAR:case Lu.CATMULL_ROM:return t<2?(F(14300),0):t-1;case Lu.BEZIER:return t<4||t%4!=0?(F(14301),0):t/4}},t.calcLinear=function(t,e,n){var r=new Gr;return Gr.multiplyScalar(ju,t,1-n),Gr.multiplyScalar(Vu,e,n),Gr.add(r,ju,Vu),r},t.calcBezier=function(t,e,n,r,i){var a=new Gr,s=1-i;return Gr.multiplyScalar(ju,t,s*s*s),Gr.multiplyScalar(Vu,e,3*i*s*s),Gr.multiplyScalar(Gu,n,3*i*i*s),Gr.multiplyScalar(Wu,r,i*i*i),Gr.add(ju,ju,Vu),Gr.add(Gu,Gu,Wu),Gr.add(a,ju,Gu),a},t.calcCatmullRom=function(t,e,n,r,i){var a=new Gr,s=i*i,o=s*i;return Gr.multiplyScalar(ju,t,-.5*o+s-.5*i),Gr.multiplyScalar(Vu,e,1.5*o-2.5*s+1),Gr.multiplyScalar(Gu,n,-1.5*o+2*s+.5*i),Gr.multiplyScalar(Wu,r,.5*o-.5*s),Gr.add(ju,ju,Vu),Gr.add(Gu,Gu,Wu),Gr.add(a,ju,Gu),a},m(t,[{key:"type",get:function(){return this._type}},{key:"mode",get:function(){return this._mode}},{key:"knots",get:function(){return this._knots}}]),t}();function Qu(t,e){console.warn(t+" is deprecated, please use "+e+" instead.")}t("cs",Hu),function(t){t[t.ALL=0]="ALL",t[t.CLOSEST=1]="CLOSEST",t[t.ANY=2]="ANY"}(Hu||t("cs",Hu={})),Wn(Ga,"intersect",[{name:"ray_aabb",newName:"rayAABB"},{name:"ray_plane",newName:"rayPlane"},{name:"ray_triangle",newName:"rayTriangle"},{name:"ray_sphere",newName:"raySphere"},{name:"ray_obb",newName:"rayOBB"},{name:"ray_capsule",newName:"rayCapsule"},{name:"ray_subMesh",newName:"raySubMesh"},{name:"ray_mesh",newName:"rayMesh"},{name:"ray_model",newName:"rayModel"},{name:"line_plane",newName:"linePlane"},{name:"line_triangle",newName:"lineTriangle"},{name:"line_aabb",newName:"lineAABB"},{name:"line_obb",newName:"lineOBB"},{name:"line_sphere",newName:"lineSphere"},{name:"aabb_aabb",newName:"aabbWithAABB"},{name:"aabb_obb",newName:"aabbWithOBB"},{name:"aabb_plane",newName:"aabbPlane"},{name:"aabb_frustum",newName:"aabbFrustum"},{name:"aabbFrustum_accurate",newName:"aabbFrustumAccurate"},{name:"obb_point",newName:"obbPoint"},{name:"obb_plane",newName:"obbPlane"},{name:"obb_frustum",newName:"obbFrustum"},{name:"obbFrustum_accurate",newName:"obbFrustumAccurate"},{name:"obb_obb",newName:"obbWithOBB"},{name:"obb_capsule",newName:"obbCapsule"},{name:"sphere_plane",newName:"spherePlane"},{name:"sphere_frustum",newName:"sphereFrustum"},{name:"sphereFrustum_accurate",newName:"sphereFrustumAccurate"},{name:"sphere_sphere",newName:"sphereWithSphere"},{name:"sphere_aabb",newName:"sphereAABB"},{name:"sphere_obb",newName:"sphereOBB"},{name:"sphere_capsule",newName:"sphereCapsule"},{name:"capsule_capsule",newName:"capsuleWithCapsule"}]);var Yu=function(t){function e(){var e;return e=t.call(this)||this,Qu("line","Line"),e}return h(e,t),e}(Vi),Xu=function(t){function e(){var e;return e=t.call(this)||this,Qu("plane","Plane"),e}return h(e,t),e}(Xa),Zu=function(t){function e(){var e;return e=t.call(this)||this,Qu("ray","Ray"),e}return h(e,t),e}(Gi),Ju=function(t){function e(){var e;return e=t.call(this)||this,Qu("triangle","Triangle"),e}return h(e,t),e}(Za),$u=function(t){function e(){var e;return e=t.call(this)||this,Qu("sphere","Sphere"),e}return h(e,t),e}(na),th=function(t){function e(){var e;return e=t.call(this)||this,Qu("aabb","AABB"),e}return h(e,t),e}(is),eh=function(t){function e(){var e;return e=t.call(this)||this,Qu("obb","OBB"),e}return h(e,t),e}(ds),nh=function(t){function e(){var e;return e=t.call(this)||this,Qu("capsule","Capsule"),e}return h(e,t),e}(as),rh=function(t){function e(){var e;return e=t.call(this)||this,Qu("frustum","Frustum"),e}return h(e,t),e}(cs),ih=Object.freeze({__proto__:null,distance:qi,enums:ji,intersect:Ga,Line:Vi,Plane:Xa,Ray:Gi,Triangle:Za,Sphere:na,AABB:is,OBB:ds,Capsule:as,Frustum:cs,Keyframe:Pu,AnimationCurve:ku,get WrapModeMask(){return Uu},get SplineMode(){return Lu},Spline:Ku,constructLegacyCurveAndConvert:Du,OptimizedKey:Cu,evalOptCurve:Ru,get ERaycastMode(){return Hu},line:Yu,plane:Xu,ray:Zu,triangle:Ju,sphere:$u,aabb:th,obb:eh,capsule:nh,frustum:rh});t("j",ih);var ah=t("b3",function(){function t(){this._id="",this._priority=0,this._executeInEditMode=!1}t.sortByPriority=function(t,e){return t._priority<e._priority?1:t._priority>e.priority?-1:0};var e=t.prototype;return e.init=function(){},e.update=function(){},e.postUpdate=function(){},e.destroy=function(){},m(t,[{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}}]),t}());ah.Priority=xe({LOW:0,MEDIUM:100,HIGH:200,SCHEDULER:1<<31>>>0});var sh=new zt("Scheduler"),oh=function(){function t(t,e,n,r){this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=t,this.priority=e,this.paused=n,this.markedForDeletion=r}return t.get=function(e,n,r,i){var a=t._listEntries.pop();return a?(a.target=e,a.priority=n,a.paused=r,a.markedForDeletion=i):a=new t(e,n,r,i),a},t.put=function(e){t._listEntries.length<20&&(e.target=null,t._listEntries.push(e))},t}();oh._listEntries=[];var mh=function(){function t(t,e,n,r){this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=t,this.entry=e,this.target=n,this.callback=r}return t.get=function(e,n,r,i){var a=t._hashUpdateEntries.pop();return a?(a.list=e,a.entry=n,a.target=r,a.callback=i):a=new t(e,n,r,i),a},t.put=function(e){t._hashUpdateEntries.length<20&&(e.list=e.entry=e.target=e.callback=null,t._hashUpdateEntries.push(e))},t}();mh._hashUpdateEntries=[];var uh=function(){function t(t,e,n,r,i,a){this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=t,this.target=e,this.timerIndex=n,this.currentTimer=r,this.currentTimerSalvaged=i,this.paused=a}return t.get=function(e,n,r,i,a,s){var o=t._hashTimerEntries.pop();return o?(o.timers=e,o.target=n,o.timerIndex=r,o.currentTimer=i,o.currentTimerSalvaged=a,o.paused=s):o=new t(e,n,r,i,a,s),o},t.put=function(e){t._hashTimerEntries.length<20&&(e.timers=e.target=e.currentTimer=null,t._hashTimerEntries.push(e))},t}();uh._hashTimerEntries=[];var hh=function(){function t(){this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null}t.get=function(){return t._timers.pop()||new t},t.put=function(e){t._timers.length<20&&!e._lock&&(e._scheduler=e._target=e._callback=null,t._timers.push(e))};var e=t.prototype;return e.initWithCallback=function(t,e,n,r,a,s){return this._lock=!1,this._scheduler=t,this._target=n,this._callback=e,this._timesExecuted=0,this._elapsed=-1,this._interval=r,this._delay=s,this._useDelay=this._delay>0,this._repeat=a,this._runForever=this._repeat===i.macro.REPEAT_FOREVER,!0},e.getInterval=function(){return this._interval},e.setInterval=function(t){this._interval=t},e.update=function(t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},e.getCallback=function(){return this._callback},e.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},e.cancel=function(){this._scheduler&&this._callback&&this._target&&this._scheduler.unscheduleForTimer(this,this._target)},t}();hh._timers=[];var ch=t("aS",function(t){function e(){var e;return(e=t.call(this)||this)._timeScale=void 0,e._updatesNegList=void 0,e._updates0List=void 0,e._updatesPosList=void 0,e._hashForUpdates=void 0,e._hashForTimers=void 0,e._currentTarget=void 0,e._currentTargetSalvaged=void 0,e._updateHashLocked=void 0,e._arrayForTimers=void 0,e._timeScale=1,e._updatesNegList=[],e._updates0List=[],e._updatesPosList=[],e._hashForUpdates=Dt(!0),e._hashForTimers=Dt(!0),e._currentTarget=null,e._currentTargetSalvaged=!1,e._updateHashLocked=!1,e._arrayForTimers=[],e}h(e,t),e.enableForTarget=function(t){var e=!1;(t.uuid||t.id)&&(e=!0),e||(t.id=sh.getNewId())};var n=e.prototype;return n.setTimeScale=function(t){this._timeScale=t},n.getTimeScale=function(){return this._timeScale},n.update=function(t){var e,n,r,i,a;for(this._updateHashLocked=!0,1!==this._timeScale&&(t*=this._timeScale),e=0,r=(n=this._updatesNegList).length;e<r;e++){var s,o;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(s=(o=i.target).update)||void 0===s||s.call(o,t)}for(e=0,r=(n=this._updates0List).length;e<r;e++){var m,u;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(m=(u=i.target).update)||void 0===m||m.call(u,t)}for(e=0,r=(n=this._updatesPosList).length;e<r;e++){var h,c;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(h=(c=i.target).update)||void 0===h||h.call(c,t)}var l=this._arrayForTimers;for(e=0;e<l.length;e++){var f;if(a=l[e],this._currentTarget=a,this._currentTargetSalvaged=!1,!a.paused&&a.timers)for(a.timerIndex=0;a.timerIndex<a.timers.length;++a.timerIndex)a.currentTimer=a.timers[a.timerIndex],a.currentTimerSalvaged=!1,a.currentTimer.update(t),a.currentTimer=null;this._currentTargetSalvaged&&0===(null===(f=this._currentTarget.timers)||void 0===f?void 0:f.length)&&(this._removeHashElement(this._currentTarget),--e)}for(e=0,n=this._updatesNegList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updates0List;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updatesPosList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;this._updateHashLocked=!1,this._currentTarget=null},n.schedule=function(t,e,n,r,a,s){var o,m,u,h;"function"!=typeof t?(F(1514),u=e,h=t):(u=t,h=e),3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(s=!!r,r=i.macro.REPEAT_FOREVER,a=0),X(Boolean(h),1502);var c=h.uuid||h.id;if(c){var l,f,y=this._hashForTimers[c];if(y?y.paused!==s&&F(1511):(y=uh.get(null,h,0,null,!1,Boolean(s)),this._arrayForTimers.push(y),this._hashForTimers[c]=y),null==y.timers)y.timers=[];else for(f=0;f<y.timers.length;++f)if((l=y.timers[f])&&u===l.getCallback())return L(1507,l.getInterval(),n),void l.setInterval(n);(l=hh.get()).initWithCallback(this,u,h,n,null!==(o=r)&&void 0!==o?o:0,null!==(m=a)&&void 0!==m?m:0),y.timers.push(l),this._currentTarget===y&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}else D(1510)},n.scheduleUpdate=function(t,e,n){var r=t.uuid||t.id;if(r){var i=this._hashForUpdates[r];if(i&&i.entry){if(i.entry.priority===e)return i.entry.markedForDeletion=!1,void(i.entry.paused=n);if(this._updateHashLocked)return L(1506),i.entry.markedForDeletion=!1,void(i.entry.paused=n);this.unscheduleUpdate(t)}var a,s=oh.get(t,e,n,!1);0===e?(a=this._updates0List,this._appendIn(a,s)):(a=e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(a,s,e)),this._hashForUpdates[r]=mh.get(a,s,t,null)}else D(1510)},n.unschedule=function(t,e){if(e&&t){var n=e.uuid||e.id;if(n){var r=this._hashForTimers[n];if(r){var i=r.timers;if(!i)return;for(var a=0,s=i.length;a<s;a++){var o=i[a];if(t===o.getCallback())return o!==r.currentTimer||r.currentTimerSalvaged||(r.currentTimerSalvaged=!0),i.splice(a,1),hh.put(o),r.timerIndex>=a&&r.timerIndex--,void(0===i.length&&(this._currentTarget===r?this._currentTargetSalvaged=!0:this._removeHashElement(r)))}}}else D(1510)}},n.unscheduleForTimer=function(t,e){var n=e.uuid||e.id,r=this._hashForTimers[n].timers;if(r)for(var i=0,a=r.length;i<a;i++)if(r[i]===t)return r.splice(i,1),void(0===r.length&&(this._currentTargetSalvaged=!0))},n.unscheduleUpdate=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForUpdates[e];null!=n&&n.entry&&(this._updateHashLocked?n.entry.markedForDeletion=!0:this._removeUpdateFromHash(n.entry))}else D(1510)}},n.unscheduleAllForTarget=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];if(null!=n&&n.timers){var r=n.timers;n.currentTimer&&r.indexOf(n.currentTimer)>-1&&!n.currentTimerSalvaged&&(n.currentTimerSalvaged=!0);for(var i=0,a=r.length;i<a;i++)hh.put(r[i]);r.length=0,this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)}this.unscheduleUpdate(t)}else D(1510)}},n.unscheduleAll=function(){this.unscheduleAllWithMinPriority(ah.Priority.SCHEDULER)},n.unscheduleAllWithMinPriority=function(t){var e,n,r,i=this._arrayForTimers;for(e=i.length-1;e>=0;e--)(n=i[e]).target&&this.unscheduleAllForTarget(n.target);var a=0;if(t<0)for(e=0;e<this._updatesNegList.length;){var s;a=this._updatesNegList.length,null!==(s=r=this._updatesNegList[e])&&void 0!==s&&s.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesNegList.length&&e++}if(t<=0)for(e=0;e<this._updates0List.length;){var o;a=this._updates0List.length,null!==(o=r=this._updates0List[e])&&void 0!==o&&o.target&&this.unscheduleUpdate(r.target),a===this._updates0List.length&&e++}for(e=0;e<this._updatesPosList.length;){var m;a=this._updatesPosList.length,null!==(m=r=this._updatesPosList[e])&&void 0!==m&&m.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesPosList.length&&e++}},n.isScheduled=function(t,e){X(Boolean(t),1508),X(Boolean(e),1509);var n=e.uuid||e.id;if(!n)return D(1510),!1;var r=this._hashForTimers[n];if(!r)return!1;if(null==r.timers)return!1;for(var i=r.timers,a=0;a<i.length;++a)if(t===i[a].getCallback())return!0;return!1},n.pauseAllTargets=function(){return this.pauseAllTargetsWithMinPriority(ah.Priority.SCHEDULER)},n.pauseAllTargetsWithMinPriority=function(t){var e,n,r,i,a=[],s=this._arrayForTimers;for(n=0,r=s.length;n<r;n++){var o;null!==(o=e=s[n])&&void 0!==o&&o.target&&(e.paused=!0,a.push(e.target))}if(t<0)for(n=0;n<this._updatesNegList.length;n++){var m;null!==(m=i=this._updatesNegList[n])&&void 0!==m&&m.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}if(t<=0)for(n=0;n<this._updates0List.length;n++){var u;null!==(u=i=this._updates0List[n])&&void 0!==u&&u.target&&(i.paused=!0,a.push(i.target))}for(n=0;n<this._updatesPosList.length;n++){var h;null!==(h=i=this._updatesPosList[n])&&void 0!==h&&h.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}return a},n.resumeTargets=function(t){if(t)for(var e=0;e<t.length;e++)this.resumeTarget(t[e])},n.pauseTarget=function(t){X(Boolean(t),1503);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!0);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!0)}else D(1510)},n.resumeTarget=function(t){X(Boolean(t),1504);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!1);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!1)}else D(1510)},n.isTargetPaused=function(t){X(Boolean(t),1505);var e=t.uuid||t.id;if(!e)return D(1510),!1;var n=this._hashForTimers[e];if(n)return n.paused;var r=this._hashForUpdates[e];return!(null==r||!r.entry)&&r.entry.paused},n._removeHashElement=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){delete this._hashForTimers[e];for(var n=this._arrayForTimers,r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice(r,1);break}uh.put(t)}}},n._removeUpdateFromHash=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){var n=this._hashForUpdates[e];if(n){var r=n.list,i=n.entry;if(r)for(var a=0,s=r.length;a<s;a++)if(r[a]===i){r.splice(a,1);break}delete this._hashForUpdates[e],i&&oh.put(i),mh.put(n)}}}},n._priorityIn=function(t,e,n){for(var r=0;r<t.length;r++)if(n<t[r].priority)return void t.splice(r,0,e);t.push(e)},n._appendIn=function(t,e){t.push(e)},e}(ah));ch.ID="scheduler",i.Scheduler=ch;var lh={};Wn(lh,"vmath",[{name:"vec2",newName:"Vec2",target:Oi,targetName:"math"},{name:"vec3",newName:"Vec3",target:Oi,targetName:"math"},{name:"vec4",newName:"Vec4",target:Oi,targetName:"math"},{name:"quat",newName:"Quat",target:Oi,targetName:"math"},{name:"mat3",newName:"Mat3",target:Oi,targetName:"math"},{name:"mat4",newName:"Mat4",target:Oi,targetName:"math"},{name:"color4",newName:"Color",target:Oi,targetName:"math"},{name:"rect",newName:"Rect",target:Oi,targetName:"math"},{name:"approx",newName:"approx",target:Oi,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:Oi,targetName:"math"},{name:"equals",newName:"equals",target:Oi,targetName:"math"},{name:"clamp",newName:"clamp",target:Oi,targetName:"math"},{name:"clamp01",newName:"clamp01",target:Oi,targetName:"math"},{name:"lerp",newName:"lerp",target:Oi,targetName:"math"},{name:"toRadian",newName:"toRadian",target:Oi,targetName:"math"},{name:"toDegree",newName:"toDegree",target:Oi,targetName:"math"},{name:"random",newName:"random",target:Oi,targetName:"math"},{name:"randomRange",newName:"randomRange",target:Oi,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:Oi,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:Oi,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:Oi,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:Oi,targetName:"math"},{name:"repeat",newName:"repeat",target:Oi,targetName:"math"},{name:"pingPong",newName:"pingPong",target:Oi,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:Oi,targetName:"math"}]),i.vmath=lh,Wn(ch.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:ch,targetName:"Scheduler"}]),Wn(ch,"Scheduler",[{name:"PRIORITY_SYSTEM",newName:"System.Priority.SCHEDULER",customGetter:function(){return ah.Priority.SCHEDULER}}]),Kn(ch,"Scheduler",[{name:"PRIORITY_NON_SYSTEM",suggest:"Use enum` System.Priority` instead"}]),nr({replaceProperty:{since:"3.6.0",removed:!1},removeProperty:{since:"3.6.0",removed:!1},markAsWarning:{since:"3.6.0",removed:!1},setDefaultLogTimes:{since:"3.6.0",removed:!1}});var fh=new Gr;function yh(t,e,n,r){r||(r=new Gr),t.convertToUINode(e,n,r);var i=n.position;return r.add(i),r}function dh(t,e,n){return n||(n=new Gr),t.worldToScreen(e,n),n.x/=i.view.getScaleX(),n.y/=i.view.getScaleY(),n}var vh=t("ar",{WorldNode3DToLocalNodeUI:yh,WorldNode3DToWorldNodeUI:dh});i.pipelineUtils=vh,Wn(i.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.Camera.prototype",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[3]||fh;return r.convertToUINode(e[1],e[2],i),i.add(e[2].position),e[3]||i.clone()}}]),Qn(ge,"js",[{name:"js",suggest:"'js.js' is deprecated since v3.7.0, please access 'js' directly instead."}]);var ph=function(t){function e(){var e,n;return(n=t.call(this)||this).isFrameRotated=!1,n.handleResizeEvent=!0,n._cbToUpdateFrameBuffer=void 0,n._resolutionScale=1,n._isProportionalToFrame=!1,null===(e=rt.onWindowResize)||void 0===e||e.call(rt,(function(){n.emit("window-resize",n.windowSize.width,n.windowSize.height)})),n}h(e,t);var n=e.prototype;return n.init=function(t,e){this._cbToUpdateFrameBuffer=e,this._cbToUpdateFrameBuffer()},n.requestFullScreen=function(){return Promise.reject(new Error("request fullscreen is not supported on this platform."))},n.exitFullScreen=function(){return Promise.reject(new Error("exit fullscreen is not supported on this platform."))},m(e,[{key:"supportFullScreen",get:function(){return!1}},{key:"isFullScreen",get:function(){return!1}},{key:"devicePixelRatio",get:function(){return rt.getSystemInfoSync().pixelRatio}},{key:"windowSize",get:function(){var t=rt.getSystemInfoSync(),e=this.devicePixelRatio,n=t.windowWidth,r=t.windowHeight;return new Ei(n*e,r*e)},set:function(){F(1221)}},{key:"resolution",get:function(){var t=this.windowSize,e=this.resolutionScale;return new Ei(t.width*e,t.height*e)}},{key:"resolutionScale",get:function(){return this._resolutionScale},set:function(t){var e;t!==this._resolutionScale&&(this._resolutionScale=t,null===(e=this._cbToUpdateFrameBuffer)||void 0===e||e.call(this))}},{key:"orientation",get:function(){return rt.orientation},set:function(){console.warn("Setting orientation is not supported yet.")}},{key:"safeAreaEdge",get:function(){var t=rt.getSafeArea(),e=this.windowSize,n=this.devicePixelRatio,r=t.top*n,i=e.height-t.bottom*n,a=t.left*n,s=e.width-t.right*n;return this.orientation===q.PORTRAIT?r<i?r=i:i=r:a<s?a=s:s=a,{top:r,bottom:i,left:a,right:s}}},{key:"isProportionalToFrame",get:function(){return this._isProportionalToFrame},set:function(){}}]),e}(Un),gh=t("cf",new ph),_h=function(){function t(){}var e=t.prototype;return e.init=function(){var t,e,n=null===(t=Ne.querySettings(Ae.Category.SCREEN,"exactFitScreen"))||void 0===t||t,r=null!==(e=Ne.querySettings(Ae.Category.SCREEN,"orientation"))&&void 0!==e?e:"auto",a=3===Ne.querySettings(Ae.Category.RENDERING,"renderMode");gh.init({exactFitScreen:n,configOrientation:r,isHeadlessMode:a},(function(){var t,e=i.director;null!==(t=e.root)&&void 0!==t&&t.pipeline?e.root.pipeline.shadingScale=gh.resolutionScale:F(1220)}))},e.fullScreen=function(){return gh.isFullScreen},e.requestFullScreen=function(t,e,n){return arguments.length>0&&F(1400,"screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)","screen.requestFullScreen(): Promise"),gh.requestFullScreen().then((function(){null==e||e.call(document)})).catch((function(t){T(t),null==n||n.call(document)}))},e.exitFullScreen=function(){return gh.exitFullScreen()},e.autoFullScreen=function(t,e){var n;null===(n=this.requestFullScreen(t,e))||void 0===n||n.catch((function(t){z(t)}))},e.disableAutoFullScreen=function(){},e.on=function(t,e,n){gh.on(t,e,n)},e.once=function(t,e,n){gh.once(t,e,n)},e.off=function(t,e,n){gh.off(t,e,n)},m(t,[{key:"devicePixelRatio",get:function(){return gh.devicePixelRatio}},{key:"windowSize",get:function(){return gh.windowSize},set:function(t){gh.windowSize=t}},{key:"resolution",get:function(){return gh.resolution}},{key:"supportsFullScreen",get:function(){return gh.supportFullScreen}}]),t}(),xh=t("aO",new _h);i.screen=xh;var bh=t("aP",{Feature:Q,hasFeature:function(t){return kn.hasFeature(t)},NetworkType:G,Language:V,OS:W,Platform:K,BrowserType:j,isNative:kn.isNative,isBrowser:kn.isBrowser,isMobile:kn.isMobile,isLittleEndian:kn.isLittleEndian,platform:kn.platform,language:kn.language,languageCode:kn.nativeLanguage,os:kn.os,osVersion:kn.osVersion,osMainVersion:kn.osMainVersion,browserType:kn.browserType,browserVersion:kn.browserVersion,isXR:kn.isXR,windowPixelResolution:xh.windowSize,capabilities:{canvas:!0,opengl:!0,webp:kn.hasFeature(Q.WEBP),imageBitmap:kn.hasFeature(Q.IMAGE_BITMAP),touches:kn.hasFeature(Q.INPUT_TOUCH),mouse:kn.hasFeature(Q.EVENT_MOUSE),keyboard:kn.hasFeature(Q.EVENT_KEYBOARD),accelerometer:kn.hasFeature(Q.EVENT_ACCELEROMETER)},localStorage:{},getNetworkType:function(){return kn.networkType},getBatteryLevel:function(){return kn.getBatteryLevel()},garbageCollect:function(){kn.triggerGC()},isObjectValid:function(t){return null!=t},__isWebIOS14OrIPadOS14Env:!1,dump:function(){var t="";t+="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="supports webp: "+bh.hasFeature(Q.WEBP)+"\r\n",t+="supports bitmap: "+bh.hasFeature(Q.IMAGE_BITMAP)+"\r\n",t+="supports touches: "+bh.hasFeature(Q.INPUT_TOUCH)+"\r\n",t+="supports mouse: "+bh.hasFeature(Q.EVENT_MOUSE)+"\r\n",t+="supports keyboard: "+bh.hasFeature(Q.EVENT_KEYBOARD)+"\r\n",t+="supports accelerometer: "+bh.hasFeature(Q.EVENT_ACCELEROMETER)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",I(t+="Using "+(i.game.renderType===i.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n")},openURL:function(t){kn.openURL(t)},init:function(){var t=this;return Promise.resolve().then((function(){return kn.init()})).then((function(){try{var e=bh.localStorage=window.localStorage;e.setItem("storage",""),e.removeItem("storage"),e=null}catch(e){var n=function(){F(5200)};t.localStorage={getItem:n,setItem:n,clear:n,removeItem:n,key:n,length:0}}t.__isWebIOS14OrIPadOS14Env=(bh.os===W.IOS||bh.os===W.OSX)&&kn.isBrowser&&/(OS 14)|(Version\/14)/.test(window.navigator.userAgent)}))},now:function(){return kn.now()},restartVM:function(){kn.restartJSVM()},getSafeAreaRect:function(){var t=i.view,e=gh.safeAreaEdge,n=gh.windowSize,r=new xi(e.left,e.bottom),a=new xi(n.width-e.right,n.height-e.top);t._convertToUISpace(r),t._convertToUISpace(a);var s=r.x,o=r.y,m=a.x-r.x,u=a.y-r.y;return new Ni(s,o,m,u)}});i.sys=bh,Qn(i,"cc",[{name:"winSize",suggest:"please use view.getVisibleSize() instead."}]),Qn(bh,"sys",[{name:"capabilities",suggest:"please use sys.hasFeature() method instead."}]),Wn(bh,"sys",["UNKNOWN","ENGLISH","CHINESE","FRENCH","ITALIAN","GERMAN","SPANISH","DUTCH","RUSSIAN","KOREAN","JAPANESE","HUNGARIAN","PORTUGUESE","ARABIC","NORWEGIAN","POLISH","TURKISH","UKRAINIAN","ROMANIAN","BULGARIAN"].map((function(t){return{name:"LANGUAGE_"+t,newName:t,target:bh.Language,targetName:"sys.Language"}}))),Wn(bh,"sys",["UNKNOWN","IOS","ANDROID","WINDOWS","LINUX","OSX"].map((function(t){return{name:"OS_"+t,newName:t,target:bh.OS,targetName:"sys.OS"}}))),Wn(bh,"sys",["UNKNOWN","WECHAT","ANDROID","IE","EDGE","QQ","MOBILE_QQ","UC","UCBS","BAIDU_APP","BAIDU","MAXTHON","OPERA","OUPENG","MIUI","FIREFOX","SAFARI","CHROME","LIEBAO","QZONE","SOUGOU","HUAWEI"].map((function(t){return{name:"BROWSER_TYPE_"+t,newName:t,target:bh.BrowserType,targetName:"sys.BrowserType"}}))),Wn(bh,"sys",[{name:"BROWSER_TYPE_360",newName:"BROWSER_360",target:bh.BrowserType,targetName:"sys.BrowserType"}]),Wn(bh,"sys",["UNKNOWN","EDITOR_PAGE","EDITOR_CORE","MOBILE_BROWSER","DESKTOP_BROWSER","WIN32","MACOS","IOS","ANDROID","OHOS","WECHAT_GAME","BAIDU_MINI_GAME","XIAOMI_QUICK_GAME","ALIPAY_MINI_GAME","BYTEDANCE_MINI_GAME","OPPO_MINI_GAME","VIVO_MINI_GAME","HUAWEI_QUICK_GAME","COCOSPLAY","LINKSURE_MINI_GAME","QTT_MINI_GAME"].map((function(t){return{name:t,target:bh.Platform,targetName:"sys.Platform"}}))),Wn(bh,"sys",[{name:"IPHONE",newName:"IOS",target:bh.Platform,targetName:"sys.Platform"},{name:"IPAD",newName:"IOS",target:bh.Platform,targetName:"sys.Platform"}]),Kn(bh,"sys",["LINUX","BLACKBERRY","NACL","EMSCRIPTEN","TIZEN","WINRT","WP8","QQ_PLAY","FB_PLAYABLE_ADS"].map((function(t){return{name:t}}))),Wn(bh,"sys",[{name:"windowPixelResolution",target:xh,targetName:"screen",newName:"windowSize"}]),Qn(xh,"screen",[{name:"autoFullScreen",suggest:"please use screen.requestFullScreen() instead."},{name:"disableAutoFullScreen"}]);var Mh=t("aR",{topLeft:i.v2(0,0),topRight:i.v2(0,0),top:i.v2(0,0),bottomLeft:i.v2(0,0),bottomRight:i.v2(0,0),bottom:i.v2(0,0),center:i.v2(0,0),left:i.v2(0,0),right:i.v2(0,0),width:0,height:0,init:function(t){var e=this.width=t.width,n=this.height=t.height,r=t.x,i=t.y,a=i+n,s=r+e;this.topLeft.x=r,this.topLeft.y=a,this.topRight.x=s,this.topRight.y=a,this.top.x=r+e/2,this.top.y=a,this.bottomLeft.x=r,this.bottomLeft.y=i,this.bottomRight.x=s,this.bottomRight.y=i,this.bottom.x=r+e/2,this.bottom.y=i,this.center.x=r+e/2,this.center.y=i+n/2,this.left.x=r,this.left.y=i+n/2,this.right.x=s,this.right.y=i+n/2}});function wh(){}i.visibleRect=Mh,i.easing=wm,wh.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},wh.prototype.targetOff=function(t){this.removeAll(t)},t("b7",Object.freeze({__proto__:null,syncNodeValues:function(t){var e=t._lpos;t.setPositionForJS(e.x,e.y,e.z);var n=t._lscale;t.setScaleForJS(n.x,n.y,n.z);var r=t._lrot;t.setRotationForJS(r.x,r.y,r.z,r.w);var i=t._euler;t.setRotationFromEulerForJS(i.x,i.y,i.z)},updateChildrenForDeserialize:function t(e){if(e){var n=e.children;if(n){var r=n.length;if(r){e._setChildren(n);for(var i=0;i<r;++i)t(n[i])}}}},ExtraEventMethods:wh}));var Eh=function(){function t(){this._finalizationRegistry=null,this._gcObjects=new WeakMap}var e=t.prototype;return e.registerGCObject=function(t){return t},e.init=function(){},e.finalizationRegistryCallback=function(t){var e=this._gcObjects.get(t);e&&(this._gcObjects.delete(t),e.destroy()),this._finalizationRegistry.unregister(t)},e.destroy=function(){},t}(),Ah=t("bk",new Eh);t("bl",function(){function t(){return Ah.registerGCObject(this)}return t.prototype.destroy=function(){},t}()),i.math=Oi,i.geometry=ih}}}));
